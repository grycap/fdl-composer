(this["webpackJsonpworkflow-builder"]=this["webpackJsonpworkflow-builder"]||[]).push([[0],{182:function(e,t,o){},183:function(e,t,o){},332:function(e,t,o){"use strict";o.r(t);var n,a,r,i,c,s,u,l,p,d,b,j,v,f,O,g,h,m,x,P,y,k,w=o(0),C=o.n(w),D=o(25),M=o.n(D),_=(o(182),o(119)),S=o(2),I=o(71),V=o.n(I),K=o(98),U=o(160),N=o(161),E=o(80),F=o(175),A=o(171),B=o(19),J=(o(183),o(99)),T=o(15),z=(T.default.pre(n||(n=Object(B.a)(["\n  margin: 10px;\n  padding: 10px;\n  line-height: 1.4em;\n  white-space: pre-wrap;\n  font-family: Consolas, 'Andale Mono WT', 'Andale Mono', 'Lucida Console', 'Lucida Sans Typewriter', 'DejaVu Sans Mono',\n    'Bitstream Vera Sans Mono', 'Liberation Mono', 'Nimbus Mono L', Monaco, 'Courier New', Courier, monospace;\n\n  background-color: #eff0f1;\n  overflow: auto;\n"]))),T.default.div(a||(a=Object(B.a)(["\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  overflow: hidden;\n"]))),T.default.div(r||(r=Object(B.a)(["\n  margin: 10px 10px 0px;\n  padding: 10px;\n  line-height: 1.4em;\n"])))),q=o(1),L=(Object(T.createGlobalStyle)(i||(i=Object(B.a)(["\n  body {\n    margin: 0px;\n    max-width: 100vw;\n    max-height: 100vh;\n    overflow: hidden;\n    box-sizing: border-box;\n    font-family: sans-serif;\n  }\n\n  *, :after, :before {\n    box-sizing: inherit;\n  }\n"]))),T.default.div(c||(c=Object(B.a)(["\n  display: flex;\n  flex-direction: row;\n  flex: 1;\n  max-width: 100vw;\n  max-height: 93vh;\n"])))),R=o(344),Y=o(53),H=T.default.div(s||(s=Object(B.a)(["\n  width: 200px;\n  background: white;\n  display: flex;\n  flex-direction: column;\n  flex-shrink: 0;\n  overflow: auto;\n"]))),W=function(e){var t=e.storageProviders,o=e.removeStorageProvider,n=e.editStorageProvider;return Object(q.jsxs)(H,{children:[Object(q.jsx)(z,{children:"Drag and drop these items onto the canvas."}),null===t||void 0===t?void 0:t.filter((function(e){var t;return null===(t=e.properties)||void 0===t?void 0:t.name})).map((function(e,t){return Object(q.jsx)(R.a,{placement:"top",title:"Delete provider ".concat(e.properties.name),content:Object(q.jsx)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center"},children:Object(q.jsxs)("div",{style:{display:"flex",flexDirection:"column",rowGap:"1rem"},children:[Object(q.jsx)(Y.a,{onClick:function(){return n(e.type,e.properties.name)},children:"Edit"}),Object(q.jsx)(Y.a,{danger:!0,onClick:function(){return o(e.type,e.properties.name)},children:"Delete"})]})}),children:Object(q.jsx)(oe,Object(S.a)(Object(S.a)({},e),{},{onDoubleClick:function(e){e.stopPropagation()}}))},"Popover_".concat(t))})),Object(q.jsx)(oe,{type:"oscar-fx",ports:{port1:{id:"port1",type:"top",properties:{path:""}},port2:{id:"port2",type:"right",properties:{path:""}},port3:{id:"port3",type:"bottom",properties:{path:""}},port4:{id:"port4",type:"left",properties:{path:""}}}}),Object(q.jsx)(oe,{type:"aws-fx",ports:{port1:{id:"port1",type:"top",properties:{path:""}},port2:{id:"port2",type:"right",properties:{path:""}},port3:{id:"port3",type:"bottom",properties:{path:""}},port4:{id:"port4",type:"left",properties:{path:""}}}})]})},G=o(113),Q=o(35),X=T.default.div(u||(u=Object(B.a)(["\n  min-height: 100px;\n\n  margin-bottom: 1rem;\n  border: 0.5px solid grey;\n\n  padding: 20px 30px;\n  font-size: 14px;\n  background: black;\n  cursor: move;\n  ","\n\n  ",";\n"])),(function(e){return e.color&&Object(T.css)(l||(l=Object(B.a)(["\n      color: ",";\n    "])),e.color)}),(function(e){return e.background&&Object(T.css)(p||(p=Object(B.a)(["\n      background: url(",") no-repeat;\n      background-size: 96px;\n      background-position: center;\n    "])),e.background)})),Z=function(e){switch(e){case"oscar-fx":return{background:"#fff",color:"black"};case"aws-fx":return{background:"#080301",color:"white"};case"s3":return{background:"#ebe4c0",color:"black"};case"onedata":return{background:"#c2d4ad",color:"black"};case"minio":return{background:"#c47878",color:"black"};default:return{background:"#FFF",color:"black"}}},$=T.default.div(d||(d=Object(B.a)(["\n  font-weight: 700;\n  font-size: 2rem;\n  min-height: 100px;\n  margin-bottom: 1rem;\n  border: 0.5px solid grey;\n  padding: 30px;\n  min-height: 100px;\n  border-radius: 50%;\n  cursor: move;\n  ","\n  ",";\n"])),(function(e){return e.color&&Object(T.css)(b||(b=Object(B.a)(["\n      color: ",";\n    "])),e.color)}),(function(e){return e.background&&Object(T.css)(j||(j=Object(B.a)(["\n      background: url(",") no-repeat;\n      background-size: 96px;\n      background-position: center;\n    "])),e.background)})),ee=function(e){switch(e){case"oscar-fx":return Object(q.jsx)("img",{alt:"oscar logo",src:"https://github.com/grycap/oscar/blob/master/docs/images/oscar3.png?raw=true",width:"96px"});case"aws-fx":return Object(q.jsx)("img",{alt:"aws logo",src:"https://d1.awsstatic.com/Digital%20Marketing/House/PAC/2up/PAC-Q4_House-Ads_Lambda_2up.62dc7e19b7b2e0a2c06821594c31f1ce00a6bdda.png",height:"32px"});case"s3":return Object(q.jsx)("img",{alt:"s3 logo",src:"https://servmask.com/img/products/s3.png",height:"48px"});case"onedata":return Object(q.jsx)("img",{alt:"aws logo",src:"https://www.ebi.ac.uk/about/technology/wp-content/uploads/2019/10/onedata-logo.png",height:"24px"});case"minio":return Object(q.jsx)("img",{alt:"aws logo",src:"https://suarapapua.com/wp-content/plugins/ilab-media-tools-premium/public/img/wizard-icon-minio.png",height:"36px"})}},te=function(e){switch(e){case"oscar-fx":return"https://github.com/grycap/oscar/blob/master/docs/images/oscar3.png?raw=true";case"aws-fx":return"https://d1.awsstatic.com/Digital%20Marketing/House/PAC/2up/PAC-Q4_House-Ads_Lambda_2up.62dc7e19b7b2e0a2c06821594c31f1ce00a6bdda.png";case"s3":return"https://servmask.com/img/products/s3.png";case"onedata":return"https://www.ebi.ac.uk/about/technology/wp-content/uploads/2019/10/onedata-logo.png";case"minio":return"https://suarapapua.com/wp-content/plugins/ilab-media-tools-premium/public/img/wizard-icon-minio.png"}},oe=function(e){var t=e.type,o=e.ports,n=e.properties,a=Object(G.a)(e,["type","ports","properties"]),r=Z(t);return["s3","onedata","minio"].includes(t)?Object(q.jsx)($,Object(S.a)(Object(S.a)({background:te(t),color:r.color,draggable:!0,onDragStart:function(e){e.dataTransfer.setData(Q.REACT_FLOW_CHART,JSON.stringify({type:t,ports:o,properties:n}))}},a),{},{children:null===n||void 0===n?void 0:n.name})):Object(q.jsx)(X,{background:te(t),color:r.color,draggable:!0,onDragStart:function(e){e.dataTransfer.setData(Q.REACT_FLOW_CHART,JSON.stringify({type:t,ports:o,properties:n}))}})},ne=o(345),ae=o(346),re=o(347),ie=function(e){switch(e.port.type){case"right":case"left":return Object(q.jsx)(ne.a,{style:{fontSize:"1rem"}});case"top":case"bottom":return Object(q.jsx)(ae.a,{style:{fontSize:"1rem"}});default:return Object(q.jsx)(re.a,{style:{fontSize:"1rem"}})}},ce={offset:{x:0,y:0},scale:1,nodes:{},links:{},selected:{},hovered:{},modalVisible:!1,storageProviders:[],s3ModalVisible:!1,oneDataModalVisible:!1,minioModalVisible:!1,s3DefaultValue:void 0,oneDataDefaultValue:void 0,minioDefaultValue:void 0},se=o(337),ue=o(343),le=o(348),pe=o(349),de=o(350),be=o(351),je=o(108),ve=o(42),fe=o(341),Oe=o(334),ge=o(338),he=o(342),me=T.default.div(v||(v=Object(B.a)(["\n  padding: 30px;\n  ","\n  ",";\n"])),(function(e){return e.color&&Object(T.css)(f||(f=Object(B.a)(["\n      color: ",";\n    "])),e.color)}),(function(e){return e.background&&Object(T.css)(O||(O=Object(B.a)(["\n      background: ",";\n    "])),e.background)})),xe=T.default.div(g||(g=Object(B.a)(["\n  padding: 30px;\n  border-radius: 50%;\n  ","\n  ",";\n"])),(function(e){return e.color&&Object(T.css)(h||(h=Object(B.a)(["\n      color: ",";\n    "])),e.color)}),(function(e){return e.background&&Object(T.css)(m||(m=Object(B.a)(["\n      background: ",";\n    "])),e.background)})),Pe=T.default.input(x||(x=Object(B.a)(["\n  padding: 10px;\n  border: 1px solid cornflowerblue;\n  margin-bottom: 0.5rem;\n  width: 80%;\n"]))),ye=T.default.div(P||(P=Object(B.a)(["\n  display: flex;\n  flex-direction: row;\n"]))),ke=T.default.div(y||(y=Object(B.a)(["\n  width: 20%;\n  align-content: center;\n"]))),we=function(e){var t,o,n,a,r,i,c,s,u,l,p,d,b,j,v,f,O,g,h,m,x,P,y,k,w,D,M,_,I,V,K,U,N,E,F,A,B,J,T,z,L,R,Y,H,W,Q,X,$,te,oe,ne,ae,re,ie,ce,se,ue,le,pe,de,be=e.node,je=(e.config,Object(G.a)(e,["node","config"])),we=C.a.useState(!1),Ce=Object(ve.a)(we,2),De=Ce[0],Me=Ce[1],_e=C.a.useState(be.properties||{}),Se=Object(ve.a)(_e,2),Ie=Se[0],Ve=Se[1],Ke=Z(be.type);switch(be.type){case"s3":case"onedata":case"minio":return Object(q.jsxs)(xe,Object(S.a)(Object(S.a)({},je),{},{color:Ke.color,background:Ke.background,onDoubleClick:function(e){return Me(!0)},children:[Object(q.jsx)(fe.a,{title:(null===(t=be.properties)||void 0===t?void 0:t.name)||be.type,visible:De,onOk:function(){be.properties=Ie,Me(!1)},onCancel:function(){return Me(!1)},okButtonProps:{disabled:!1},cancelButtonProps:{disabled:!1},children:Object(q.jsxs)(ye,{children:[Object(q.jsx)(ke,{children:"Path:"}),Object(q.jsx)(Pe,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"darknet-workflow/output",value:Ie.path,onChange:function(e){Ve(Object(S.a)(Object(S.a)({},Ie),{},{path:e.target.value}))}})]})}),Object(q.jsx)("div",{children:ee(be.type)}),Object(q.jsx)("div",{style:{fontSize:"1.5rem",fontWeight:700},children:"".concat((null===(o=be.properties)||void 0===o?void 0:o.name)||"")})]}));case"oscar-fx":return Object(q.jsxs)(me,{color:Ke.color,background:Ke.background,onDoubleClick:function(){return Me(!0)},children:[Object(q.jsxs)(fe.a,{title:(null===(n=be.properties)||void 0===n?void 0:n.name)||be.type,visible:De,onOk:function(){be.properties=Ie,Me(!1)},onCancel:function(){return Me(!1)},okButtonProps:{disabled:!1},cancelButtonProps:{disabled:!1},children:[Object(q.jsx)(Oe.a,{children:"Setup"}),Object(q.jsxs)(ye,{children:[Object(q.jsx)(ke,{children:"Name:"}),Object(q.jsx)(Pe,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"darknet",value:Ie.name,onChange:function(e){Ve(Object(S.a)(Object(S.a)({},Ie),{},{name:e.target.value}))}})]}),Object(q.jsxs)(ye,{children:[Object(q.jsx)(ke,{children:"Memory:"}),Object(q.jsx)(Pe,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"1Gi",value:Ie.memory,onChange:function(e){Ve(Object(S.a)(Object(S.a)({},Ie),{},{memory:e.target.value}))}})]}),Object(q.jsxs)(ye,{children:[Object(q.jsx)(ke,{children:"Cpu:"}),Object(q.jsx)(Pe,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"1.0",value:Ie.cpu,onChange:function(e){Ve(Object(S.a)(Object(S.a)({},Ie),{},{cpu:e.target.value}))}})]}),Object(q.jsxs)(ye,{children:[Object(q.jsx)(ke,{children:"Image:"}),Object(q.jsx)(Pe,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"grycap/darknet",value:Ie.image,onChange:function(e){Ve(Object(S.a)(Object(S.a)({},Ie),{},{image:e.target.value}))}})]}),Object(q.jsxs)(ye,{children:[Object(q.jsx)(ke,{children:"Script:"}),Object(q.jsx)(Pe,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},disabled:!0,placeholder:"yolo.sh",value:Ie.script,onChange:function(e){Ve(Object(S.a)(Object(S.a)({},Ie),{},{script:e.target.value}))}})]}),Object(q.jsxs)(ye,{children:[Object(q.jsx)(ke,{children:"Environment variables"}),Object(q.jsx)(Pe,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"KEY1=val1, KEY2=val2...",value:null===(a=Ie.environment)||void 0===a?void 0:a.Variables,onChange:function(e){e.target.value;Ve(Object(S.a)(Object(S.a)({},Ie),{},{environment:Object(S.a)(Object(S.a)({},Ie.environment),{},{Variables:e.target.value})}))}})]}),Object(q.jsx)(Oe.a,{children:"Input"}),Object(q.jsxs)(ye,{children:[Object(q.jsx)(ke,{children:"Suffix"}),Object(q.jsx)(Pe,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"png, jpg, xls",value:null===(r=Ie.input)||void 0===r?void 0:r.suffix,onChange:function(e){e.target.value;Ve(Object(S.a)(Object(S.a)({},Ie),{},{input:Object(S.a)(Object(S.a)({},Ie.input),{},{suffix:e.target.value})}))}})]}),Object(q.jsxs)(ye,{children:[Object(q.jsx)(ke,{children:"Prefix"}),Object(q.jsx)(Pe,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"result-, demo-",value:null===(i=Ie.input)||void 0===i?void 0:i.prefix,onChange:function(e){e.target.value;Ve(Object(S.a)(Object(S.a)({},Ie),{},{input:Object(S.a)(Object(S.a)({},Ie.input),{},{prefix:e.target.value})}))}})]}),Object(q.jsx)(Oe.a,{children:"Output"}),Object(q.jsxs)(ye,{children:[Object(q.jsx)(ke,{children:"Suffix"}),Object(q.jsx)(Pe,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"png, jpg, xls",value:null===(c=Ie.output)||void 0===c?void 0:c.suffix,onChange:function(e){e.target.value;Ve(Object(S.a)(Object(S.a)({},Ie),{},{output:Object(S.a)(Object(S.a)({},Ie.output),{},{suffix:e.target.value})}))}})]}),Object(q.jsxs)(ye,{children:[Object(q.jsx)(ke,{children:"Prefix"}),Object(q.jsx)(Pe,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"result-, demo-",value:null===(s=Ie.output)||void 0===s?void 0:s.prefix,onChange:function(e){e.target.value;Ve(Object(S.a)(Object(S.a)({},Ie),{},{output:Object(S.a)(Object(S.a)({},Ie.output),{},{prefix:e.target.value})}))}})]})]}),Object(q.jsx)("div",{children:ee(be.type)}),Object(q.jsx)("div",{style:{fontSize:"1.5rem",fontWeight:700},children:"".concat((null===(u=be.properties)||void 0===u?void 0:u.name)||"")})]});case"aws-fx":return Object(q.jsxs)(me,{color:Ke.color,background:Ke.background,onDoubleClick:function(){return Me(!0)},children:[Object(q.jsx)(fe.a,{title:(null===(l=be.properties)||void 0===l?void 0:l.name)||be.type,visible:De,onOk:function(){be.properties=Ie,Me(!1)},onCancel:function(){return Me(!1)},okButtonProps:{disabled:!1},cancelButtonProps:{disabled:!1},children:Object(q.jsxs)(ge.a,{defaultActiveKey:"1",children:[Object(q.jsxs)(ge.a.TabPane,{tab:"Lambda",children:[Object(q.jsx)(Oe.a,{children:"Setup"}),Object(q.jsxs)(ye,{children:[Object(q.jsx)(ke,{children:"Name:"}),Object(q.jsx)(Pe,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"darknet",value:null===(p=Ie.lambda)||void 0===p?void 0:p.name,onChange:function(e){Ve(Object(S.a)(Object(S.a)({},Ie),{},{lambda:Object(S.a)(Object(S.a)({},Ie.lambda),{},{name:e.target.value})}))}})]}),Object(q.jsxs)(ye,{children:[Object(q.jsx)(ke,{children:"Region:"}),Object(q.jsx)(Pe,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"us-east-1",value:null===(d=Ie.lambda)||void 0===d?void 0:d.region,onChange:function(e){Ve(Object(S.a)(Object(S.a)({},Ie),{},{lambda:Object(S.a)(Object(S.a)({},Ie.lambda),{},{region:e.target.value})}))}})]}),Object(q.jsxs)(ye,{children:[Object(q.jsx)(ke,{children:"Boto profile:"}),Object(q.jsx)(Pe,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"default",value:null===(b=Ie.lambda)||void 0===b?void 0:b.boto_profile,onChange:function(e){Ve(Object(S.a)(Object(S.a)({},Ie),{},{lambda:Object(S.a)(Object(S.a)({},Ie.lambda),{},{boto_profile:e.target.value})}))}})]}),Object(q.jsxs)(ye,{children:[Object(q.jsx)(ke,{children:"Memory:"}),Object(q.jsx)(Pe,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"1024",value:null===(j=Ie.lambda)||void 0===j?void 0:j.memory,onChange:function(e){Ve(Object(S.a)(Object(S.a)({},Ie),{},{lambda:Object(S.a)(Object(S.a)({},Ie.lambda),{},{memory:e.target.value})}))}})]}),Object(q.jsxs)(ye,{children:[Object(q.jsx)(ke,{children:"Cpu:"}),Object(q.jsx)(Pe,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"1.0",value:null===(v=Ie.lambda)||void 0===v?void 0:v.cpu,onChange:function(e){Ve(Object(S.a)(Object(S.a)({},Ie),{},{lambda:Object(S.a)(Object(S.a)({},Ie.lambda),{},{cpu:e.target.value})}))}})]}),Object(q.jsxs)(ye,{children:[Object(q.jsx)(ke,{children:"Init script:"}),Object(q.jsx)(Pe,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"yolo.sh",value:null===(f=Ie.lambda)||void 0===f?void 0:f.init_script,onChange:function(e){Ve(Object(S.a)(Object(S.a)({},Ie),{},{lambda:Object(S.a)(Object(S.a)({},Ie.lambda),{},{init_script:e.target.value})}))}})]}),Object(q.jsxs)(ye,{children:[Object(q.jsx)(ke,{children:"Timeout:"}),Object(q.jsx)(Pe,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"300",value:null===(O=Ie.lambda)||void 0===O?void 0:O.timeout,onChange:function(e){Ve(Object(S.a)(Object(S.a)({},Ie),{},{lambda:Object(S.a)(Object(S.a)({},Ie.lambda),{},{timeout:e.target.value})}))}})]}),Object(q.jsxs)(ye,{children:[Object(q.jsx)(ke,{children:"Log level:"}),Object(q.jsx)(Pe,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"INFO | DEBUG | ERROR | WARNING",value:null===(g=Ie.lambda)||void 0===g?void 0:g.log_level,onChange:function(e){Ve(Object(S.a)(Object(S.a)({},Ie),{},{lambda:Object(S.a)(Object(S.a)({},Ie.lambda),{},{log_level:e.target.value})}))}})]}),Object(q.jsxs)(ye,{children:[Object(q.jsx)(ke,{children:"Execution mode:"}),Object(q.jsx)(Pe,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"lambda | lambda-batch | batch",value:null===(h=Ie.lambda)||void 0===h?void 0:h.execution_mode,onChange:function(e){Ve(Object(S.a)(Object(S.a)({},Ie),{},{lambda:Object(S.a)(Object(S.a)({},Ie.lambda),{},{execution_mode:e.target.value})}))}})]}),Object(q.jsxs)(ye,{children:[Object(q.jsx)(ke,{children:"Environment variables"}),Object(q.jsx)(Pe,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"KEY1=val1, KEY2=val2...",value:null===(m=Ie.lambda)||void 0===m||null===(x=m.environment)||void 0===x?void 0:x.Variables,onChange:function(e){var t;e.target.value;Ve(Object(S.a)(Object(S.a)({},Ie),{},{lambda:Object(S.a)(Object(S.a)({},Ie.lambda),{},{environment:Object(S.a)(Object(S.a)({},null===(t=Ie.lambda)||void 0===t?void 0:t.environment),{},{Variables:e.target.value})})}))}})]}),Object(q.jsx)(Oe.a,{children:"Container"}),Object(q.jsxs)(ye,{children:[Object(q.jsx)(ke,{children:"Image:"}),Object(q.jsx)(Pe,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"grycap/darknet",value:null===(P=Ie.lambda)||void 0===P||null===(y=P.container)||void 0===y?void 0:y.image,onChange:function(e){var t;Ve(Object(S.a)(Object(S.a)({},Ie),{},{lambda:Object(S.a)(Object(S.a)({},Ie.lambda),{},{container:Object(S.a)(Object(S.a)({},null===(t=Ie.lambda)||void 0===t?void 0:t.container),{},{image:e.target.value})})}))}})]}),Object(q.jsxs)(ye,{children:[Object(q.jsx)(ke,{children:"Timeout threshold"}),Object(q.jsx)(Pe,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"grycap/darknet",value:null===(k=Ie.lambda)||void 0===k||null===(w=k.container)||void 0===w?void 0:w.timeout_threshold,onChange:function(e){var t;Ve(Object(S.a)(Object(S.a)({},Ie),{},{lambda:Object(S.a)(Object(S.a)({},Ie.lambda),{},{container:Object(S.a)(Object(S.a)({},null===(t=Ie.lambda)||void 0===t?void 0:t.container),{},{timeout_threshold:e.target.value})})}))}})]}),Object(q.jsxs)(ye,{children:[Object(q.jsx)(ke,{children:"Environment variables"}),Object(q.jsx)(Pe,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"KEY1=val1, KEY2=val2...",value:null===(D=Ie.lambda)||void 0===D||null===(M=D.container)||void 0===M||null===(_=M.environment)||void 0===_?void 0:_.Variables,onChange:function(e){var t,o;e.target.value;Ve(Object(S.a)(Object(S.a)({},Ie),{},{lambda:Object(S.a)(Object(S.a)({},Ie.lambda),{},{container:Object(S.a)(Object(S.a)({},null===(t=Ie.lambda)||void 0===t?void 0:t.container),{},{environment:Object(S.a)(Object(S.a)({},null===(o=Ie.lambda)||void 0===o?void 0:o.container.environment),{},{Variables:e.target.value})})})}))}})]}),Object(q.jsx)(Oe.a,{children:"Input"}),Object(q.jsxs)(ye,{children:[Object(q.jsx)(ke,{children:"Suffix"}),Object(q.jsx)(Pe,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"png, jpg, xls",value:null===(I=Ie.lambda)||void 0===I||null===(V=I.input)||void 0===V?void 0:V.suffix,onChange:function(e){var t;e.target.value;Ve(Object(S.a)(Object(S.a)({},Ie),{},{lambda:Object(S.a)(Object(S.a)({},Ie.lambda),{},{input:Object(S.a)(Object(S.a)({},null===(t=Ie.lambda)||void 0===t?void 0:t.input),{},{suffix:e.target.value})})}))}})]}),Object(q.jsxs)(ye,{children:[Object(q.jsx)(ke,{children:"Prefix"}),Object(q.jsx)(Pe,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"result-, demo-",value:null===(K=Ie.lambda)||void 0===K||null===(U=K.input)||void 0===U?void 0:U.prefix,onChange:function(e){var t;e.target.value;Ve(Object(S.a)(Object(S.a)({},Ie),{},{lambda:Object(S.a)(Object(S.a)({},Ie.lambda),{},{input:Object(S.a)(Object(S.a)({},null===(t=Ie.lambda)||void 0===t?void 0:t.input),{},{prefix:e.target.value})})}))}})]}),Object(q.jsx)(Oe.a,{children:"Output"}),Object(q.jsxs)(ye,{children:[Object(q.jsx)(ke,{children:"Suffix"}),Object(q.jsx)(Pe,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"png, jpg, xls",value:null===(N=Ie.lambda)||void 0===N||null===(E=N.output)||void 0===E?void 0:E.suffix,onChange:function(e){var t;e.target.value;Ve(Object(S.a)(Object(S.a)({},Ie),{},{lambda:Object(S.a)(Object(S.a)({},Ie.lambda),{},{output:Object(S.a)(Object(S.a)({},null===(t=Ie.lambda)||void 0===t?void 0:t.input),{},{suffix:e.target.value})})}))}})]}),Object(q.jsxs)(ye,{children:[Object(q.jsx)(ke,{children:"Prefix"}),Object(q.jsx)(Pe,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"result-, demo-",value:null===(F=Ie.lambda)||void 0===F||null===(A=F.output)||void 0===A?void 0:A.prefix,onChange:function(e){var t;e.target.value;Ve(Object(S.a)(Object(S.a)({},Ie),{},{lambda:Object(S.a)(Object(S.a)({},Ie.lambda),{},{output:Object(S.a)(Object(S.a)({},null===(t=Ie.lambda)||void 0===t?void 0:t.input),{},{prefix:e.target.value})})}))}})]})]},"1"),Object(q.jsxs)(ge.a.TabPane,{tab:"Batch",children:[Object(q.jsx)(Oe.a,{children:"Setup"}),Object(q.jsxs)(ye,{children:[Object(q.jsx)(ke,{children:"Region:"}),Object(q.jsx)(Pe,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"us-east-1",value:null===(B=Ie.batch)||void 0===B?void 0:B.region,onChange:function(e){Ve(Object(S.a)(Object(S.a)({},Ie),{},{batch:Object(S.a)(Object(S.a)({},Ie.batch),{},{region:e.target.value})}))}})]}),Object(q.jsxs)(ye,{children:[Object(q.jsx)(ke,{children:"Boto profile:"}),Object(q.jsx)(Pe,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"default",value:null===(J=Ie.batch)||void 0===J?void 0:J.boto_profile,onChange:function(e){Ve(Object(S.a)(Object(S.a)({},Ie),{},{batch:Object(S.a)(Object(S.a)({},Ie.batch),{},{boto_profile:e.target.value})}))}})]}),Object(q.jsxs)(ye,{children:[Object(q.jsx)(ke,{children:"Memory:"}),Object(q.jsx)(Pe,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"1024",value:null===(T=Ie.batch)||void 0===T?void 0:T.memory,onChange:function(e){Ve(Object(S.a)(Object(S.a)({},Ie),{},{batch:Object(S.a)(Object(S.a)({},Ie.batch),{},{memory:e.target.value})}))}})]}),Object(q.jsxs)(ye,{children:[Object(q.jsx)(ke,{children:"vCpu:"}),Object(q.jsx)(Pe,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"1.0",value:Ie.vcpus,onChange:function(e){Ve(Object(S.a)(Object(S.a)({},Ie),{},{batch:Object(S.a)(Object(S.a)({},Ie.batch),{},{cpu:e.target.value})}))}})]}),Object(q.jsxs)(ye,{children:[Object(q.jsx)(ke,{children:"Enable gpu:"}),Object(q.jsx)(he.a,{onClick:function(e){return e.stopPropagation()},value:Ie.enable_gpu,onChange:function(e){Ve(Object(S.a)(Object(S.a)({},Ie),{},{batch:Object(S.a)(Object(S.a)({},Ie.batch),{},{enable_gpu:e.target.checked})}))}})]}),Object(q.jsxs)(ye,{children:[Object(q.jsx)(ke,{children:"Service role:"}),Object(q.jsx)(Pe,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"aren:...",value:Ie.service_role,onChange:function(e){Ve(Object(S.a)(Object(S.a)({},Ie),{},{batch:Object(S.a)(Object(S.a)({},Ie.batch),{},{service_role:e.target.value})}))}})]}),Object(q.jsxs)(ye,{children:[Object(q.jsx)(ke,{children:"Environment variables"}),Object(q.jsx)(Pe,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"KEY1=val1, KEY2=val2...",value:null===(z=Ie.batch)||void 0===z||null===(L=z.environment)||void 0===L?void 0:L.Variables,onChange:function(e){var t;e.target.value;Ve(Object(S.a)(Object(S.a)({},Ie),{},{batch:Object(S.a)(Object(S.a)({},Ie.batch),{},{environment:Object(S.a)(Object(S.a)({},null===(t=Ie.batch)||void 0===t?void 0:t.environment),{},{Variables:e.target.value})})}))}})]}),Object(q.jsx)(Oe.a,{children:"Compute resources"}),Object(q.jsxs)(ye,{children:[Object(q.jsx)(ke,{children:"Desired vCpus"}),Object(q.jsx)(Pe,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"0",value:null===(R=Ie.batch)||void 0===R||null===(Y=R.compute_resources)||void 0===Y?void 0:Y.desired_v_cpus,onChange:function(e){var t;Ve(Object(S.a)(Object(S.a)({},Ie),{},{batch:Object(S.a)(Object(S.a)({},Ie.batch),{},{compute_resources:Object(S.a)(Object(S.a)({},null===(t=Ie.batch)||void 0===t?void 0:t.compute_resources),{},{desired_v_cpus:e.target.value})})}))}})]}),Object(q.jsxs)(ye,{children:[Object(q.jsx)(ke,{children:"Min vCpus"}),Object(q.jsx)(Pe,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"0",value:null===(H=Ie.batch)||void 0===H||null===(W=H.compute_resources)||void 0===W?void 0:W.min_v_cpus,onChange:function(e){var t;Ve(Object(S.a)(Object(S.a)({},Ie),{},{batch:Object(S.a)(Object(S.a)({},Ie.batch),{},{compute_resources:Object(S.a)(Object(S.a)({},null===(t=Ie.batch)||void 0===t?void 0:t.compute_resources),{},{min_v_cpus:e.target.value})})}))}})]}),Object(q.jsxs)(ye,{children:[Object(q.jsx)(ke,{children:"Max vCpus"}),Object(q.jsx)(Pe,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"2",value:null===(Q=Ie.batch)||void 0===Q||null===(X=Q.compute_resources)||void 0===X?void 0:X.max_v_cpus,onChange:function(e){var t;Ve(Object(S.a)(Object(S.a)({},Ie),{},{batch:Object(S.a)(Object(S.a)({},Ie.batch),{},{compute_resources:Object(S.a)(Object(S.a)({},null===(t=Ie.batch)||void 0===t?void 0:t.compute_resources),{},{max_v_cpus:e.target.value})})}))}})]}),Object(q.jsxs)(ye,{children:[Object(q.jsx)(ke,{children:"Max vCpus"}),Object(q.jsx)(Pe,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"2",value:null===($=Ie.batch)||void 0===$||null===(te=$.compute_resources)||void 0===te?void 0:te.max_v_cpus,onChange:function(e){var t;Ve(Object(S.a)(Object(S.a)({},Ie),{},{batch:Object(S.a)(Object(S.a)({},Ie.batch),{},{compute_resources:Object(S.a)(Object(S.a)({},null===(t=Ie.batch)||void 0===t?void 0:t.compute_resources),{},{max_v_cpus:e.target.value})})}))}})]}),Object(q.jsxs)(ye,{children:[Object(q.jsx)(ke,{children:"Instance role"}),Object(q.jsx)(Pe,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"arn:...",value:null===(oe=Ie.batch)||void 0===oe||null===(ne=oe.compute_resources)||void 0===ne?void 0:ne.instance_role,onChange:function(e){var t;Ve(Object(S.a)(Object(S.a)({},Ie),{},{batch:Object(S.a)(Object(S.a)({},Ie.batch),{},{compute_resources:Object(S.a)(Object(S.a)({},null===(t=Ie.batch)||void 0===t?void 0:t.compute_resources),{},{instance_role:e.target.value})})}))}})]}),Object(q.jsxs)(ye,{children:[Object(q.jsx)(ke,{children:"Security group ids"}),Object(q.jsx)(Pe,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"sg-12345678, sg-12345679...",value:null===(ae=Ie.batch)||void 0===ae||null===(re=ae.security_group_ids)||void 0===re?void 0:re.security_group_ids,onChange:function(e){var t;Ve(Object(S.a)(Object(S.a)({},Ie),{},{batch:Object(S.a)(Object(S.a)({},Ie.batch),{},{compute_resources:Object(S.a)(Object(S.a)({},null===(t=Ie.batch)||void 0===t?void 0:t.compute_resources),{},{security_group_ids:e.target.value})})}))}})]}),Object(q.jsxs)(ye,{children:[Object(q.jsx)(ke,{children:"Subnets"}),Object(q.jsx)(Pe,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"subnet-12345, subnet-67891...",value:null===(ie=Ie.batch)||void 0===ie||null===(ce=ie.subnets)||void 0===ce?void 0:ce.subnets,onChange:function(e){var t;Ve(Object(S.a)(Object(S.a)({},Ie),{},{batch:Object(S.a)(Object(S.a)({},Ie.batch),{},{compute_resources:Object(S.a)(Object(S.a)({},null===(t=Ie.batch)||void 0===t?void 0:t.compute_resources),{},{subnets:e.target.value})})}))}})]}),Object(q.jsxs)(ye,{children:[Object(q.jsx)(ke,{children:"Instance types"}),Object(q.jsx)(Pe,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"m3.medium, m3.large...",value:null===(se=Ie.batch)||void 0===se||null===(ue=se.subnets)||void 0===ue?void 0:ue.instance_types,onChange:function(e){var t;Ve(Object(S.a)(Object(S.a)({},Ie),{},{batch:Object(S.a)(Object(S.a)({},Ie.batch),{},{compute_resources:Object(S.a)(Object(S.a)({},null===(t=Ie.batch)||void 0===t?void 0:t.compute_resources),{},{instance_types:e.target.value})})}))}})]})]},"2")]})}),Object(q.jsx)("div",{children:ee(be.type)}),Object(q.jsx)("div",{style:{fontSize:"1.5rem",fontWeight:700},children:"".concat((null===(le=be.properties)||void 0===le?void 0:le.lambda.name)||"")})]});default:return Object(q.jsxs)(me,{color:Ke.color,background:Ke.background,onDoubleClick:function(){Me(!0)},children:[Object(q.jsx)(fe.a,{title:(null===(pe=be.properties)||void 0===pe?void 0:pe.name)||be.type,visible:De,onOk:function(){be.properties=Ie,Me(!1)},onCancel:function(){return Me(!1)},okButtonProps:{disabled:!1},cancelButtonProps:{disabled:!1}}),Object(q.jsx)("div",{children:ee(be.type)}),Object(q.jsx)("div",{style:{fontSize:"1.5rem",fontWeight:700},children:"".concat((null===(de=be.properties)||void 0===de?void 0:de.name)||"")})]})}},Ce=o(339),De=o(340),Me=function(e){var t=e.visible,o=e.onOk,n=e.onCancel,a=e.defaultValue,r=e.removeStorageProvider,i=Ce.a.useForm(),c=Object(ve.a)(i,1)[0];return Object(w.useEffect)((function(){a&&c.setFieldsValue(a)}),[a,t,c]),Object(q.jsx)(fe.a,{title:"S3 Storage Provider ".concat((null===a||void 0===a?void 0:a.name)||""),visible:t,onCancel:function(){n(),c.resetFields()},onOk:function(){c.validateFields().then((function(e){a&&r&&e.name!==a.name&&r("s3",a.name),o(e),c.resetFields()})).catch((function(e){return console.log("Error",e)}))},children:Object(q.jsxs)(Ce.a,{form:c,initialValues:a,name:"Form s3 modal",children:[Object(q.jsx)(Ce.a.Item,{name:"name",label:"Name",rules:[{required:!0,message:"Please input the name of the storage provider"}],children:Object(q.jsx)(De.a,{})}),Object(q.jsx)(Ce.a.Item,{name:"region",label:"Region",rules:[{required:!0,message:"Please input the region of the storage provider"}],children:Object(q.jsx)(De.a,{})}),Object(q.jsx)(Ce.a.Item,{name:"access_key",label:"Access Key",rules:[{required:!0,message:"Please input the access key of the storage provider"}],children:Object(q.jsx)(De.a,{})}),Object(q.jsx)(Ce.a.Item,{name:"secret_key",label:"Secret Key",rules:[{required:!0,message:"Please input the secret key of the storage provider"}],children:Object(q.jsx)(De.a,{})})]})})},_e=function(e){var t=e.visible,o=e.onOk,n=e.onCancel,a=e.defaultValue,r=e.removeStorageProvider,i=Ce.a.useForm(),c=Object(ve.a)(i,1)[0];return Object(w.useEffect)((function(){a&&c.setFieldsValue(a)}),[a,t,c]),Object(q.jsx)(fe.a,{title:"OneData Storage Provider ".concat((null===a||void 0===a?void 0:a.name)||""),visible:t,onCancel:function(){n(),c.resetFields()},onOk:function(){c.validateFields().then((function(e){a&&r&&e.name!==a.name&&r("onedata",a.name),o(e),c.resetFields()})).catch((function(e){return console.log("Error",e)}))},children:Object(q.jsxs)(Ce.a,{form:c,initialValues:a,name:"Form s3 modal",children:[Object(q.jsx)(Ce.a.Item,{name:"name",label:"Name",rules:[{required:!0,message:"Please input the name of the storage provider"}],children:Object(q.jsx)(De.a,{})}),Object(q.jsx)(Ce.a.Item,{name:"oneprovider_host",label:"One Provider Host",rules:[{required:!0,message:"Please input the One Provider Host of the storage provider"}],children:Object(q.jsx)(De.a,{})}),Object(q.jsx)(Ce.a.Item,{name:"token",label:"Token",rules:[{required:!0,message:"Please input the token of the storage provider"}],children:Object(q.jsx)(De.a,{})}),Object(q.jsx)(Ce.a.Item,{name:"space",label:"Space",rules:[{required:!0,message:"Please input the space of the storage provider"}],children:Object(q.jsx)(De.a,{})})]})})},Se=o(335),Ie=o(336),Ve=function(e){var t=e.visible,o=e.onOk,n=e.onCancel,a=e.defaultValue,r=e.removeStorageProvider,i=Ce.a.useForm(),c=Object(ve.a)(i,1)[0],s=Object(w.useState)(!1),u=Object(ve.a)(s,2),l=u[0],p=u[1];Object(w.useEffect)((function(){a&&c.setFieldsValue(a)}),[a,t,c]),Object(w.useEffect)((function(){a&&p(a.verify)}),[a]);return Object(q.jsx)(fe.a,{title:"MinIO Storage Provider ".concat((null===a||void 0===a?void 0:a.name)||""),visible:t,onCancel:function(){n(),c.resetFields(),p(!1)},onOk:function(){c.validateFields().then((function(e){var t=Object(S.a)(Object(S.a)({},e),{},{verify:l});a&&r&&t.name!==a.name&&r("minio",a.name),o(t),c.resetFields(),p(!1)})).catch((function(e){return console.log("Error",e)}))},children:Object(q.jsxs)(Ce.a,{form:c,initialValues:a,name:"Form minio modal",children:[Object(q.jsx)(Ce.a.Item,{name:"name",label:"Name",rules:[{required:!0,message:"Please input the name of the storage provider"}],children:Object(q.jsx)(De.a,{})}),Object(q.jsx)(Ce.a.Item,{name:"endpoint",label:"Endpoint",rules:[{required:!0,message:"Please input the endpoint of the storage provider"}],children:Object(q.jsx)(De.a,{})}),Object(q.jsxs)(Se.a,{style:{marginBottom:"1rem"},children:[Object(q.jsx)(Ie.a,{span:3,children:"Verify:"}),Object(q.jsx)(Ie.a,{span:1,children:Object(q.jsx)(he.a,{value:l,onChange:function(e){p(e.target.checked)}})})]}),Object(q.jsx)(Ce.a.Item,{name:"region",label:"Region",rules:[{required:!0,message:"Please input the region of the storage provider"}],children:Object(q.jsx)(De.a,{})}),Object(q.jsx)(Ce.a.Item,{name:"access_key",label:"Access Key",rules:[{required:!0,message:"Please input the access key of the storage provider"}],children:Object(q.jsx)(De.a,{})}),Object(q.jsx)(Ce.a.Item,{name:"secret_key",label:"Secret Key",rules:[{required:!0,message:"Please input the secret key of the storage provider"}],children:Object(q.jsx)(De.a,{})})]})})},Ke=o(44),Ue=o(169),Ne=o.n(Ue),Ee=se.a.Header,Fe=ue.a.SubMenu,Ae=Object(T.default)(Y.a)(k||(k=Object(B.a)(["\n  margin-right: 1rem;\n"]))),Be=function(e){Object(F.a)(o,e);var t=Object(A.a)(o);function o(e){var n;return Object(U.a)(this,o),(n=t.call(this,e)).state=Object(J.cloneDeep)(ce),n.removeStorageProvider=n.removeStorageProvider.bind(Object(E.a)(n)),n.editStorageProvider=n.editStorageProvider.bind(Object(E.a)(n)),n}return Object(N.a)(o,[{key:"exportToYaml",value:function(){!function(e,t){var o=e.filter((function(e){return"s3"===e.type||"onedata"===e.type||"minio"===e.type})),n=e.filter((function(e){return"oscar-fx"===e.type})).map((function(e){var n=t.filter((function(t){return t.to.nodeId===e.id&&("port1"===t.to.portId||"port4"===t.to.portId)||t.from.nodeId===e.id&&("port1"===t.from.portId||"port4"===t.from.portId)})),a=t.filter((function(t){return t.to.nodeId===e.id&&("port2"===t.to.portId||"port3"===t.to.portId)||t.from.nodeId===e.id&&("port2"===t.from.portId||"port3"===t.from.portId)})),r=o.find((function(e){return n.some((function(t){return t.from.nodeId===e.id||t.to.nodeId===e.id}))}));console.log("Input node",r);var i=o.find((function(e){return a.some((function(t){return t.from.nodeId===e.id||t.to.nodeId===e.id}))}));console.log("Output node",i);var c,s=JSON.parse(JSON.stringify(e.properties)),u=s.input;u?(u.path=null===r||void 0===r?void 0:r.properties.path,u.storage_provider="".concat(null===r||void 0===r?void 0:r.type,".").concat(null===r||void 0===r?void 0:r.properties.name),u.prefix?u.prefix=u.prefix.replace(" ","").split(","):delete u.prefix,(null===(c=u)||void 0===c?void 0:c.suffix)?u.suffix=u.suffix.replace(" ","").split(","):delete u.suffix):u={path:null===r||void 0===r?void 0:r.properties.path,storage_provider:"".concat(null===r||void 0===r?void 0:r.type,".").concat(null===r||void 0===r?void 0:r.properties.name)},s.input=[u];var l=s.output;l?(l.path=null===i||void 0===i?void 0:i.properties.path,l.storage_provider="".concat(null===i||void 0===i?void 0:i.type,".").concat(null===i||void 0===i?void 0:i.properties.name),l.prefix?l.prefix=l.prefix.replace(" ","").split(","):delete l.prefix,l.suffix?l.suffix=l.suffix.replace(" ","").split(","):delete l.suffix):l={path:null===i||void 0===i?void 0:i.properties.path,storage_provider:"".concat(null===i||void 0===i?void 0:i.type,".").concat(null===i||void 0===i?void 0:i.properties.name)},console.log(l),s.output=[l];var p=s.environment;return p&&(s.environment={Variables:p.Variables.replace(" ","").split(",").map((function(e){var t=e.split("=");return Object(Ke.a)({},t[0].trim(),t[1].trim())})).reduce((function(e,t){return Object(S.a)(Object(S.a)({},e),t)}))}),s})),a=e.filter((function(e){return"aws-fx"===e.type})).map((function(e){var n,a,r,i,c,s,u,l,p,d=JSON.parse(JSON.stringify(e.properties)),b=t.filter((function(t){return t.to.nodeId===e.id&&("port1"===t.to.portId||"port4"===t.to.portId)||t.from.nodeId===e.id&&("port1"===t.from.portId||"port4"===t.from.portId)})),j=t.filter((function(t){return t.to.nodeId===e.id&&("port2"===t.to.portId||"port3"===t.to.portId)||t.from.nodeId===e.id&&("port2"===t.from.portId||"port3"===t.from.portId)})),v=o.find((function(e){return b.some((function(t){return t.from.nodeId===e.id||t.to.nodeId===e.id}))})),f=o.find((function(e){return j.some((function(t){return t.from.nodeId===e.id||t.to.nodeId===e.id}))})),O=null===(n=d.lambda)||void 0===n?void 0:n.input;O?(O.path=null===v||void 0===v?void 0:v.properties.path,O.storage_provider="".concat(null===v||void 0===v?void 0:v.type,".").concat(null===v||void 0===v?void 0:v.properties.name),(null===(l=O)||void 0===l?void 0:l.prefix)&&(O.prefix=O.prefix.replace(" ","").split(",")),(null===(p=O)||void 0===p?void 0:p.suffix)&&(O.suffix=O.suffix.replace(" ","").split(","))):O={path:null===v||void 0===v?void 0:v.properties.path,storage_provider:"".concat(null===v||void 0===v?void 0:v.type,".").concat(null===v||void 0===v?void 0:v.properties.name)},d.lambda.input=[O];var g,h=null===(a=d.lambda)||void 0===a?void 0:a.output;h?(h.path=null===f||void 0===f?void 0:f.properties.path,h.storage_provider="".concat(null===f||void 0===f?void 0:f.type,".").concat(null===f||void 0===f?void 0:f.properties.name),(null===(g=h)||void 0===g?void 0:g.prefix)&&(h.prefix=h.prefix.replace(" ","").split(",")),h.suffix&&(h.suffix=h.suffix.replace(" ","").split(","))):h={path:null===f||void 0===f?void 0:f.properties.path,storage_provider:"".concat(null===f||void 0===f?void 0:f.type,".").concat(null===f||void 0===f?void 0:f.properties.name)},d.lambda.output=[h];var m=null===(r=d.batch)||void 0===r?void 0:r.compute_resources;(null===m||void 0===m?void 0:m.instance_types)&&(m.instance_types=m.instance_types.replace(" ","").split(",")),(null===m||void 0===m?void 0:m.subnets)&&(m.subnets=m.subnets.replace(" ","").split(",")),(null===m||void 0===m?void 0:m.security_group_ids)&&(m.security_group_ids=m.security_group_ids.replace(" ","").split(","));var x=null===(i=d.lambda)||void 0===i?void 0:i.environment;x&&(d.lambda.environment={Variables:x.Variables.replace(" ","").split(",").map((function(e){var t=e.split("=");return Object(Ke.a)({},t[0].trim(),t[1].trim())})).reduce((function(e,t){return Object(S.a)(Object(S.a)({},e),t)}))}),(null===(c=d.batch)||void 0===c?void 0:c.environment)&&(d.batch.environment={Variables:x.Variables.replace(" ","").split(",").map((function(e){var t=e.split("=");return Object(Ke.a)({},t[0].trim(),t[1].trim())})).reduce((function(e,t){return Object(S.a)(Object(S.a)({},e),t)}))});var P=null===(s=d.lambda)||void 0===s||null===(u=s.container)||void 0===u?void 0:u.environment;return P&&(d.lambda.container.environment={Variables:P.Variables.replace(" ","").split(",").map((function(e){var t=e.split("=");return Object(Ke.a)({},t[0].trim(),t[1].trim())})).reduce((function(e,t){return Object(S.a)(Object(S.a)({},e),t)}))}),d})),r=e.filter((function(e){return"onedata"===e.type})).map((function(e){return e.properties})).reduce((function(e,t){var o=JSON.parse(JSON.stringify(t));return delete o.path,delete o.output,Object(S.a)(Object(S.a)({},e),{},Object(Ke.a)({},t.name,o))}),{}),i=e.filter((function(e){return"s3"===e.type})).map((function(e){return e.properties})).reduce((function(e,t){var o=JSON.parse(JSON.stringify(t));return delete o.name,delete o.path,delete o.output,Object(S.a)(Object(S.a)({},e),{},Object(Ke.a)({},t.name,o))}),{}),c=e.filter((function(e){return"minio"===e.type})).map((function(e){return e.properties})).reduce((function(e,t){var o=JSON.parse(JSON.stringify(t));return delete o.name,delete o.path,delete o.output,Object(S.a)(Object(S.a)({},e),{},Object(Ke.a)({},t.name,o))}),{}),s={functions:{oscar:n.map((function(e){return JSON.parse('{ "'.concat(e.name,'": ').concat(JSON.stringify(e)," } "))})),aws:a},storage_providers:{}};0!==Object.keys(i).length&&(s.storage_providers.s3=i),0!==Object.keys(r).length&&(s.storage_providers.onedata=r),0!==Object.keys(c).length&&(s.storage_providers.minio=c),s.storage_providers.s3==={}&&delete s.storage_providers.s3,s.storage_providers.onedata==={}&&delete s.storage_providers.onedata,s.storage_providers.minio==={}&&delete s.storage_providers.minio;var u=Ne.a.dump(s),l=new Blob([u],{type:"text/plain;charset=utf-8"});Object(je.saveAs)(l,"workflow.yaml")}(Object.values(this.state.nodes),Object.values(this.state.links))}},{key:"exportState",value:function(){var e=JSON.stringify(this.state),t=new Blob([e],{type:"text/plain;charset=utf-8"});Object(je.saveAs)(t,"state.json")}},{key:"importState",value:function(){var e=this,t=document.createElement("input");t.type="file",t.accept=".json",t.onchange=function(o){console.log(o.target.files[0].name);var n=new FileReader;n.onload=function(){var t=Object(K.a)(V.a.mark((function t(o){var n;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(null===o||void 0===o||null===(n=o.target)||void 0===n?void 0:n.result)&&e.setState(JSON.parse(o.target.result));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),n.readAsText(t.files[0])},t.click()}},{key:"editStorageProvider",value:function(e,t){console.log("editing ".concat(e," ").concat(t));var o=this.state.storageProviders.find((function(o){return o.type===e&&o.properties.name===t}));switch(e){case"s3":this.setState(Object(S.a)(Object(S.a)({},this.state),{},{s3DefaultValue:null===o||void 0===o?void 0:o.properties,s3ModalVisible:!0}));break;case"onedata":this.setState(Object(S.a)(Object(S.a)({},this.state),{},{oneDataDefaultValue:null===o||void 0===o?void 0:o.properties,oneDataModalVisible:!0}));break;case"minio":this.setState(Object(S.a)(Object(S.a)({},this.state),{},{minioDefaultValue:null===o||void 0===o?void 0:o.properties,minioModalVisible:!0}))}}},{key:"removeStorageProvider",value:function(e,t){console.log("removing ".concat(e," ").concat(t)),console.log(this.state.storageProviders);var o=this.state.storageProviders.findIndex((function(o){return o.type===e&&o.properties.name===t})),n=Object(_.a)(this.state.storageProviders);n.splice(o,1),this.setState(Object(S.a)(Object(S.a)({},this.state),{},{storageProviders:n}))}},{key:"addOrUpdateStorageProvider",value:function(e,t){var o=this.state.storageProviders.findIndex((function(o){var n;return o.type===e&&t.name===(null===(n=o.properties)||void 0===n?void 0:n.name)}));console.log(o);var n=Object(_.a)(this.state.storageProviders);-1!==o&&n.splice(o,1);var a=[].concat(Object(_.a)(n),[{type:e,ports:{port1:{id:"port1",type:"top",properties:{path:""}},port2:{id:"port2",type:"right",properties:{path:""}},port3:{id:"port3",type:"bottom",properties:{path:""}},port4:{id:"port4",type:"left",properties:{path:""}}},properties:t}]);this.setState(Object(S.a)(Object(S.a)({},this.state),{},{storageProviders:a,s3ModalVisible:!1,oneDataModalVisible:!1,minioModalVisible:!1}))}},{key:"render",value:function(){var e=this,t=this.state,o=Object(J.mapValues)(Object(S.a)(Object(S.a)({},Q.actions),{},{onNodeDoubleClick:function(){return Object(S.a)(Object(S.a)({},e.state),{},{selected:{}})}}),(function(t){return function(){e.setState(t.apply(void 0,arguments))}}));return Object(q.jsx)("div",{className:"App",children:Object(q.jsxs)(se.a,{className:"layout",children:[Object(q.jsx)(Me,{defaultValue:this.state.s3DefaultValue,removeStorageProvider:this.removeStorageProvider,visible:this.state.s3ModalVisible,onCancel:function(){return e.setState(Object(S.a)(Object(S.a)({},e.state),{},{s3DefaultValue:void 0,s3ModalVisible:!1}))},onOk:function(t){e.addOrUpdateStorageProvider("s3",t)}}),Object(q.jsx)(_e,{defaultValue:this.state.oneDataDefaultValue,removeStorageProvider:this.removeStorageProvider,visible:this.state.oneDataModalVisible,onCancel:function(){return e.setState(Object(S.a)(Object(S.a)({},e.state),{},{oneDataDefaultValue:void 0,oneDataModalVisible:!1}))},onOk:function(t){e.addOrUpdateStorageProvider("onedata",t)}}),Object(q.jsx)(Ve,{defaultValue:this.state.minioDefaultValue,removeStorageProvider:this.removeStorageProvider,visible:this.state.minioModalVisible,onCancel:function(){return e.setState(Object(S.a)(Object(S.a)({},e.state),{},{minioDefaultValue:void 0,minioModalVisible:!1}))},onOk:function(t){e.addOrUpdateStorageProvider("minio",t)}}),Object(q.jsx)(Ee,{children:Object(q.jsxs)(ue.a,{theme:"dark",mode:"horizontal",children:[Object(q.jsx)(Ae,{ghost:!0,icon:Object(q.jsx)(le.a,{}),onClick:function(){return e.exportState()},children:"Download state"}),Object(q.jsx)(Ae,{ghost:!0,icon:Object(q.jsx)(pe.a,{}),onClick:function(){return e.importState()},children:"Load state"}),Object(q.jsx)(Ae,{ghost:!0,icon:Object(q.jsx)(de.a,{}),onClick:function(){e.exportToYaml()},children:"Export yaml"}),Object(q.jsxs)(Fe,{icon:Object(q.jsx)(be.a,{}),title:"Storage providers",children:[Object(q.jsx)(ue.a.Item,{onClick:function(){e.setState(Object(S.a)(Object(S.a)({},e.state),{},{s3ModalVisible:!0}))},children:"New S3"},"storage:s3"),Object(q.jsx)(ue.a.Item,{onClick:function(){e.setState(Object(S.a)(Object(S.a)({},e.state),{},{minioModalVisible:!0}))},children:"New Minio"},"storage:minio"),Object(q.jsx)(ue.a.Item,{onClick:function(){e.setState(Object(S.a)(Object(S.a)({},e.state),{},{oneDataModalVisible:!0}))},children:"New One data"},"storage:onedata")]},"SubMenu")]})}),Object(q.jsxs)(L,{children:[Object(q.jsx)(Q.FlowChart,{chart:t,callbacks:o,Components:{NodeInner:we,Port:ie}}),Object(q.jsx)(W,{removeStorageProvider:this.removeStorageProvider,editStorageProvider:this.editStorageProvider,storageProviders:this.state.storageProviders})]})]})})}}]),o}(C.a.Component),Je=function(e){e&&e instanceof Function&&o.e(3).then(o.bind(null,352)).then((function(t){var o=t.getCLS,n=t.getFID,a=t.getFCP,r=t.getLCP,i=t.getTTFB;o(e),n(e),a(e),r(e),i(e)}))};M.a.render(Object(q.jsx)(Be,{}),document.getElementById("root")),Je()}},[[332,1,2]]]);
//# sourceMappingURL=main.bc8273b5.chunk.js.map