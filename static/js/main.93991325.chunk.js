(this["webpackJsonpworkflow-builder"]=this["webpackJsonpworkflow-builder"]||[]).push([[0],{182:function(e,t,o){},183:function(e,t,o){},332:function(e,t,o){"use strict";o.r(t);var n,a,r,i,c,s,u,l,p,d,b,j,f,O,v,g,h,m,x,P,y,k,w=o(0),C=o.n(w),D=o(25),M=o.n(D),_=(o(182),o(119)),S=o(2),I=o(71),V=o.n(I),K=o(98),U=o(161),N=o(162),E=o(80),F=o(176),A=o(172),T=o(19),B=(o(183),o(99)),J=o(15),z=(J.default.pre(n||(n=Object(T.a)(["\n  margin: 10px;\n  padding: 10px;\n  line-height: 1.4em;\n  white-space: pre-wrap;\n  font-family: Consolas, 'Andale Mono WT', 'Andale Mono', 'Lucida Console', 'Lucida Sans Typewriter', 'DejaVu Sans Mono',\n    'Bitstream Vera Sans Mono', 'Liberation Mono', 'Nimbus Mono L', Monaco, 'Courier New', Courier, monospace;\n\n  background-color: #eff0f1;\n  overflow: auto;\n"]))),J.default.div(a||(a=Object(T.a)(["\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  overflow: hidden;\n"]))),J.default.div(r||(r=Object(T.a)(["\n  margin: 10px 10px 0px;\n  padding: 10px;\n  line-height: 1.4em;\n"])))),R=o(1),q=(Object(J.createGlobalStyle)(i||(i=Object(T.a)(["\n  body {\n    margin: 0px;\n    max-width: 100vw;\n    max-height: 100vh;\n    overflow: hidden;\n    box-sizing: border-box;\n    font-family: sans-serif;\n  }\n\n  *, :after, :before {\n    box-sizing: inherit;\n  }\n"]))),J.default.div(c||(c=Object(T.a)(["\n  display: flex;\n  flex-direction: row;\n  flex: 1;\n  max-width: 100vw;\n  max-height: 93vh;\n"])))),L=o(344),Y=o(53),H=J.default.div(s||(s=Object(T.a)(["\n  width: 200px;\n  background: white;\n  display: flex;\n  flex-direction: column;\n  flex-shrink: 0;\n  overflow: auto;\n"]))),W=function(e){var t=e.storageProviders,o=e.removeStorageProvider,n=e.editStorageProvider;return Object(R.jsxs)(H,{children:[Object(R.jsx)(z,{children:"Drag and drop these items onto the canvas."}),null===t||void 0===t?void 0:t.filter((function(e){var t;return null===(t=e.properties)||void 0===t?void 0:t.name})).map((function(e,t){return Object(R.jsx)(L.a,{placement:"top",title:"Delete provider ".concat(e.properties.name),content:Object(R.jsx)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center"},children:Object(R.jsxs)("div",{style:{display:"flex",flexDirection:"column",rowGap:"1rem"},children:[Object(R.jsx)(Y.a,{onClick:function(){return n(e.type,e.properties.name)},children:"Edit"}),Object(R.jsx)(Y.a,{danger:!0,onClick:function(){return o(e.type,e.properties.name)},children:"Delete"})]})}),children:Object(R.jsx)(oe,Object(S.a)(Object(S.a)({},e),{},{onDoubleClick:function(e){e.stopPropagation()}}))},"Popover_".concat(t))})),Object(R.jsx)(oe,{type:"oscar-fx",ports:{port1:{id:"port1",type:"top",properties:{path:""}},port2:{id:"port2",type:"right",properties:{path:""}},port3:{id:"port3",type:"bottom",properties:{path:""}},port4:{id:"port4",type:"left",properties:{path:""}}}}),Object(R.jsx)(oe,{type:"aws-fx",ports:{port1:{id:"port1",type:"top",properties:{path:""}},port2:{id:"port2",type:"right",properties:{path:""}},port3:{id:"port3",type:"bottom",properties:{path:""}},port4:{id:"port4",type:"left",properties:{path:""}}}})]})},G=o(113),Q=o(35),X=J.default.div(u||(u=Object(T.a)(["\n  min-height: 100px;\n\n  margin-bottom: 1rem;\n  border: 0.5px solid grey;\n\n  padding: 20px 30px;\n  font-size: 14px;\n  background: black;\n  cursor: move;\n  ","\n\n  ",";\n"])),(function(e){return e.color&&Object(J.css)(l||(l=Object(T.a)(["\n      color: ",";\n    "])),e.color)}),(function(e){return e.background&&Object(J.css)(p||(p=Object(T.a)(["\n      background: url(",") no-repeat;\n      background-size: 96px;\n      background-position: center;\n    "])),e.background)})),Z=function(e){switch(e){case"oscar-fx":return{background:"#fff",color:"black"};case"aws-fx":return{background:"#080301",color:"white"};case"s3":return{background:"#ebe4c0",color:"black"};case"onedata":return{background:"#c2d4ad",color:"black"};case"minio":return{background:"#c47878",color:"black"};default:return{background:"#FFF",color:"black"}}},$=J.default.div(d||(d=Object(T.a)(["\n  font-weight: 700;\n  font-size: 2rem;\n  min-height: 100px;\n  margin-bottom: 1rem;\n  border: 0.5px solid grey;\n  padding: 30px;\n  min-height: 100px;\n  border-radius: 50%;\n  cursor: move;\n  ","\n  ",";\n"])),(function(e){return e.color&&Object(J.css)(b||(b=Object(T.a)(["\n      color: ",";\n    "])),e.color)}),(function(e){return e.background&&Object(J.css)(j||(j=Object(T.a)(["\n      background: url(",") no-repeat;\n      background-size: 96px;\n      background-position: center;\n    "])),e.background)})),ee=function(e){switch(e){case"oscar-fx":return Object(R.jsx)("img",{alt:"oscar logo",src:"https://github.com/grycap/oscar/blob/master/docs/images/oscar3.png?raw=true",width:"96px"});case"aws-fx":return Object(R.jsx)("img",{alt:"aws logo",src:"https://d1.awsstatic.com/Digital%20Marketing/House/PAC/2up/PAC-Q4_House-Ads_Lambda_2up.62dc7e19b7b2e0a2c06821594c31f1ce00a6bdda.png",height:"32px"});case"s3":return Object(R.jsx)("img",{alt:"s3 logo",src:"https://servmask.com/img/products/s3.png",height:"48px"});case"onedata":return Object(R.jsx)("img",{alt:"aws logo",src:"https://www.ebi.ac.uk/about/technology/wp-content/uploads/2019/10/onedata-logo.png",height:"24px"});case"minio":return Object(R.jsx)("img",{alt:"aws logo",src:"https://suarapapua.com/wp-content/plugins/ilab-media-tools-premium/public/img/wizard-icon-minio.png",height:"36px"})}},te=function(e){switch(e){case"oscar-fx":return"https://github.com/grycap/oscar/blob/master/docs/images/oscar3.png?raw=true";case"aws-fx":return"https://d1.awsstatic.com/Digital%20Marketing/House/PAC/2up/PAC-Q4_House-Ads_Lambda_2up.62dc7e19b7b2e0a2c06821594c31f1ce00a6bdda.png";case"s3":return"https://servmask.com/img/products/s3.png";case"onedata":return"https://www.ebi.ac.uk/about/technology/wp-content/uploads/2019/10/onedata-logo.png";case"minio":return"https://suarapapua.com/wp-content/plugins/ilab-media-tools-premium/public/img/wizard-icon-minio.png"}},oe=function(e){var t=e.type,o=e.ports,n=e.properties,a=Object(G.a)(e,["type","ports","properties"]),r=Z(t);return["s3","onedata","minio"].includes(t)?Object(R.jsx)($,Object(S.a)(Object(S.a)({background:te(t),color:r.color,draggable:!0,onDragStart:function(e){e.dataTransfer.setData(Q.REACT_FLOW_CHART,JSON.stringify({type:t,ports:o,properties:n}))}},a),{},{children:null===n||void 0===n?void 0:n.name})):Object(R.jsx)(X,{background:te(t),color:r.color,draggable:!0,onDragStart:function(e){e.dataTransfer.setData(Q.REACT_FLOW_CHART,JSON.stringify({type:t,ports:o,properties:n}))}})},ne=o(345),ae=o(346),re=o(347),ie=function(e){switch(e.port.type){case"right":case"left":return Object(R.jsx)(ne.a,{style:{fontSize:"1rem"}});case"top":case"bottom":return Object(R.jsx)(ae.a,{style:{fontSize:"1rem"}});default:return Object(R.jsx)(re.a,{style:{fontSize:"1rem"}})}},ce={offset:{x:0,y:0},scale:1,nodes:{},links:{},selected:{},hovered:{},modalVisible:!1,storageProviders:[],s3ModalVisible:!1,oneDataModalVisible:!1,minioModalVisible:!1,s3DefaultValue:void 0,oneDataDefaultValue:void 0,minioDefaultValue:void 0},se=o(337),ue=o(343),le=o(349),pe=o(348),de=o(350),be=o(351),je=o(108),fe=o(42),Oe=o(341),ve=o(334),ge=o(338),he=o(342),me=J.default.div(f||(f=Object(T.a)(["\n  padding: 30px;\n  ","\n  ",";\n"])),(function(e){return e.color&&Object(J.css)(O||(O=Object(T.a)(["\n      color: ",";\n    "])),e.color)}),(function(e){return e.background&&Object(J.css)(v||(v=Object(T.a)(["\n      background: ",";\n    "])),e.background)})),xe=J.default.div(g||(g=Object(T.a)(["\n  padding: 30px;\n  border-radius: 50%;\n  ","\n  ",";\n"])),(function(e){return e.color&&Object(J.css)(h||(h=Object(T.a)(["\n      color: ",";\n    "])),e.color)}),(function(e){return e.background&&Object(J.css)(m||(m=Object(T.a)(["\n      background: ",";\n    "])),e.background)})),Pe=J.default.input(x||(x=Object(T.a)(["\n  padding: 10px;\n  border: 1px solid cornflowerblue;\n  margin-bottom: 0.5rem;\n  width: 80%;\n"]))),ye=J.default.div(P||(P=Object(T.a)(["\n  display: flex;\n  flex-direction: row;\n"]))),ke=J.default.div(y||(y=Object(T.a)(["\n  width: 20%;\n  align-content: center;\n"]))),we=function(e){var t,o,n,a,r,i,c,s,u,l,p,d,b,j,f,O,v,g,h,m,x,P,y,k,w,D,M,_,I,U,N,E,F,A,T,B,J,z,q,L,H,W,Q,X,$,te,oe,ne,ae,re,ie,ce,se,ue,le,de,be,je,we,Ce,De=e.node,Me=(e.config,Object(G.a)(e,["node","config"])),_e=C.a.useState(!1),Se=Object(fe.a)(_e,2),Ie=Se[0],Ve=Se[1],Ke=C.a.useState(De.properties||{}),Ue=Object(fe.a)(Ke,2),Ne=Ue[0],Ee=Ue[1],Fe=Z(De.type);switch(De.type){case"s3":case"onedata":case"minio":return Object(R.jsxs)(xe,Object(S.a)(Object(S.a)({},Me),{},{color:Fe.color,background:Fe.background,onDoubleClick:function(e){return Ve(!0)},children:[Object(R.jsx)(Oe.a,{title:(null===(t=De.properties)||void 0===t?void 0:t.name)||De.type,visible:Ie,onOk:function(){De.properties=Ne,Ve(!1)},onCancel:function(){return Ve(!1)},okButtonProps:{disabled:!1},cancelButtonProps:{disabled:!1},children:Object(R.jsxs)(ye,{children:[Object(R.jsx)(ke,{children:"Path:"}),Object(R.jsx)(Pe,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"darknet-workflow/output",value:Ne.path,onChange:function(e){Ee(Object(S.a)(Object(S.a)({},Ne),{},{path:e.target.value}))}})]})}),Object(R.jsx)("div",{children:ee(De.type)}),Object(R.jsx)("div",{style:{fontSize:"1.5rem",fontWeight:700},children:"".concat((null===(o=De.properties)||void 0===o?void 0:o.name)||"")})]}));case"oscar-fx":return Object(R.jsxs)(me,{color:Fe.color,background:Fe.background,onDoubleClick:function(){return Ve(!0)},children:[Object(R.jsxs)(Oe.a,{title:(null===(n=De.properties)||void 0===n?void 0:n.name)||De.type,visible:Ie,onOk:function(){De.properties=Ne,Ve(!1)},onCancel:function(){return Ve(!1)},okButtonProps:{disabled:!1},cancelButtonProps:{disabled:!1},children:[Object(R.jsx)(ve.a,{children:"Setup"}),Object(R.jsxs)(ye,{children:[Object(R.jsx)(ke,{children:"Name:"}),Object(R.jsx)(Pe,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"darknet",value:Ne.name,onChange:function(e){Ee(Object(S.a)(Object(S.a)({},Ne),{},{name:e.target.value}))}})]}),Object(R.jsxs)(ye,{children:[Object(R.jsx)(ke,{children:"Memory:"}),Object(R.jsx)(Pe,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"1Gi",value:Ne.memory,onChange:function(e){Ee(Object(S.a)(Object(S.a)({},Ne),{},{memory:e.target.value}))}})]}),Object(R.jsxs)(ye,{children:[Object(R.jsx)(ke,{children:"Cpu:"}),Object(R.jsx)(Pe,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"1.0",value:Ne.cpu,onChange:function(e){Ee(Object(S.a)(Object(S.a)({},Ne),{},{cpu:e.target.value}))}})]}),Object(R.jsxs)(ye,{children:[Object(R.jsx)(ke,{children:"Image:"}),Object(R.jsx)(Pe,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"grycap/darknet",value:Ne.image,onChange:function(e){Ee(Object(S.a)(Object(S.a)({},Ne),{},{image:e.target.value}))}})]}),Object(R.jsxs)(ye,{children:[Object(R.jsx)(ke,{children:"Script:"}),Object(R.jsx)(Pe,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},disabled:!0,value:Ne.script}),Object(R.jsx)(Y.a,{icon:Object(R.jsx)(pe.a,{}),onClick:function(){return function(){var e=document.createElement("input");e.type="file",e.accept=".json",e.onchange=function(t){console.log(t.target.files[0].name);var o=t.target.files[0].name,n=new FileReader;n.onload=function(){var e=Object(K.a)(V.a.mark((function e(t){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ee(Object(S.a)(Object(S.a)({},Ne),{},{script_value:t.target.result,script:o}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.readAsText(e.files[0])},e.click()}()}})]}),Object(R.jsxs)(ye,{children:[Object(R.jsx)(ke,{children:"Environment variables"}),Object(R.jsx)(Pe,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"KEY1=val1, KEY2=val2...",value:null===(a=Ne.environment)||void 0===a?void 0:a.Variables,onChange:function(e){var t=e.target.value;Ee(Object(S.a)(Object(S.a)({},Ne),{},{environment:Object(S.a)(Object(S.a)({},Ne.environment),{},{Variables:e.target.value})})),!t&&delete Ne.environment}})]}),Object(R.jsx)(ve.a,{children:"Input"}),Object(R.jsxs)(ye,{children:[Object(R.jsx)(ke,{children:"Suffix"}),Object(R.jsx)(Pe,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"png, jpg, xls",value:null===(r=Ne.input)||void 0===r?void 0:r.suffix,onChange:function(e){e.target.value?Ee(Object(S.a)(Object(S.a)({},Ne),{},{input:Object(S.a)(Object(S.a)({},Ne.input),{},{suffix:e.target.value})})):delete Ne.suffix}})]}),Object(R.jsxs)(ye,{children:[Object(R.jsx)(ke,{children:"Prefix"}),Object(R.jsx)(Pe,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"result-, demo-",value:null===(i=Ne.input)||void 0===i?void 0:i.prefix,onChange:function(e){e.target.value?Ee(Object(S.a)(Object(S.a)({},Ne),{},{input:Object(S.a)(Object(S.a)({},Ne.input),{},{prefix:e.target.value})})):delete Ne.prefix}})]}),Object(R.jsx)(ve.a,{children:"Output"}),Object(R.jsxs)(ye,{children:[Object(R.jsx)(ke,{children:"Suffix"}),Object(R.jsx)(Pe,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"png, jpg, xls",value:null===(c=Ne.output)||void 0===c?void 0:c.suffix,onChange:function(e){e.target.value?Ee(Object(S.a)(Object(S.a)({},Ne),{},{output:Object(S.a)(Object(S.a)({},Ne.output),{},{suffix:e.target.value})})):delete Ne.suffix}})]}),Object(R.jsxs)(ye,{children:[Object(R.jsx)(ke,{children:"Prefix"}),Object(R.jsx)(Pe,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"result-, demo-",value:null===(s=Ne.output)||void 0===s?void 0:s.prefix,onChange:function(e){e.target.value?Ee(Object(S.a)(Object(S.a)({},Ne),{},{output:Object(S.a)(Object(S.a)({},Ne.output),{},{prefix:e.target.value})})):delete Ne.prefix}})]})]}),Object(R.jsx)("div",{children:ee(De.type)}),Object(R.jsx)("div",{style:{fontSize:"1.5rem",fontWeight:700},children:"".concat((null===(u=De.properties)||void 0===u?void 0:u.name)||"")})]});case"aws-fx":return Object(R.jsxs)(me,{color:Fe.color,background:Fe.background,onDoubleClick:function(){return Ve(!0)},children:[Object(R.jsx)(Oe.a,{title:(null===(l=De.properties)||void 0===l?void 0:l.name)||De.type,visible:Ie,onOk:function(){De.properties=Ne,Ve(!1)},onCancel:function(){return Ve(!1)},okButtonProps:{disabled:!1},cancelButtonProps:{disabled:!1},children:Object(R.jsxs)(ge.a,{defaultActiveKey:"1",children:[Object(R.jsxs)(ge.a.TabPane,{tab:"Lambda",children:[Object(R.jsx)(ve.a,{children:"Setup"}),Object(R.jsxs)(ye,{children:[Object(R.jsx)(ke,{children:"Name:"}),Object(R.jsx)(Pe,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"darknet",value:null===(p=Ne.lambda)||void 0===p?void 0:p.name,onChange:function(e){Ee(Object(S.a)(Object(S.a)({},Ne),{},{lambda:Object(S.a)(Object(S.a)({},Ne.lambda),{},{name:e.target.value})}))}})]}),Object(R.jsxs)(ye,{children:[Object(R.jsx)(ke,{children:"Region:"}),Object(R.jsx)(Pe,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"us-east-1",value:null===(d=Ne.lambda)||void 0===d?void 0:d.region,onChange:function(e){Ee(Object(S.a)(Object(S.a)({},Ne),{},{lambda:Object(S.a)(Object(S.a)({},Ne.lambda),{},{region:e.target.value})}))}})]}),Object(R.jsxs)(ye,{children:[Object(R.jsx)(ke,{children:"Boto profile:"}),Object(R.jsx)(Pe,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"default",value:null===(b=Ne.lambda)||void 0===b?void 0:b.boto_profile,onChange:function(e){Ee(Object(S.a)(Object(S.a)({},Ne),{},{lambda:Object(S.a)(Object(S.a)({},Ne.lambda),{},{boto_profile:e.target.value})}))}})]}),Object(R.jsxs)(ye,{children:[Object(R.jsx)(ke,{children:"Memory:"}),Object(R.jsx)(Pe,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"1024",value:null===(j=Ne.lambda)||void 0===j?void 0:j.memory,onChange:function(e){Ee(Object(S.a)(Object(S.a)({},Ne),{},{lambda:Object(S.a)(Object(S.a)({},Ne.lambda),{},{memory:e.target.value})}))}})]}),Object(R.jsxs)(ye,{children:[Object(R.jsx)(ke,{children:"Cpu:"}),Object(R.jsx)(Pe,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"1.0",value:null===(f=Ne.lambda)||void 0===f?void 0:f.cpu,onChange:function(e){Ee(Object(S.a)(Object(S.a)({},Ne),{},{lambda:Object(S.a)(Object(S.a)({},Ne.lambda),{},{cpu:e.target.value})}))}})]}),Object(R.jsxs)(ye,{children:[Object(R.jsx)(ke,{children:"Init script:"}),Object(R.jsx)(Pe,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"yolo.sh",value:null===(O=Ne.lambda)||void 0===O?void 0:O.init_script,onChange:function(e){Ee(Object(S.a)(Object(S.a)({},Ne),{},{lambda:Object(S.a)(Object(S.a)({},Ne.lambda),{},{init_script:e.target.value})}))}})]}),Object(R.jsxs)(ye,{children:[Object(R.jsx)(ke,{children:"Timeout:"}),Object(R.jsx)(Pe,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"300",value:null===(v=Ne.lambda)||void 0===v?void 0:v.timeout,onChange:function(e){Ee(Object(S.a)(Object(S.a)({},Ne),{},{lambda:Object(S.a)(Object(S.a)({},Ne.lambda),{},{timeout:e.target.value})}))}})]}),Object(R.jsxs)(ye,{children:[Object(R.jsx)(ke,{children:"Log level:"}),Object(R.jsx)(Pe,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"INFO | DEBUG | ERROR | WARNING",value:null===(g=Ne.lambda)||void 0===g?void 0:g.log_level,onChange:function(e){Ee(Object(S.a)(Object(S.a)({},Ne),{},{lambda:Object(S.a)(Object(S.a)({},Ne.lambda),{},{log_level:e.target.value})}))}})]}),Object(R.jsxs)(ye,{children:[Object(R.jsx)(ke,{children:"Execution mode:"}),Object(R.jsx)(Pe,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"lambda | lambda-batch | batch",value:null===(h=Ne.lambda)||void 0===h?void 0:h.execution_mode,onChange:function(e){Ee(Object(S.a)(Object(S.a)({},Ne),{},{lambda:Object(S.a)(Object(S.a)({},Ne.lambda),{},{execution_mode:e.target.value})}))}})]}),Object(R.jsxs)(ye,{children:[Object(R.jsx)(ke,{children:"Environment variables"}),Object(R.jsx)(Pe,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"KEY1=val1, KEY2=val2...",value:null===(m=Ne.lambda)||void 0===m||null===(x=m.environment)||void 0===x?void 0:x.Variables,onChange:function(e){var t,o=e.target.value;Ee(Object(S.a)(Object(S.a)({},Ne),{},{lambda:Object(S.a)(Object(S.a)({},Ne.lambda),{},{environment:Object(S.a)(Object(S.a)({},null===(t=Ne.lambda)||void 0===t?void 0:t.environment),{},{Variables:e.target.value})})})),o&&delete Ne.lambda.environment}})]}),Object(R.jsx)(ve.a,{children:"Container"}),Object(R.jsxs)(ye,{children:[Object(R.jsx)(ke,{children:"Image:"}),Object(R.jsx)(Pe,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"grycap/darknet",value:null===(P=Ne.lambda)||void 0===P||null===(y=P.container)||void 0===y?void 0:y.image,onChange:function(e){var t;Ee(Object(S.a)(Object(S.a)({},Ne),{},{lambda:Object(S.a)(Object(S.a)({},Ne.lambda),{},{container:Object(S.a)(Object(S.a)({},null===(t=Ne.lambda)||void 0===t?void 0:t.container),{},{image:e.target.value})})}))}})]}),Object(R.jsxs)(ye,{children:[Object(R.jsx)(ke,{children:"Timeout threshold"}),Object(R.jsx)(Pe,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"grycap/darknet",value:null===(k=Ne.lambda)||void 0===k||null===(w=k.container)||void 0===w?void 0:w.timeout_threshold,onChange:function(e){var t;Ee(Object(S.a)(Object(S.a)({},Ne),{},{lambda:Object(S.a)(Object(S.a)({},Ne.lambda),{},{container:Object(S.a)(Object(S.a)({},null===(t=Ne.lambda)||void 0===t?void 0:t.container),{},{timeout_threshold:e.target.value})})}))}})]}),Object(R.jsxs)(ye,{children:[Object(R.jsx)(ke,{children:"Environment variables"}),Object(R.jsx)(Pe,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"KEY1=val1, KEY2=val2...",value:null===(D=Ne.lambda)||void 0===D||null===(M=D.container)||void 0===M||null===(_=M.environment)||void 0===_?void 0:_.Variables,onChange:function(e){var t,o,n=e.target.value;Ee(Object(S.a)(Object(S.a)({},Ne),{},{lambda:Object(S.a)(Object(S.a)({},Ne.lambda),{},{container:Object(S.a)(Object(S.a)({},null===(t=Ne.lambda)||void 0===t?void 0:t.container),{},{environment:Object(S.a)(Object(S.a)({},null===(o=Ne.lambda)||void 0===o?void 0:o.container.environment),{},{Variables:e.target.value})})})})),!n&&delete Ne.lambda.container.environment}})]}),Object(R.jsx)(ve.a,{children:"Input"}),Object(R.jsxs)(ye,{children:[Object(R.jsx)(ke,{children:"Suffix"}),Object(R.jsx)(Pe,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"png, jpg, xls",value:null===(I=Ne.lambda)||void 0===I||null===(U=I.input)||void 0===U?void 0:U.suffix,onChange:function(e){var t;e.target.value?Ee(Object(S.a)(Object(S.a)({},Ne),{},{lambda:Object(S.a)(Object(S.a)({},Ne.lambda),{},{input:Object(S.a)(Object(S.a)({},null===(t=Ne.lambda)||void 0===t?void 0:t.input),{},{suffix:e.target.value})})})):delete Ne.lambda.input.suffix}})]}),Object(R.jsxs)(ye,{children:[Object(R.jsx)(ke,{children:"Prefix"}),Object(R.jsx)(Pe,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"result-, demo-",value:null===(N=Ne.lambda)||void 0===N||null===(E=N.input)||void 0===E?void 0:E.prefix,onChange:function(e){var t;e.target.value?Ee(Object(S.a)(Object(S.a)({},Ne),{},{lambda:Object(S.a)(Object(S.a)({},Ne.lambda),{},{input:Object(S.a)(Object(S.a)({},null===(t=Ne.lambda)||void 0===t?void 0:t.input),{},{prefix:e.target.value})})})):delete Ne.lambda.input.prefix}})]}),Object(R.jsx)(ve.a,{children:"Output"}),Object(R.jsxs)(ye,{children:[Object(R.jsx)(ke,{children:"Suffix"}),Object(R.jsx)(Pe,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"png, jpg, xls",value:null===(F=Ne.lambda)||void 0===F||null===(A=F.output)||void 0===A?void 0:A.suffix,onChange:function(e){var t;e.target.value?Ee(Object(S.a)(Object(S.a)({},Ne),{},{lambda:Object(S.a)(Object(S.a)({},Ne.lambda),{},{output:Object(S.a)(Object(S.a)({},null===(t=Ne.lambda)||void 0===t?void 0:t.input),{},{suffix:e.target.value})})})):delete Ne.lambda.output.suffix}})]}),Object(R.jsxs)(ye,{children:[Object(R.jsx)(ke,{children:"Prefix"}),Object(R.jsx)(Pe,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"result-, demo-",value:null===(T=Ne.lambda)||void 0===T||null===(B=T.output)||void 0===B?void 0:B.prefix,onChange:function(e){var t;e.target.value?Ee(Object(S.a)(Object(S.a)({},Ne),{},{lambda:Object(S.a)(Object(S.a)({},Ne.lambda),{},{output:Object(S.a)(Object(S.a)({},null===(t=Ne.lambda)||void 0===t?void 0:t.input),{},{prefix:e.target.value})})})):delete Ne.prefix}})]})]},"1"),Object(R.jsxs)(ge.a.TabPane,{tab:"Batch",children:[Object(R.jsx)(ve.a,{children:"Setup"}),Object(R.jsxs)(ye,{children:[Object(R.jsx)(ke,{children:"Region:"}),Object(R.jsx)(Pe,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"us-east-1",value:null===(J=Ne.batch)||void 0===J?void 0:J.region,onChange:function(e){Ee(Object(S.a)(Object(S.a)({},Ne),{},{batch:Object(S.a)(Object(S.a)({},Ne.batch),{},{region:e.target.value})}))}})]}),Object(R.jsxs)(ye,{children:[Object(R.jsx)(ke,{children:"Boto profile:"}),Object(R.jsx)(Pe,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"default",value:null===(z=Ne.batch)||void 0===z?void 0:z.boto_profile,onChange:function(e){Ee(Object(S.a)(Object(S.a)({},Ne),{},{batch:Object(S.a)(Object(S.a)({},Ne.batch),{},{boto_profile:e.target.value})}))}})]}),Object(R.jsxs)(ye,{children:[Object(R.jsx)(ke,{children:"Memory:"}),Object(R.jsx)(Pe,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"1024",value:null===(q=Ne.batch)||void 0===q?void 0:q.memory,onChange:function(e){Ee(Object(S.a)(Object(S.a)({},Ne),{},{batch:Object(S.a)(Object(S.a)({},Ne.batch),{},{memory:e.target.value})}))}})]}),Object(R.jsxs)(ye,{children:[Object(R.jsx)(ke,{children:"vCpu:"}),Object(R.jsx)(Pe,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"1.0",value:Ne.vcpus,onChange:function(e){Ee(Object(S.a)(Object(S.a)({},Ne),{},{batch:Object(S.a)(Object(S.a)({},Ne.batch),{},{cpu:e.target.value})}))}})]}),Object(R.jsxs)(ye,{children:[Object(R.jsx)(ke,{children:"Enable gpu:"}),Object(R.jsx)(he.a,{onClick:function(e){return e.stopPropagation()},value:Ne.enable_gpu,onChange:function(e){Ee(Object(S.a)(Object(S.a)({},Ne),{},{batch:Object(S.a)(Object(S.a)({},Ne.batch),{},{enable_gpu:e.target.checked})}))}})]}),Object(R.jsxs)(ye,{children:[Object(R.jsx)(ke,{children:"Service role:"}),Object(R.jsx)(Pe,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"aren:...",value:Ne.service_role,onChange:function(e){Ee(Object(S.a)(Object(S.a)({},Ne),{},{batch:Object(S.a)(Object(S.a)({},Ne.batch),{},{service_role:e.target.value})}))}})]}),Object(R.jsxs)(ye,{children:[Object(R.jsx)(ke,{children:"Environment variables"}),Object(R.jsx)(Pe,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"KEY1=val1, KEY2=val2...",value:null===(L=Ne.batch)||void 0===L||null===(H=L.environment)||void 0===H?void 0:H.Variables,onChange:function(e){var t,o=e.target.value;Ee(Object(S.a)(Object(S.a)({},Ne),{},{batch:Object(S.a)(Object(S.a)({},Ne.batch),{},{environment:Object(S.a)(Object(S.a)({},null===(t=Ne.batch)||void 0===t?void 0:t.environment),{},{Variables:e.target.value})})})),o&&delete Ne.batch.environment}})]}),Object(R.jsx)(ve.a,{children:"Compute resources"}),Object(R.jsxs)(ye,{children:[Object(R.jsx)(ke,{children:"Desired vCpus"}),Object(R.jsx)(Pe,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"0",value:null===(W=Ne.batch)||void 0===W||null===(Q=W.compute_resources)||void 0===Q?void 0:Q.desired_v_cpus,onChange:function(e){var t;Ee(Object(S.a)(Object(S.a)({},Ne),{},{batch:Object(S.a)(Object(S.a)({},Ne.batch),{},{compute_resources:Object(S.a)(Object(S.a)({},null===(t=Ne.batch)||void 0===t?void 0:t.compute_resources),{},{desired_v_cpus:e.target.value})})}))}})]}),Object(R.jsxs)(ye,{children:[Object(R.jsx)(ke,{children:"Min vCpus"}),Object(R.jsx)(Pe,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"0",value:null===(X=Ne.batch)||void 0===X||null===($=X.compute_resources)||void 0===$?void 0:$.min_v_cpus,onChange:function(e){var t;Ee(Object(S.a)(Object(S.a)({},Ne),{},{batch:Object(S.a)(Object(S.a)({},Ne.batch),{},{compute_resources:Object(S.a)(Object(S.a)({},null===(t=Ne.batch)||void 0===t?void 0:t.compute_resources),{},{min_v_cpus:e.target.value})})}))}})]}),Object(R.jsxs)(ye,{children:[Object(R.jsx)(ke,{children:"Max vCpus"}),Object(R.jsx)(Pe,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"2",value:null===(te=Ne.batch)||void 0===te||null===(oe=te.compute_resources)||void 0===oe?void 0:oe.max_v_cpus,onChange:function(e){var t;Ee(Object(S.a)(Object(S.a)({},Ne),{},{batch:Object(S.a)(Object(S.a)({},Ne.batch),{},{compute_resources:Object(S.a)(Object(S.a)({},null===(t=Ne.batch)||void 0===t?void 0:t.compute_resources),{},{max_v_cpus:e.target.value})})}))}})]}),Object(R.jsxs)(ye,{children:[Object(R.jsx)(ke,{children:"Max vCpus"}),Object(R.jsx)(Pe,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"2",value:null===(ne=Ne.batch)||void 0===ne||null===(ae=ne.compute_resources)||void 0===ae?void 0:ae.max_v_cpus,onChange:function(e){var t;Ee(Object(S.a)(Object(S.a)({},Ne),{},{batch:Object(S.a)(Object(S.a)({},Ne.batch),{},{compute_resources:Object(S.a)(Object(S.a)({},null===(t=Ne.batch)||void 0===t?void 0:t.compute_resources),{},{max_v_cpus:e.target.value})})}))}})]}),Object(R.jsxs)(ye,{children:[Object(R.jsx)(ke,{children:"Instance role"}),Object(R.jsx)(Pe,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"arn:...",value:null===(re=Ne.batch)||void 0===re||null===(ie=re.compute_resources)||void 0===ie?void 0:ie.instance_role,onChange:function(e){var t;Ee(Object(S.a)(Object(S.a)({},Ne),{},{batch:Object(S.a)(Object(S.a)({},Ne.batch),{},{compute_resources:Object(S.a)(Object(S.a)({},null===(t=Ne.batch)||void 0===t?void 0:t.compute_resources),{},{instance_role:e.target.value})})}))}})]}),Object(R.jsxs)(ye,{children:[Object(R.jsx)(ke,{children:"Security group ids"}),Object(R.jsx)(Pe,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"sg-12345678, sg-12345679...",value:null===(ce=Ne.batch)||void 0===ce||null===(se=ce.security_group_ids)||void 0===se?void 0:se.security_group_ids,onChange:function(e){var t;Ee(Object(S.a)(Object(S.a)({},Ne),{},{batch:Object(S.a)(Object(S.a)({},Ne.batch),{},{compute_resources:Object(S.a)(Object(S.a)({},null===(t=Ne.batch)||void 0===t?void 0:t.compute_resources),{},{security_group_ids:e.target.value})})}))}})]}),Object(R.jsxs)(ye,{children:[Object(R.jsx)(ke,{children:"Subnets"}),Object(R.jsx)(Pe,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"subnet-12345, subnet-67891...",value:null===(ue=Ne.batch)||void 0===ue||null===(le=ue.subnets)||void 0===le?void 0:le.subnets,onChange:function(e){var t;Ee(Object(S.a)(Object(S.a)({},Ne),{},{batch:Object(S.a)(Object(S.a)({},Ne.batch),{},{compute_resources:Object(S.a)(Object(S.a)({},null===(t=Ne.batch)||void 0===t?void 0:t.compute_resources),{},{subnets:e.target.value})})}))}})]}),Object(R.jsxs)(ye,{children:[Object(R.jsx)(ke,{children:"Instance types"}),Object(R.jsx)(Pe,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"m3.medium, m3.large...",value:null===(de=Ne.batch)||void 0===de||null===(be=de.subnets)||void 0===be?void 0:be.instance_types,onChange:function(e){var t;Ee(Object(S.a)(Object(S.a)({},Ne),{},{batch:Object(S.a)(Object(S.a)({},Ne.batch),{},{compute_resources:Object(S.a)(Object(S.a)({},null===(t=Ne.batch)||void 0===t?void 0:t.compute_resources),{},{instance_types:e.target.value})})}))}})]})]},"2")]})}),Object(R.jsx)("div",{children:ee(De.type)}),Object(R.jsx)("div",{style:{fontSize:"1.5rem",fontWeight:700},children:"".concat((null===(je=De.properties)||void 0===je?void 0:je.lambda.name)||"")})]});default:return Object(R.jsxs)(me,{color:Fe.color,background:Fe.background,onDoubleClick:function(){Ve(!0)},children:[Object(R.jsx)(Oe.a,{title:(null===(we=De.properties)||void 0===we?void 0:we.name)||De.type,visible:Ie,onOk:function(){De.properties=Ne,Ve(!1)},onCancel:function(){return Ve(!1)},okButtonProps:{disabled:!1},cancelButtonProps:{disabled:!1}}),Object(R.jsx)("div",{children:ee(De.type)}),Object(R.jsx)("div",{style:{fontSize:"1.5rem",fontWeight:700},children:"".concat((null===(Ce=De.properties)||void 0===Ce?void 0:Ce.name)||"")})]})}},Ce=o(339),De=o(340),Me=function(e){var t=e.visible,o=e.onOk,n=e.onCancel,a=e.defaultValue,r=e.removeStorageProvider,i=Ce.a.useForm(),c=Object(fe.a)(i,1)[0];return Object(w.useEffect)((function(){a&&c.setFieldsValue(a)}),[a,t,c]),Object(R.jsx)(Oe.a,{title:"S3 Storage Provider ".concat((null===a||void 0===a?void 0:a.name)||""),visible:t,onCancel:function(){n(),c.resetFields()},onOk:function(){c.validateFields().then((function(e){a&&r&&e.name!==a.name&&r("s3",a.name),o(e),c.resetFields()})).catch((function(e){return console.log("Error",e)}))},children:Object(R.jsxs)(Ce.a,{form:c,initialValues:a,name:"Form s3 modal",children:[Object(R.jsx)(Ce.a.Item,{name:"name",label:"Name",rules:[{required:!0,message:"Please input the name of the storage provider"}],children:Object(R.jsx)(De.a,{})}),Object(R.jsx)(Ce.a.Item,{name:"region",label:"Region",rules:[{required:!0,message:"Please input the region of the storage provider"}],children:Object(R.jsx)(De.a,{})}),Object(R.jsx)(Ce.a.Item,{name:"access_key",label:"Access Key",rules:[{required:!0,message:"Please input the access key of the storage provider"}],children:Object(R.jsx)(De.a,{})}),Object(R.jsx)(Ce.a.Item,{name:"secret_key",label:"Secret Key",rules:[{required:!0,message:"Please input the secret key of the storage provider"}],children:Object(R.jsx)(De.a,{})})]})})},_e=function(e){var t=e.visible,o=e.onOk,n=e.onCancel,a=e.defaultValue,r=e.removeStorageProvider,i=Ce.a.useForm(),c=Object(fe.a)(i,1)[0];return Object(w.useEffect)((function(){a&&c.setFieldsValue(a)}),[a,t,c]),Object(R.jsx)(Oe.a,{title:"OneData Storage Provider ".concat((null===a||void 0===a?void 0:a.name)||""),visible:t,onCancel:function(){n(),c.resetFields()},onOk:function(){c.validateFields().then((function(e){a&&r&&e.name!==a.name&&r("onedata",a.name),o(e),c.resetFields()})).catch((function(e){return console.log("Error",e)}))},children:Object(R.jsxs)(Ce.a,{form:c,initialValues:a,name:"Form s3 modal",children:[Object(R.jsx)(Ce.a.Item,{name:"name",label:"Name",rules:[{required:!0,message:"Please input the name of the storage provider"}],children:Object(R.jsx)(De.a,{})}),Object(R.jsx)(Ce.a.Item,{name:"oneprovider_host",label:"One Provider Host",rules:[{required:!0,message:"Please input the One Provider Host of the storage provider"}],children:Object(R.jsx)(De.a,{})}),Object(R.jsx)(Ce.a.Item,{name:"token",label:"Token",rules:[{required:!0,message:"Please input the token of the storage provider"}],children:Object(R.jsx)(De.a,{})}),Object(R.jsx)(Ce.a.Item,{name:"space",label:"Space",rules:[{required:!0,message:"Please input the space of the storage provider"}],children:Object(R.jsx)(De.a,{})})]})})},Se=o(335),Ie=o(336),Ve=function(e){var t=e.visible,o=e.onOk,n=e.onCancel,a=e.defaultValue,r=e.removeStorageProvider,i=Ce.a.useForm(),c=Object(fe.a)(i,1)[0],s=Object(w.useState)(!1),u=Object(fe.a)(s,2),l=u[0],p=u[1];Object(w.useEffect)((function(){a&&c.setFieldsValue(a)}),[a,t,c]),Object(w.useEffect)((function(){a&&p(a.verify)}),[a]);return Object(R.jsx)(Oe.a,{title:"MinIO Storage Provider ".concat((null===a||void 0===a?void 0:a.name)||""),visible:t,onCancel:function(){n(),c.resetFields(),p(!1)},onOk:function(){c.validateFields().then((function(e){var t=Object(S.a)(Object(S.a)({},e),{},{verify:l});a&&r&&t.name!==a.name&&r("minio",a.name),o(t),c.resetFields(),p(!1)})).catch((function(e){return console.log("Error",e)}))},children:Object(R.jsxs)(Ce.a,{form:c,initialValues:a,name:"Form minio modal",children:[Object(R.jsx)(Ce.a.Item,{name:"name",label:"Name",rules:[{required:!0,message:"Please input the name of the storage provider"}],children:Object(R.jsx)(De.a,{})}),Object(R.jsx)(Ce.a.Item,{name:"endpoint",label:"Endpoint",rules:[{required:!0,message:"Please input the endpoint of the storage provider"}],children:Object(R.jsx)(De.a,{})}),Object(R.jsxs)(Se.a,{style:{marginBottom:"1rem"},children:[Object(R.jsx)(Ie.a,{span:3,children:"Verify:"}),Object(R.jsx)(Ie.a,{span:1,children:Object(R.jsx)(he.a,{value:l,onChange:function(e){p(e.target.checked)}})})]}),Object(R.jsx)(Ce.a.Item,{name:"region",label:"Region",rules:[{required:!0,message:"Please input the region of the storage provider"}],children:Object(R.jsx)(De.a,{})}),Object(R.jsx)(Ce.a.Item,{name:"access_key",label:"Access Key",rules:[{required:!0,message:"Please input the access key of the storage provider"}],children:Object(R.jsx)(De.a,{})}),Object(R.jsx)(Ce.a.Item,{name:"secret_key",label:"Secret Key",rules:[{required:!0,message:"Please input the secret key of the storage provider"}],children:Object(R.jsx)(De.a,{})})]})})},Ke=o(44),Ue=o(170),Ne=o.n(Ue),Ee=se.a.Header,Fe=ue.a.SubMenu,Ae=Object(J.default)(Y.a)(k||(k=Object(T.a)(["\n  margin-right: 1rem;\n"]))),Te=function(e){Object(F.a)(o,e);var t=Object(A.a)(o);function o(e){var n;return Object(U.a)(this,o),(n=t.call(this,e)).state=Object(B.cloneDeep)(ce),n.removeStorageProvider=n.removeStorageProvider.bind(Object(E.a)(n)),n.editStorageProvider=n.editStorageProvider.bind(Object(E.a)(n)),n}return Object(N.a)(o,[{key:"exportToYaml",value:function(){!function(e,t){var o=e.filter((function(e){return"s3"===e.type||"onedata"===e.type||"minio"===e.type})),n=e.filter((function(e){return"oscar-fx"===e.type})).map((function(e){var n=t.filter((function(t){return t.to.nodeId===e.id&&("port1"===t.to.portId||"port4"===t.to.portId)||t.from.nodeId===e.id&&("port1"===t.from.portId||"port4"===t.from.portId)})),a=t.filter((function(t){return t.to.nodeId===e.id&&("port2"===t.to.portId||"port3"===t.to.portId)||t.from.nodeId===e.id&&("port2"===t.from.portId||"port3"===t.from.portId)})),r=o.find((function(e){return n.some((function(t){return t.from.nodeId===e.id||t.to.nodeId===e.id}))}));console.log("Input node",r);var i=o.find((function(e){return a.some((function(t){return t.from.nodeId===e.id||t.to.nodeId===e.id}))}));console.log("Output node",i);var c=JSON.parse(JSON.stringify(e.properties)),s=c.input;s&&(s.storage_provider="".concat(null===r||void 0===r?void 0:r.type,".").concat(null===r||void 0===r?void 0:r.properties.name),s.path=null===r||void 0===r?void 0:r.properties.path,s.prefix&&(s.prefix=s.prefix.replace(" ","").split(",")),(null===s||void 0===s?void 0:s.suffix)&&(s.suffix=s.suffix.replace(" ","").split(",")),c.input=[s]);var u=c.output;u&&(u.storage_provider="".concat(null===i||void 0===i?void 0:i.type,".").concat(null===i||void 0===i?void 0:i.properties.name),u.path=null===i||void 0===i?void 0:i.properties.path,u.prefix&&(u.prefix=u.prefix.replace(" ","").split(",")),u.suffix&&(u.suffix=u.suffix.replace(" ","").split(",")),c.output=[u]);var l=c.environment;return l&&(c.environment={Variables:l.Variables.replace(" ","").split(",").map((function(e){var t=e.split("=");return Object(Ke.a)({},t[0].trim(),t[1].trim())})).reduce((function(e,t){return Object(S.a)(Object(S.a)({},e),t)}))}),c})),a=e.filter((function(e){return"aws-fx"===e.type})).map((function(e){var n,a,r,i,c,s,u,l=JSON.parse(JSON.stringify(e.properties)),p=t.filter((function(t){return t.to.nodeId===e.id&&("port1"===t.to.portId||"port4"===t.to.portId)||t.from.nodeId===e.id&&("port1"===t.from.portId||"port4"===t.from.portId)})),d=t.filter((function(t){return t.to.nodeId===e.id&&("port2"===t.to.portId||"port3"===t.to.portId)||t.from.nodeId===e.id&&("port2"===t.from.portId||"port3"===t.from.portId)})),b=o.find((function(e){return p.some((function(t){return t.from.nodeId===e.id||t.to.nodeId===e.id}))})),j=o.find((function(e){return d.some((function(t){return t.from.nodeId===e.id||t.to.nodeId===e.id}))})),f=null===(n=l.lambda)||void 0===n?void 0:n.input;f&&(f.storage_provider="".concat(null===b||void 0===b?void 0:b.type,".").concat(null===b||void 0===b?void 0:b.properties.name),(null===f||void 0===f?void 0:f.prefix)&&(f.prefix=f.prefix.replace(" ","").split(",")),(null===f||void 0===f?void 0:f.suffix)&&(f.suffix=f.suffix.replace(" ","").split(",")),l.lambda.input=f);var O=null===(a=l.lambda)||void 0===a?void 0:a.output;O&&(O.storage_provider="".concat(null===j||void 0===j?void 0:j.type,".").concat(null===j||void 0===j?void 0:j.properties.name),(null===O||void 0===O?void 0:O.prefix)&&(O.prefix=O.prefix.replace(" ","").split(",")),O.suffix&&(O.suffix=O.suffix.replace(" ","").split(",")),l.lambda.output=O);var v=null===(r=l.batch)||void 0===r?void 0:r.compute_resources;(null===v||void 0===v?void 0:v.instance_types)&&(v.instance_types=v.instance_types.replace(" ","").split(",")),(null===v||void 0===v?void 0:v.subnets)&&(v.subnets=v.subnets.replace(" ","").split(",")),(null===v||void 0===v?void 0:v.security_group_ids)&&(v.security_group_ids=v.security_group_ids.replace(" ","").split(","));var g=null===(i=l.lambda)||void 0===i?void 0:i.environment;g&&(l.lambda.environment={Variables:g.Variables.replace(" ","").split(",").map((function(e){var t=e.split("=");return Object(Ke.a)({},t[0].trim(),t[1].trim())})).reduce((function(e,t){return Object(S.a)(Object(S.a)({},e),t)}))}),(null===(c=l.batch)||void 0===c?void 0:c.environment)&&(l.batch.environment={Variables:g.Variables.replace(" ","").split(",").map((function(e){var t=e.split("=");return Object(Ke.a)({},t[0].trim(),t[1].trim())})).reduce((function(e,t){return Object(S.a)(Object(S.a)({},e),t)}))});var h=null===(s=l.lambda)||void 0===s||null===(u=s.container)||void 0===u?void 0:u.environment;return h&&(l.lambda.container.environment={Variables:h.Variables.replace(" ","").split(",").map((function(e){var t=e.split("=");return Object(Ke.a)({},t[0].trim(),t[1].trim())})).reduce((function(e,t){return Object(S.a)(Object(S.a)({},e),t)}))}),l})),r=e.filter((function(e){return"onedata"===e.type})).map((function(e){return e.properties})).reduce((function(e,t){var o=JSON.parse(JSON.stringify(t));return delete o.path,delete o.output,Object(S.a)(Object(S.a)({},e),{},Object(Ke.a)({},t.name,o))}),{}),i=e.filter((function(e){return"s3"===e.type})).map((function(e){return e.properties})).reduce((function(e,t){var o=JSON.parse(JSON.stringify(t));return delete o.name,delete o.path,delete o.output,Object(S.a)(Object(S.a)({},e),{},Object(Ke.a)({},t.name,o))}),{}),c=e.filter((function(e){return"minio"===e.type})).map((function(e){return e.properties})).reduce((function(e,t){var o=JSON.parse(JSON.stringify(t));return delete o.name,delete o.path,delete o.output,Object(S.a)(Object(S.a)({},e),{},Object(Ke.a)({},t.name,o))}),{}),s={functions:{oscar:n.map((function(e){return JSON.parse('{ "'.concat(e.name,'": ').concat(JSON.stringify(e)," }"))})),aws:a},storage_providers:{}};0!==Object.keys(i).length&&(s.storage_providers.s3=i),0!==Object.keys(r).length&&(s.storage_providers.onedata=r),0!==Object.keys(c).length&&(s.storage_providers.minio=c),s.storage_providers.s3==={}&&delete s.storage_providers.s3,s.storage_providers.onedata==={}&&delete s.storage_providers.onedata,s.storage_providers.minio==={}&&delete s.storage_providers.minio;var u=Ne.a.dump(s),l=new Blob([u],{type:"text/plain;charset=utf-8"});Object(je.saveAs)(l,"workflow.yaml")}(Object.values(this.state.nodes),Object.values(this.state.links))}},{key:"exportState",value:function(){var e=JSON.stringify(this.state),t=new Blob([e],{type:"text/plain;charset=utf-8"});Object(je.saveAs)(t,"state.json")}},{key:"importState",value:function(){var e=this,t=document.createElement("input");t.type="file",t.accept=".json",t.onchange=function(o){console.log(o.target.files[0].name);var n=new FileReader;n.onload=function(){var t=Object(K.a)(V.a.mark((function t(o){var n;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(null===o||void 0===o||null===(n=o.target)||void 0===n?void 0:n.result)&&e.setState(JSON.parse(o.target.result));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),n.readAsText(t.files[0])},t.click()}},{key:"editStorageProvider",value:function(e,t){console.log("editing ".concat(e," ").concat(t));var o=this.state.storageProviders.find((function(o){return o.type===e&&o.properties.name===t}));switch(e){case"s3":this.setState(Object(S.a)(Object(S.a)({},this.state),{},{s3DefaultValue:null===o||void 0===o?void 0:o.properties,s3ModalVisible:!0}));break;case"onedata":this.setState(Object(S.a)(Object(S.a)({},this.state),{},{oneDataDefaultValue:null===o||void 0===o?void 0:o.properties,oneDataModalVisible:!0}));break;case"minio":this.setState(Object(S.a)(Object(S.a)({},this.state),{},{minioDefaultValue:null===o||void 0===o?void 0:o.properties,minioModalVisible:!0}))}}},{key:"removeStorageProvider",value:function(e,t){console.log("removing ".concat(e," ").concat(t)),console.log(this.state.storageProviders);var o=this.state.storageProviders.findIndex((function(o){return o.type===e&&o.properties.name===t})),n=Object(_.a)(this.state.storageProviders);n.splice(o,1),this.setState(Object(S.a)(Object(S.a)({},this.state),{},{storageProviders:n}))}},{key:"addOrUpdateStorageProvider",value:function(e,t){var o=this.state.storageProviders.findIndex((function(o){var n;return o.type===e&&t.name===(null===(n=o.properties)||void 0===n?void 0:n.name)}));console.log(o);var n=Object(_.a)(this.state.storageProviders);-1!==o&&n.splice(o,1);var a=[].concat(Object(_.a)(n),[{type:e,ports:{port1:{id:"port1",type:"top",properties:{path:""}},port2:{id:"port2",type:"right",properties:{path:""}},port3:{id:"port3",type:"bottom",properties:{path:""}},port4:{id:"port4",type:"left",properties:{path:""}}},properties:t}]);this.setState(Object(S.a)(Object(S.a)({},this.state),{},{storageProviders:a,s3ModalVisible:!1,oneDataModalVisible:!1,minioModalVisible:!1}))}},{key:"render",value:function(){var e=this,t=this.state,o=Object(B.mapValues)(Object(S.a)(Object(S.a)({},Q.actions),{},{onNodeDoubleClick:function(){return Object(S.a)(Object(S.a)({},e.state),{},{selected:{}})}}),(function(t){return function(){e.setState(t.apply(void 0,arguments))}}));return Object(R.jsx)("div",{className:"App",children:Object(R.jsxs)(se.a,{className:"layout",children:[Object(R.jsx)(Me,{defaultValue:this.state.s3DefaultValue,removeStorageProvider:this.removeStorageProvider,visible:this.state.s3ModalVisible,onCancel:function(){return e.setState(Object(S.a)(Object(S.a)({},e.state),{},{s3DefaultValue:void 0,s3ModalVisible:!1}))},onOk:function(t){e.addOrUpdateStorageProvider("s3",t)}}),Object(R.jsx)(_e,{defaultValue:this.state.oneDataDefaultValue,removeStorageProvider:this.removeStorageProvider,visible:this.state.oneDataModalVisible,onCancel:function(){return e.setState(Object(S.a)(Object(S.a)({},e.state),{},{oneDataDefaultValue:void 0,oneDataModalVisible:!1}))},onOk:function(t){e.addOrUpdateStorageProvider("onedata",t)}}),Object(R.jsx)(Ve,{defaultValue:this.state.minioDefaultValue,removeStorageProvider:this.removeStorageProvider,visible:this.state.minioModalVisible,onCancel:function(){return e.setState(Object(S.a)(Object(S.a)({},e.state),{},{minioDefaultValue:void 0,minioModalVisible:!1}))},onOk:function(t){e.addOrUpdateStorageProvider("minio",t)}}),Object(R.jsx)(Ee,{children:Object(R.jsxs)(ue.a,{theme:"dark",mode:"horizontal",children:[Object(R.jsx)(Ae,{ghost:!0,icon:Object(R.jsx)(le.a,{}),onClick:function(){return e.exportState()},children:"Download state"}),Object(R.jsx)(Ae,{ghost:!0,icon:Object(R.jsx)(pe.a,{}),onClick:function(){return e.importState()},children:"Load state"}),Object(R.jsx)(Ae,{ghost:!0,icon:Object(R.jsx)(de.a,{}),onClick:function(){e.exportToYaml()},children:"Export yaml"}),Object(R.jsxs)(Fe,{icon:Object(R.jsx)(be.a,{}),title:"Storage providers",children:[Object(R.jsx)(ue.a.Item,{onClick:function(){e.setState(Object(S.a)(Object(S.a)({},e.state),{},{s3ModalVisible:!0}))},children:"New S3"},"storage:s3"),Object(R.jsx)(ue.a.Item,{onClick:function(){e.setState(Object(S.a)(Object(S.a)({},e.state),{},{minioModalVisible:!0}))},children:"New Minio"},"storage:minio"),Object(R.jsx)(ue.a.Item,{onClick:function(){e.setState(Object(S.a)(Object(S.a)({},e.state),{},{oneDataModalVisible:!0}))},children:"New One data"},"storage:onedata")]},"SubMenu")]})}),Object(R.jsxs)(q,{children:[Object(R.jsx)(Q.FlowChart,{chart:t,callbacks:o,Components:{NodeInner:we,Port:ie}}),Object(R.jsx)(W,{removeStorageProvider:this.removeStorageProvider,editStorageProvider:this.editStorageProvider,storageProviders:this.state.storageProviders})]})]})})}}]),o}(C.a.Component),Be=function(e){e&&e instanceof Function&&o.e(3).then(o.bind(null,352)).then((function(t){var o=t.getCLS,n=t.getFID,a=t.getFCP,r=t.getLCP,i=t.getTTFB;o(e),n(e),a(e),r(e),i(e)}))};M.a.render(Object(R.jsx)(Te,{}),document.getElementById("root")),Be()}},[[332,1,2]]]);
//# sourceMappingURL=main.93991325.chunk.js.map