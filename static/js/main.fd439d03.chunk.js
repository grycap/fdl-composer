(this["webpackJsonpworkflow-builder"]=this["webpackJsonpworkflow-builder"]||[]).push([[0],{192:function(e,t,n){},193:function(e,t,n){},345:function(e,t,n){"use strict";n.r(t);var o,r,a,i,s,c,l,u,p,d,b,j,m,f,g,O,h,v,x,y,P,k=n(1),w=n.n(k),D=n(33),M=n.n(D),_=(n(192),n(8)),C=n(2),I=n(28),S=n(39),V=n(14),F=n(15),U=n(47),K=n(19),N=n(18),A=n(23),E=(n(193),n(105)),R=n(16),T=(R.default.pre(o||(o=Object(A.a)(["\n  margin: 10px;\n  padding: 10px;\n  line-height: 1.4em;\n  white-space: pre-wrap;\n  font-family: Consolas, 'Andale Mono WT', 'Andale Mono', 'Lucida Console', 'Lucida Sans Typewriter', 'DejaVu Sans Mono',\n    'Bitstream Vera Sans Mono', 'Liberation Mono', 'Nimbus Mono L', Monaco, 'Courier New', Courier, monospace;\n\n  background-color: #eff0f1;\n  overflow: auto;\n"]))),R.default.div(r||(r=Object(A.a)(["\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  overflow: hidden;\n"]))),R.default.div(a||(a=Object(A.a)(["\n  margin: 10px 10px 0px;\n  padding: 10px;\n  line-height: 1.4em;\n"])))),L=n(3),B=(Object(R.createGlobalStyle)(i||(i=Object(A.a)(["\n  body {\n    margin: 0px;\n    max-width: 100vw;\n    max-height: 100vh;\n    overflow: hidden;\n    box-sizing: border-box;\n    font-family: sans-serif;\n  }\n\n  *, :after, :before {\n    box-sizing: inherit;\n  }\n"]))),R.default.div(s||(s=Object(A.a)(["\n  display: flex;\n  flex-direction: row;\n  flex: 1;\n  max-width: 100vw;\n  max-height: 93vh;\n"])))),G=n(357),q=n(67),z=R.default.div(c||(c=Object(A.a)(["\n  min-width: 200px;\n  max-width: 250px;\n  background: white;\n  display: flex;\n  flex-direction: column;\n  flex-shrink: 0;\n  overflow: auto;\n"]))),J=function(e){var t=e.storageProviders,n=e.removeStorageProvider,o=e.editStorageProvider;return Object(L.jsxs)(z,{children:[Object(L.jsx)(T,{children:"Drag and drop these items onto the canvas."}),null===t||void 0===t?void 0:t.filter((function(e){var t;return null===(t=e.properties)||void 0===t?void 0:t.name})).map((function(e,t){return Object(L.jsx)(G.a,{placement:"top",trigger:"hover",title:"".concat(e.properties.name," options"),content:Object(L.jsx)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center"},children:Object(L.jsxs)("div",{style:{display:"flex",flexDirection:"column",rowGap:"1rem"},children:[Object(L.jsx)(q.a,{onClick:function(){return o(e.type,e.properties.name)},children:"Edit"}),Object(L.jsx)(q.a,{danger:!0,onClick:function(){return n(e.type,e.properties.name)},children:"Delete"})]})}),children:Object(L.jsx)(te,Object(C.a)(Object(C.a)({},e),{},{onDoubleClick:function(e){e.stopPropagation()}}))},"Popover_".concat(t))})),Object(L.jsx)(te,{type:"oscar-fx",ports:{port1:{id:"port1",type:"top",properties:{path:""}},port2:{id:"port2",type:"right",properties:{path:""}},port3:{id:"port3",type:"bottom",properties:{path:""}},port4:{id:"port4",type:"left",properties:{path:""}}}}),Object(L.jsx)(te,{type:"aws-fx",ports:{port1:{id:"port1",type:"top",properties:{path:""}},port2:{id:"port2",type:"right",properties:{path:""}},port3:{id:"port3",type:"bottom",properties:{path:""}},port4:{id:"port4",type:"left",properties:{path:""}}}})]})},W=n(11),H=n(44),Y=["type","ports","properties"],Q=R.default.div(l||(l=Object(A.a)(["\n  min-height: 100px;\n\n  margin-bottom: 1rem;\n  border: 0.5px solid grey;\n\n  padding: 20px 30px;\n  font-size: 14px;\n  background: black;\n  cursor: move;\n  ","\n\n  ",";\n"])),(function(e){return e.color&&Object(R.css)(u||(u=Object(A.a)(["\n      color: ",";\n    "])),e.color)}),(function(e){return e.background&&Object(R.css)(p||(p=Object(A.a)(["\n      background: url(",") no-repeat;\n      background-size: ",";\n      background-position: center;\n    "])),e.background,e.backgroundSize||"96px")})),X=function(e){switch(e){case"oscar-fx":return{background:"#fff",color:"black"};case"aws-fx":return{background:"#080301",color:"white"};case"s3":return{background:"#ebe4c0",color:"black"};case"onedata":return{background:"#c2d4ad",color:"black"};case"minio":return{background:"#c47878",color:"black"};default:return{background:"#FFF",color:"black"}}},Z=R.default.div(d||(d=Object(A.a)(["\n  font-weight: 700;\n  font-size: 2rem;\n  min-height: 100px;\n  margin-bottom: 1rem;\n  border: 0.5px solid grey;\n  padding: 30px;\n  min-height: 100px;\n  border-radius: 50%;\n  cursor: move;\n  ","\n  ",";\n"])),(function(e){return e.color&&Object(R.css)(b||(b=Object(A.a)(["\n      color: ",";\n    "])),e.color)}),(function(e){return e.background&&Object(R.css)(j||(j=Object(A.a)(["\n      background: url(",") no-repeat;\n      background-size: ",";\n      background-position: center;\n    "])),e.background,e.backgroundSize||"96px")})),$=function(e){switch(e){case"oscar-fx":return Object(L.jsx)("img",{alt:"oscar logo",src:"https://github.com/grycap/oscar/blob/master/docs/images/oscar3.png?raw=true",width:"96px"});case"aws-fx":return Object(L.jsx)("img",{alt:"aws logo",src:"https://d1.awsstatic.com/Digital%20Marketing/House/PAC/2up/PAC-Q4_House-Ads_Lambda_2up.62dc7e19b7b2e0a2c06821594c31f1ce00a6bdda.png",height:"32px"});case"s3":return Object(L.jsx)("img",{alt:"s3 logo",src:"https://servmask.com/img/products/s3.png",height:"48px"});case"onedata":return Object(L.jsx)("img",{alt:"aws logo",src:"https://www.ebi.ac.uk/about/technology/wp-content/uploads/2019/10/onedata-logo.png",height:"24px"});case"minio":return Object(L.jsx)("img",{alt:"aws logo",src:"https://suarapapua.com/wp-content/plugins/ilab-media-tools-premium/public/img/wizard-icon-minio.png",height:"36px"})}},ee=function(e){switch(e){case"oscar-fx":return"https://github.com/grycap/oscar/blob/master/docs/images/oscar3.png?raw=true";case"aws-fx":return"https://d1.awsstatic.com/Digital%20Marketing/House/PAC/2up/PAC-Q4_House-Ads_Lambda_2up.62dc7e19b7b2e0a2c06821594c31f1ce00a6bdda.png";case"s3":return"https://servmask.com/img/products/s3.png";case"onedata":return"https://www.ebi.ac.uk/about/technology/wp-content/uploads/2019/10/onedata-logo.png";case"minio":return"https://suarapapua.com/wp-content/plugins/ilab-media-tools-premium/public/img/wizard-icon-minio.png"}},te=function(e){var t=e.type,n=e.ports,o=e.properties,r=Object(W.a)(e,Y),a=X(t);return["s3","onedata","minio"].includes(t)?Object(L.jsx)(Z,Object(C.a)(Object(C.a)({style:{paddingTop:"5rem"},backgroundSize:"s3"===t?"96px":"150px",background:ee(t),color:a.color,draggable:!0,onDragStart:function(e){e.dataTransfer.setData(H.REACT_FLOW_CHART,JSON.stringify({type:t,ports:n,properties:o}))}},r),{},{children:null===o||void 0===o?void 0:o.name})):Object(L.jsx)(Q,{background:ee(t),color:a.color,draggable:!0,onDragStart:function(e){e.dataTransfer.setData(H.REACT_FLOW_CHART,JSON.stringify({type:t,ports:n,properties:o}))}})},ne=n(358),oe=n(359),re=n(360),ae=function(e){switch(e.port.type){case"right":case"left":return Object(L.jsx)(ne.a,{style:{fontSize:"1rem"}});case"top":case"bottom":return Object(L.jsx)(oe.a,{style:{fontSize:"1rem"}});default:return Object(L.jsx)(re.a,{style:{fontSize:"1rem"}})}},ie={offset:{x:0,y:0},scale:1,nodes:{},links:{},selected:{},hovered:{},modalVisible:!1,storageProviders:[],s3ModalVisible:!1,oneDataModalVisible:!1,minioModalVisible:!1,s3DefaultValue:void 0,oneDataDefaultValue:void 0,minioDefaultValue:void 0},se=n(349),ce=n(355),le=n(184),ue=n(361),pe=n(362),de=n(363),be=n(364),je=n(111),me=n(6),fe=n(353),ge=n(351),Oe=n(354),he=n(350),ve=n(346),xe=n(352),ye=n(347),Pe=n(348),ke=n(356),we=function(e){var t,n,o,r,a,i,s,c,l,u,p=e.visible,d=e.onOk,b=e.onCancel,j=e.defaultValue,m=ge.a.useForm(),f=Object(me.a)(m,1)[0],g=ge.a.useForm(),O=Object(me.a)(g,1)[0],h=ge.a.useForm(),v=Object(me.a)(h,1)[0],x=ge.a.useForm(),y=Object(me.a)(x,1)[0],P=ge.a.useForm(),w=Object(me.a)(P,1)[0],D=ge.a.useForm(),M=Object(me.a)(D,1)[0],_=ge.a.useForm(),I=Object(me.a)(_,1)[0],S=ge.a.useForm(),V=Object(me.a)(S,1)[0],F=ge.a.useForm(),U=Object(me.a)(F,1)[0],K=Object(k.useState)(!1),N=Object(me.a)(K,2),A=N[0],E=N[1],R=Object(k.useState)("lambda"!==(null===j||void 0===j||null===(t=j.lambda)||void 0===t?void 0:t.execution_mode)),T=Object(me.a)(R,2),B=T[0],G=T[1],q=Oe.a.Option;return Object(L.jsx)(fe.a,{title:"AWS Fx ".concat((null===j||void 0===j||null===(n=j.lambda)||void 0===n?void 0:n.name)||""),visible:p,onCancel:function(){b()},onOk:function(){f.validateFields().then((function(e){console.log(e);var t=O.getFieldsValue(),n=v.getFieldsValue(),o=y.getFieldsValue(),r=w.getFieldsValue(),a=M.getFieldsValue(),i=I.getFieldsValue(),s=V.getFieldsValue(),c=U.getFieldsValue(),l={lambda:Object(C.a)(Object(C.a)({},e),{},{environment:t,input:n,output:o,container:Object(C.a)(Object(C.a)({},r),{},{environment:a})}),batch:Object(C.a)(Object(C.a)({},i),{},{environment:s,compute_resources:c,enable_gpu:A})};d(l)})).catch((function(e){return console.log("Error",e)}))},children:Object(L.jsxs)(he.a,{defaultActiveKey:"1",children:[Object(L.jsxs)(he.a.TabPane,{tab:"Lambda",children:[Object(L.jsx)(ve.a,{children:"Setup"}),Object(L.jsxs)(ge.a,{form:f,initialValues:null===j||void 0===j?void 0:j.lambda,name:"Form aws lambda",children:[Object(L.jsx)(ge.a.Item,{name:"name",label:"Name",rules:[{required:!0,message:"Please input the name of the lambda function"}],children:Object(L.jsx)(xe.a,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()}})}),Object(L.jsx)(ge.a.Item,{name:"region",label:"Region",rules:[{required:!0,message:"Please input the region of the lambda function"}],children:Object(L.jsx)(xe.a,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()}})}),Object(L.jsx)(ge.a.Item,{name:"boto_profile",label:"Boto profile",children:Object(L.jsx)(xe.a,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()}})}),Object(L.jsx)(ge.a.Item,{name:"memory",label:"Memory",children:Object(L.jsx)(xe.a,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()}})}),Object(L.jsx)(ge.a.Item,{name:"cpu",label:"Cpu",children:Object(L.jsx)(xe.a,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()}})}),Object(L.jsx)(ge.a.Item,{name:"init_script",label:"Init script",children:Object(L.jsx)(xe.a,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()}})}),Object(L.jsx)(ge.a.Item,{name:"timeout",label:"Timeout",children:Object(L.jsx)(xe.a,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()}})}),Object(L.jsx)(ge.a.Item,{name:"log_level",label:"Log level",children:Object(L.jsxs)(Oe.a,{children:[Object(L.jsx)(q,{value:"INFO",children:"INFO"}),Object(L.jsx)(q,{value:"DEBUG",children:"DEBUG"}),Object(L.jsx)(q,{value:"ERROR",children:"ERROR"}),Object(L.jsx)(q,{value:"WARNING",children:"WARNING"})]})}),Object(L.jsx)(ge.a.Item,{name:"execution_mode",label:"Execution mode",children:Object(L.jsxs)(Oe.a,{onChange:function(e){G("lambda"!==e)},children:[Object(L.jsx)(q,{value:"lambda",children:"Lambda"}),Object(L.jsx)(q,{value:"lambda-batch",children:"Lambda-Batch"}),Object(L.jsx)(q,{value:"batch",children:"Batch"})]})})]}),Object(L.jsx)(ge.a,{form:O,initialValues:null===j||void 0===j||null===(o=j.lambda)||void 0===o?void 0:o.environment,name:"Form aws lambda environment",children:Object(L.jsx)(ge.a.Item,{name:"Variables",label:"Environment variables",children:Object(L.jsx)(xe.a,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()}})})}),Object(L.jsx)(ve.a,{children:"Container"}),Object(L.jsxs)(ge.a,{form:w,initialValues:null===j||void 0===j||null===(r=j.lambda)||void 0===r?void 0:r.container,name:"Form aws lambda container",children:[Object(L.jsx)(ge.a.Item,{name:"image",label:"Image",children:Object(L.jsx)(xe.a,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()}})}),Object(L.jsx)(ge.a.Item,{name:"timeout_threshold",label:"Time threshold",children:Object(L.jsx)(xe.a,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()}})})]}),Object(L.jsx)(ge.a,{form:M,initialValues:null===j||void 0===j||null===(a=j.lambda)||void 0===a||null===(i=a.container)||void 0===i?void 0:i.environment,name:"Form aws lambda container environment",children:Object(L.jsx)(ge.a.Item,{name:"Variables",label:"Environment variables",children:Object(L.jsx)(xe.a,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()}})})}),Object(L.jsx)(ve.a,{children:"Input"}),Object(L.jsxs)(ge.a,{form:v,initialValues:null===j||void 0===j||null===(s=j.lambda)||void 0===s?void 0:s.input,name:"Form aws lambda input",children:[Object(L.jsx)(ge.a.Item,{name:"suffix",label:"Suffix",children:Object(L.jsx)(xe.a,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()}})}),Object(L.jsx)(ge.a.Item,{name:"prefix",label:"Prefix",children:Object(L.jsx)(xe.a,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()}})})]}),Object(L.jsx)(ve.a,{children:"Output"}),Object(L.jsxs)(ge.a,{form:y,initialValues:null===j||void 0===j||null===(c=j.lambda)||void 0===c?void 0:c.output,name:"Form aws lambda output",children:[Object(L.jsx)(ge.a.Item,{name:"suffix",label:"Suffix",children:Object(L.jsx)(xe.a,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()}})}),Object(L.jsx)(ge.a.Item,{name:"prefix",label:"Prefix",children:Object(L.jsx)(xe.a,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()}})})]})]},"1"),B&&Object(L.jsxs)(he.a.TabPane,{tab:"Batch",children:[Object(L.jsxs)(ge.a,{form:I,initialValues:null===j||void 0===j?void 0:j.batch,name:"Form aws batch setup",children:[Object(L.jsx)(ge.a.Item,{name:"region",label:"Region",children:Object(L.jsx)(xe.a,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()}})}),Object(L.jsx)(ge.a.Item,{name:"boto_profile",label:"Boto profile",children:Object(L.jsx)(xe.a,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()}})}),Object(L.jsx)(ge.a.Item,{name:"memory",label:"Memory",children:Object(L.jsx)(xe.a,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()}})}),Object(L.jsx)(ge.a.Item,{name:"vcpus",label:"vCpu",children:Object(L.jsx)(xe.a,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()}})}),Object(L.jsxs)(ye.a,{style:{marginBottom:"1rem"},children:[Object(L.jsx)(Pe.a,{span:3,children:"Enable gpu"}),Object(L.jsx)(Pe.a,{span:1,children:Object(L.jsx)(ke.a,{value:A,onChange:function(e){E(e.target.checked)}})})]}),Object(L.jsx)(ge.a.Item,{name:"service_role",label:"Service role",children:Object(L.jsx)(xe.a,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()}})})]}),Object(L.jsx)(ge.a,{form:V,initialValues:null===j||void 0===j||null===(l=j.batch)||void 0===l?void 0:l.environment,name:"Form aws batch environment",children:Object(L.jsx)(ge.a.Item,{name:"Variables",label:"Environment variables",children:Object(L.jsx)(xe.a,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()}})})}),Object(L.jsxs)(ge.a,{form:U,initialValues:null===j||void 0===j||null===(u=j.batch)||void 0===u?void 0:u.compute_resources,name:"Form aws batch compute resources",children:[Object(L.jsx)(ge.a.Item,{name:"desired_v_cpus",label:"Desired vCpus",children:Object(L.jsx)(xe.a,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()}})}),Object(L.jsx)(ge.a.Item,{name:"min_v_cpus",label:"Min vCpus",children:Object(L.jsx)(xe.a,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()}})}),Object(L.jsx)(ge.a.Item,{name:"max_v_cpus",label:"Max vCpus",children:Object(L.jsx)(xe.a,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()}})}),Object(L.jsx)(ge.a.Item,{name:"instance_role",label:"Instance role",children:Object(L.jsx)(xe.a,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()}})}),Object(L.jsx)(ge.a.Item,{name:"security_group_ids",label:"Security group ids",children:Object(L.jsx)(xe.a,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()}})}),Object(L.jsx)(ge.a.Item,{name:"subnets",label:"Subnets",children:Object(L.jsx)(xe.a,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()}})}),Object(L.jsx)(ge.a.Item,{name:"instance_types",label:"Instance types",children:Object(L.jsx)(xe.a,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()}})})]})]},"2")]})})},De=Oe.a.Option,Me=function(e){var t=e.visible,n=e.onOk,o=e.onCancel,r=e.defaultValue,a=ge.a.useForm(),i=Object(me.a)(a,1)[0],s=ge.a.useForm(),c=Object(me.a)(s,1)[0],l=ge.a.useForm(),u=Object(me.a)(l,1)[0],p=ge.a.useForm(),d=Object(me.a)(p,1)[0],b=ge.a.useForm(),j=Object(me.a)(b,1)[0],m=ge.a.useForm(),f=Object(me.a)(m,1)[0],g=ge.a.useForm(),O=Object(me.a)(g,1)[0],h=Object(k.useState)(""),v=Object(me.a)(h,2),x=(v[0],v[1],Object(k.useState)("")),y=Object(me.a)(x,2),P=(y[0],y[1],Object(k.useState)(!1)),w=Object(me.a)(P,2),D=w[0],M=w[1],_=Object(k.useState)(!1),I=Object(me.a)(_,2),S=I[0],V=I[1],F=Object(k.useState)(!1),U=Object(me.a)(F,2),K=U[0],N=U[1],A=Object(k.useState)(""),E=Object(me.a)(A,2),R=E[0],T=E[1],B=Object(k.useState)("Gi"),G=Object(me.a)(B,2),z=G[0],J=G[1],W=Object(k.useState)("Gi"),H=Object(me.a)(W,2),Y=H[0],Q=H[1];function X(){M(!D)}return Object(L.jsxs)(fe.a,{title:"OSCAR service ".concat((null===r||void 0===r?void 0:r.name)||""),visible:t,onCancel:function(){o()},onOk:function(){i.validateFields().then((function(e){var t=Object(C.a)(Object(C.a)({},e),{},{alpine:K,log_level:R,yunikorn_enable:S,memoryFormat:z,memoryTotalFormat:Y,synchronous:j.getFieldsValue(),annotations:f.getFieldsValue(),labels:O.getFieldsValue(),environment:c.getFieldsValue(),input:u.getFieldsValue(),output:d.getFieldsValue()});n(t)})).catch((function(e){return console.log("Error",e)}))},children:[Object(L.jsxs)(ge.a,{form:i,initialValues:r,name:"Form_oscar_fx_modal",children:[Object(L.jsx)(ve.a,{children:"Setup"}),Object(L.jsx)(ge.a.Item,{name:"cluster_name",label:"Cluster Name",children:Object(L.jsx)(xe.a,{defaultValue:"oscar-cluster",onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()}})}),Object(L.jsx)(ge.a.Item,{name:"name",label:"Name",rules:[{required:!0,message:"Please input the name of the oscar function"}],children:Object(L.jsx)(xe.a,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()}})}),Object(L.jsx)(ge.a.Item,{name:"memory",label:"Memory",style:{width:402,display:"inline-flex"},children:Object(L.jsx)(xe.a,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()}})}),Object(L.jsxs)(Oe.a,{defaultValue:"Gi",style:{width:70,display:"inline-flex"},onChange:function(e){J(e)},children:[Object(L.jsx)(De,{value:"Mi",children:"Mi"}),Object(L.jsx)(De,{value:"Gi",children:"Gi"})]}),Object(L.jsx)(ge.a.Item,{name:"cpu",label:"Cpu",children:Object(L.jsx)(xe.a,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()}})}),Object(L.jsx)(ge.a.Item,{name:"image",label:"Image",rules:[{required:!0,message:"Please input the image of the oscar function"}],children:Object(L.jsx)(xe.a,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()}})}),Object(L.jsx)(ge.a.Item,{name:"script",label:"Script",rules:[{required:!0,message:"Please input the script of the oscar function"}],children:Object(L.jsx)(xe.a,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()}})})]}),Object(L.jsx)(ge.a,{form:c,initialValues:null===r||void 0===r?void 0:r.environment,name:"Form oscar environment",children:Object(L.jsx)(ge.a.Item,{name:"Variables",label:"Environment variables",children:Object(L.jsx)(xe.a,{placeholder:'Separate by "," and assign value by "="',onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()}})})}),Object(L.jsx)(ve.a,{children:"Input"}),Object(L.jsxs)(ge.a,{form:u,initialValues:null===r||void 0===r?void 0:r.input,name:"Form oscar input",children:[Object(L.jsx)(ge.a.Item,{name:"suffix",label:"Suffix",children:Object(L.jsx)(xe.a,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()}})}),Object(L.jsx)(ge.a.Item,{name:"prefix",label:"Prefix",children:Object(L.jsx)(xe.a,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()}})})]}),Object(L.jsx)(ve.a,{children:"Output"}),Object(L.jsxs)(ge.a,{form:d,initialValues:null===r||void 0===r?void 0:r.output,name:"Form oscar output",children:[Object(L.jsx)(ge.a.Item,{name:"suffix",label:"Suffix",children:Object(L.jsx)(xe.a,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()}})}),Object(L.jsx)(ge.a.Item,{name:"prefix",label:"Prefix",children:Object(L.jsx)(xe.a,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()}})})]}),D?Object(L.jsxs)("div",{children:[Object(L.jsx)(ve.a,{}),Object(L.jsxs)(ye.a,{style:{marginBottom:"1rem"},children:[Object(L.jsx)(Pe.a,{span:6,children:"Less options:"}),Object(L.jsx)(Pe.a,{span:1,children:Object(L.jsx)(q.a,{onClick:X,children:"-"})})]}),Object(L.jsxs)(ge.a,{form:i,initialValues:r,name:"other variables for oscar",children:[Object(L.jsxs)(ye.a,{style:{marginBottom:"1rem"},children:[Object(L.jsx)(Pe.a,{span:3,children:"Yunikorn: "}),Object(L.jsx)(Pe.a,{span:1,children:Object(L.jsx)(ke.a,{value:S,onChange:function(e){V(e.target.checked)}})})]}),S?Object(L.jsxs)("div",{children:[Object(L.jsx)(ge.a.Item,{style:{width:402,display:"inline-flex"},name:"total_memory",label:"Total Memory",children:Object(L.jsx)(xe.a,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()}})}),Object(L.jsxs)(Oe.a,{defaultValue:"Gi",style:{width:70,display:"inline-flex"},onChange:function(e){Q(e)},children:[Object(L.jsx)(De,{value:"Mi",children:"Mi"}),Object(L.jsx)(De,{value:"Gi",children:"Gi"})]}),Object(L.jsx)(ge.a.Item,{name:"total_cpu",label:"Total CPU",children:Object(L.jsx)(xe.a,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()}})})]}):Object(L.jsx)("div",{}),Object(L.jsxs)(ye.a,{style:{marginBottom:"1rem"},children:[Object(L.jsx)(Pe.a,{span:4,children:"Log Level:"}),Object(L.jsx)(Pe.a,{span:2,children:Object(L.jsxs)(Oe.a,{defaultValue:"INFO",style:{width:120},onChange:function(e){T(e)},children:[Object(L.jsx)(De,{value:"CRITICAL",children:"CRITICAL"}),Object(L.jsx)(De,{value:"ERROR",children:"ERROR"}),Object(L.jsx)(De,{value:"WARNING",children:"WARNING"}),Object(L.jsx)(De,{value:"INFO",children:"INFO"}),Object(L.jsx)(De,{value:"DEBUG",children:"DEBUG"}),Object(L.jsx)(De,{value:"NOTSET",children:"NOTSET"})]})})]}),Object(L.jsxs)(ye.a,{style:{marginBottom:"1rem"},children:[Object(L.jsx)(Pe.a,{span:3,children:"Alpine:"}),Object(L.jsx)(Pe.a,{span:1,children:Object(L.jsx)(ke.a,{value:K,onChange:function(e){N(e.target.checked)}})})]})]}),Object(L.jsx)(ge.a,{form:f,initialValues:r,name:"other variables fot oscar",children:Object(L.jsx)(ge.a.Item,{name:"Annotations",label:"Annotations",children:Object(L.jsx)(xe.a,{placeholder:'Separate by "," and assign value by "="',onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()}})})}),Object(L.jsx)(ge.a,{form:O,initialValues:r,name:"other variables fot oscar",children:Object(L.jsx)(ge.a.Item,{name:"Labels",label:"Labels",children:Object(L.jsx)(xe.a,{placeholder:'Separate by "," and assign value by "="',onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()}})})}),Object(L.jsxs)(ge.a,{form:j,initialValues:r,name:"Synchronous Form",children:[Object(L.jsx)(ve.a,{children:"Synchronous"}),Object(L.jsx)(ge.a.Item,{name:"min_scale",label:"Min Scale",children:Object(L.jsx)(xe.a,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()}})}),Object(L.jsx)(ge.a.Item,{name:"max_scale",label:"Max Scale",children:Object(L.jsx)(xe.a,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()}})})]})]}):Object(L.jsxs)("div",{children:[Object(L.jsx)(ve.a,{}),Object(L.jsxs)(ye.a,{style:{marginBottom:"1rem"},children:[Object(L.jsx)(Pe.a,{span:6,children:"More options:"}),Object(L.jsx)(Pe.a,{span:1,children:Object(L.jsx)(q.a,{onClick:X,children:"+"})})]})]})]})},_e=["node","config"],Ce=R.default.div(m||(m=Object(A.a)(["\n  padding: 30px;\n  ","\n  ",";\n"])),(function(e){return e.color&&Object(R.css)(f||(f=Object(A.a)(["\n      color: ",";\n    "])),e.color)}),(function(e){return e.background&&Object(R.css)(g||(g=Object(A.a)(["\n      background: ",";\n    "])),e.background)})),Ie=R.default.div(O||(O=Object(A.a)(["\n  padding: 30px;\n  border-radius: 50%;\n  ","\n  ",";\n"])),(function(e){return e.color&&Object(R.css)(h||(h=Object(A.a)(["\n      color: ",";\n    "])),e.color)}),(function(e){return e.background&&Object(R.css)(v||(v=Object(A.a)(["\n      background: ",";\n    "])),e.background)})),Se=R.default.input(x||(x=Object(A.a)(["\n  padding: 10px;\n  border: 1px solid cornflowerblue;\n  margin-bottom: 0.5rem;\n  width: 80%;\n"]))),Ve=R.default.div(y||(y=Object(A.a)(["\n  display: flex;\n  flex-direction: row;\n"]))),Fe=R.default.div(P||(P=Object(A.a)(["\n  width: 20%;\n  align-content: center;\n"]))),Ue=function(e){var t,n,o,r,a,i,s=e.node,c=(e.config,Object(W.a)(e,_e)),l=w.a.useState(!1),u=Object(me.a)(l,2),p=u[0],d=u[1],b=w.a.useState(s.properties||{}),j=Object(me.a)(b,2),m=j[0],f=j[1],g=X(s.type);switch(s.type){case"s3":case"onedata":case"minio":return Object(L.jsxs)(Ie,Object(C.a)(Object(C.a)({},c),{},{color:g.color,background:g.background,onDoubleClick:function(e){return d(!0)},children:[Object(L.jsx)(fe.a,{title:(null===(t=s.properties)||void 0===t?void 0:t.name)||s.type,visible:p,onOk:function(){s.properties=m,d(!1)},onCancel:function(){return d(!1)},okButtonProps:{disabled:!1},cancelButtonProps:{disabled:!1},children:Object(L.jsxs)(Ve,{children:[Object(L.jsx)(Fe,{children:"Path:"}),Object(L.jsx)(Se,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"darknet-workflow/output",value:m.path,onChange:function(e){f(Object(C.a)(Object(C.a)({},m),{},{path:e.target.value}))}})]})}),Object(L.jsx)("div",{children:$(s.type)}),Object(L.jsx)("div",{style:{fontSize:"1.5rem",fontWeight:700},children:"".concat((null===(n=s.properties)||void 0===n?void 0:n.name)||"")})]}));case"oscar-fx":return Object(L.jsxs)(Ce,{color:g.color,background:g.background,onDoubleClick:function(){return d(!0)},children:[Object(L.jsx)(Me,{visible:p,defaultValue:s.properties,onOk:function(e){console.log(e),s.properties=e,d(!1)},onCancel:function(){return d(!1)}}),Object(L.jsx)("div",{children:$(s.type)}),Object(L.jsx)("div",{style:{fontSize:"1.5rem",fontWeight:700},children:"".concat((null===(o=s.properties)||void 0===o?void 0:o.name)||"")})]});case"aws-fx":return Object(L.jsxs)(Ce,{color:g.color,background:g.background,onDoubleClick:function(){return d(!0)},children:[Object(L.jsx)(we,{visible:p,defaultValue:s.properties,onOk:function(e){console.log(e),s.properties=e,d(!1)},onCancel:function(){return d(!1)}}),Object(L.jsx)("div",{children:$(s.type)}),Object(L.jsx)("div",{style:{fontSize:"1.5rem",fontWeight:700,color:"white"},children:"".concat((null===(r=s.properties)||void 0===r?void 0:r.lambda.name)||"")})]});default:return Object(L.jsxs)(Ce,{color:g.color,background:g.background,onDoubleClick:function(){d(!0)},children:[Object(L.jsx)(fe.a,{title:(null===(a=s.properties)||void 0===a?void 0:a.name)||s.type,visible:p,onOk:function(){s.properties=m,d(!1)},onCancel:function(){return d(!1)},okButtonProps:{disabled:!1},cancelButtonProps:{disabled:!1}}),Object(L.jsx)("div",{children:$(s.type)}),Object(L.jsx)("div",{style:{fontSize:"1.5rem",fontWeight:700},children:"".concat((null===(i=s.properties)||void 0===i?void 0:i.name)||"")})]})}},Ke=function(e){var t=e.visible,n=e.onOk,o=e.onCancel,r=e.defaultValue,a=e.removeStorageProvider,i=ge.a.useForm(),s=Object(me.a)(i,1)[0];return Object(k.useEffect)((function(){r&&s.setFieldsValue(r)}),[r,t,s]),Object(L.jsx)(fe.a,{title:"S3 Storage Provider ".concat((null===r||void 0===r?void 0:r.name)||""),visible:t,onCancel:function(){o(),s.resetFields()},onOk:function(){s.validateFields().then((function(e){r&&a&&e.name!==r.name&&a("s3",r.name),n(e),s.resetFields()})).catch((function(e){return console.log("Error",e)}))},children:Object(L.jsxs)(ge.a,{form:s,initialValues:r,name:"Form s3 modal",children:[Object(L.jsx)(ge.a.Item,{name:"name",label:"Name",rules:[{required:!0,message:"Please input the name of the storage provider"}],children:Object(L.jsx)(xe.a,{})}),Object(L.jsx)(ge.a.Item,{name:"region",label:"Region",rules:[{required:!0,message:"Please input the region of the storage provider"}],children:Object(L.jsx)(xe.a,{})}),Object(L.jsx)(ge.a.Item,{name:"access_key",label:"Access Key",rules:[{required:!0,message:"Please input the access key of the storage provider"}],children:Object(L.jsx)(xe.a,{})}),Object(L.jsx)(ge.a.Item,{name:"secret_key",label:"Secret Key",rules:[{required:!0,message:"Please input the secret key of the storage provider"}],children:Object(L.jsx)(xe.a,{})})]})})},Ne=function(e){var t=e.visible,n=e.onOk,o=e.onCancel,r=e.defaultValue,a=e.removeStorageProvider,i=ge.a.useForm(),s=Object(me.a)(i,1)[0];return Object(k.useEffect)((function(){r&&s.setFieldsValue(r)}),[r,t,s]),Object(L.jsx)(fe.a,{title:"OneData Storage Provider ".concat((null===r||void 0===r?void 0:r.name)||""),visible:t,onCancel:function(){o(),s.resetFields()},onOk:function(){s.validateFields().then((function(e){r&&a&&e.name!==r.name&&a("onedata",r.name),n(e),s.resetFields()})).catch((function(e){return console.log("Error",e)}))},children:Object(L.jsxs)(ge.a,{form:s,initialValues:r,name:"Form s3 modal",children:[Object(L.jsx)(ge.a.Item,{name:"name",label:"Name",rules:[{required:!0,message:"Please input the name of the storage provider"}],children:Object(L.jsx)(xe.a,{})}),Object(L.jsx)(ge.a.Item,{name:"oneprovider_host",label:"One Provider Host",rules:[{required:!0,message:"Please input the One Provider Host of the storage provider"}],children:Object(L.jsx)(xe.a,{})}),Object(L.jsx)(ge.a.Item,{name:"token",label:"Token",rules:[{required:!0,message:"Please input the token of the storage provider"}],children:Object(L.jsx)(xe.a,{})}),Object(L.jsx)(ge.a.Item,{name:"space",label:"Space",rules:[{required:!0,message:"Please input the space of the storage provider"}],children:Object(L.jsx)(xe.a,{})})]})})},Ae=function(e){var t=e.visible,n=e.onOk,o=e.onCancel,r=e.defaultValue,a=e.removeStorageProvider,i=ge.a.useForm(),s=Object(me.a)(i,1)[0],c=Object(k.useState)(!1),l=Object(me.a)(c,2),u=l[0],p=l[1];Object(k.useEffect)((function(){r&&s.setFieldsValue(r)}),[r,t,s]),Object(k.useEffect)((function(){r&&p(r.verify)}),[r]);return Object(L.jsx)(fe.a,{title:"MinIO Storage Provider ".concat((null===r||void 0===r?void 0:r.name)||""),visible:t,onCancel:function(){o(),s.resetFields(),p(!1)},onOk:function(){s.validateFields().then((function(e){var t=Object(C.a)(Object(C.a)({},e),{},{verify:u});r&&a&&t.name!==r.name&&a("minio",r.name),n(t),s.resetFields(),p(!1)})).catch((function(e){return console.log("Error",e)}))},children:Object(L.jsxs)(ge.a,{form:s,initialValues:r,name:"Form minio modal",children:[Object(L.jsx)(ge.a.Item,{name:"name",label:"Name",rules:[{required:!0,message:"Please input the name of the storage provider"}],children:Object(L.jsx)(xe.a,{})}),Object(L.jsx)(ge.a.Item,{name:"endpoint",label:"Endpoint",rules:[{required:!0,message:"Please input the endpoint of the storage provider"}],children:Object(L.jsx)(xe.a,{})}),Object(L.jsxs)(ye.a,{style:{marginBottom:"1rem"},children:[Object(L.jsx)(Pe.a,{span:3,children:"Verify:"}),Object(L.jsx)(Pe.a,{span:1,children:Object(L.jsx)(ke.a,{value:u,onChange:function(e){p(e.target.checked)}})})]}),Object(L.jsx)(ge.a.Item,{name:"region",label:"Region",rules:[{required:!0,message:"Please input the region of the storage provider"}],children:Object(L.jsx)(xe.a,{})}),Object(L.jsx)(ge.a.Item,{name:"access_key",label:"Access Key",rules:[{required:!0,message:"Please input the access key of the storage provider"}],children:Object(L.jsx)(xe.a,{})}),Object(L.jsx)(ge.a.Item,{name:"secret_key",label:"Secret Key",rules:[{required:!0,message:"Please input the secret key of the storage provider"}],children:Object(L.jsx)(xe.a,{})})]})})},Ee=n(4),Re=n(173),Te=n.n(Re);var Le;var Be,Ge,qe,ze,Je=se.a.Header,We=ce.a.SubMenu,He=Object(R.default)(q.a)(Le||(Le=Object(A.a)(["\n  margin-right: 1rem;\n  margin-top: 1rem;\n"]))),Ye=function(e){Object(K.a)(n,e);var t=Object(N.a)(n);function n(e){var o;return Object(V.a)(this,n),(o=t.call(this,e)).state=Object(E.cloneDeep)(ie),o.removeStorageProvider=o.removeStorageProvider.bind(Object(U.a)(o)),o.editStorageProvider=o.editStorageProvider.bind(Object(U.a)(o)),o}return Object(F.a)(n,[{key:"exportToYaml",value:function(){var e,t=function(t,n){try{var o=t.filter((function(e){return"s3"===e.type||"onedata"===e.type||"minio"===e.type})),r=t.filter((function(e){return"oscar-fx"===e.type})).map((function(e){var t=n.filter((function(t){return t.to.nodeId===e.id&&("port1"===t.to.portId||"port4"===t.to.portId)||t.from.nodeId===e.id&&("port1"===t.from.portId||"port4"===t.from.portId)})),r=n.filter((function(t){return t.to.nodeId===e.id&&("port2"===t.to.portId||"port3"===t.to.portId)||t.from.nodeId===e.id&&("port2"===t.from.portId||"port3"===t.from.portId)})),a=o.find((function(e){return t.some((function(t){return t.from.nodeId===e.id||t.to.nodeId===e.id}))}));console.log("Input node",a);var i=o.find((function(e){return r.some((function(t){return t.from.nodeId===e.id||t.to.nodeId===e.id}))}));console.log("Output node",i);var s,c=JSON.parse(JSON.stringify(e.properties)),l=c.input;l?(l.path=null===a||void 0===a?void 0:a.properties.path,l.storage_provider="".concat(null===a||void 0===a?void 0:a.type,".").concat(null===a||void 0===a?void 0:a.properties.name),l.prefix?l.prefix=l.prefix.replace(" ","").split(","):delete l.prefix,null!==(s=l)&&void 0!==s&&s.suffix?l.suffix=l.suffix.replace(" ","").split(","):delete l.suffix):l={path:null===a||void 0===a?void 0:a.properties.path,storage_provider:"".concat(null===a||void 0===a?void 0:a.type,".").concat(null===a||void 0===a?void 0:a.properties.name)},c.input=[l];var u=c.output;u?(u.path=null===i||void 0===i?void 0:i.properties.path,u.storage_provider="".concat(null===i||void 0===i?void 0:i.type,".").concat(null===i||void 0===i?void 0:i.properties.name),u.prefix?u.prefix=u.prefix.replace(" ","").split(","):delete u.prefix,u.suffix?u.suffix=u.suffix.replace(" ","").split(","):delete u.suffix):u={path:null===i||void 0===i?void 0:i.properties.path,storage_provider:"".concat(null===i||void 0===i?void 0:i.type,".").concat(null===i||void 0===i?void 0:i.properties.name)},console.log(u),c.output=[u];var p=c.environment;null!==p&&void 0!==p&&p.Variables&&(c.environment={Variables:p.Variables.replace(" ","").split(",").map((function(e){var t=e.split("=");return Object(Ee.a)({},t[0].trim(),t[1].trim())})).reduce((function(e,t){return Object(C.a)(Object(C.a)({},e),t)}))});var d=c.annotations.Annotations;d&&(c.annotations=d.replace(" ","").split(",").map((function(e){var t=e.split("=");return console.log(t),Object(Ee.a)({},t[0].trim(),t[1].trim())})).reduce((function(e,t){return Object(C.a)(Object(C.a)({},e),t)})));var b=c.labels.Labels;return b&&(c.labels=b.replace(" ","").split(",").map((function(e){var t=e.split("=");return console.log(t),Object(Ee.a)({},t[0].trim(),t[1].trim())})).reduce((function(e,t){return Object(C.a)(Object(C.a)({},e),t)}))),void 0!==c.memory&&0!==Object.keys(c.memory).length&&(c.memory=c.memory+c.memoryFormat),!0===c.yunikorn_enable?(void 0!==c.total_memory&&0!==Object.keys(c.total_memory).length&&(c.total_memory=c.total_memory+c.memoryTotalFormat),void 0!==c.total_memory&&0===Object.keys(c.total_memory).length&&delete c.total_memory,void 0!==c.total_cpu&&0===Object.keys(c.total_cpu).length&&delete c.total_cpu):(void 0!==c.total_memory&&0===Object.keys(c.total_memory).length&&delete c.total_memory,void 0!==c.total_cpu&&0===Object.keys(c.total_cpu).length&&delete c.total_cpu,delete c.yunikorn_enable),void 0!==c.cluster_name&&0!==Object.keys(c.cluster_name).length||(c.cluster_name="oscar-cluster"),void 0!==c.memory&&0===Object.keys(c.memory).length&&delete c.memory,delete c.memoryFormat,void 0!==c.cpu&&0===Object.keys(c.cpu).length&&delete c.cpu,(void 0!==c.environment&&0===Object.keys(c.environment).length||void 0!==c.environment.Variables&&0===Object.keys(c.environment.Variables).length)&&delete c.environment,delete c.memoryTotalFormat,0===Object.keys(c.log_level).length&&delete c.log_level,!1===c.alpine&&delete c.alpine,(void 0!==c.annotations&&0===Object.keys(c.annotations).length||void 0!==c.annotations.Annotations&&0===Object.keys(c.annotations.Annotations).length)&&delete c.annotations,(void 0!==c.labels&&0===Object.keys(c.labels).length||void 0!==c.labels.Labels&&0===Object.keys(c.labels.Labels).length)&&delete c.labels,void 0!==c.synchronous&&0===Object.keys(c.synchronous).length?delete c.synchronous:(void 0!==c.synchronous.min_scale&&0===Object.keys(c.synchronous.min_scale).length&&delete c.synchronous.min_scale,void 0!==c.synchronous.max_scale&&0===Object.keys(c.synchronous.max_scale).length&&delete c.synchronous.max_scale,void 0===c.synchronous.min_scale&&void 0===c.synchronous.max_scale&&delete c.synchronous),1===c.input.length&&"undefined.undefined"===c.input[0].storage_provider&&delete c.input,1===c.output.length&&"undefined.undefined"===c.output[0].storage_provider&&delete c.output,c})),a=t.filter((function(e){return"aws-fx"===e.type})).map((function(e){var t,r,a,i,s,c,l,u,p,d=JSON.parse(JSON.stringify(e.properties)),b=n.filter((function(t){return t.to.nodeId===e.id&&("port1"===t.to.portId||"port4"===t.to.portId)||t.from.nodeId===e.id&&("port1"===t.from.portId||"port4"===t.from.portId)})),j=n.filter((function(t){return t.to.nodeId===e.id&&("port2"===t.to.portId||"port3"===t.to.portId)||t.from.nodeId===e.id&&("port2"===t.from.portId||"port3"===t.from.portId)})),m=o.find((function(e){return b.some((function(t){return t.from.nodeId===e.id||t.to.nodeId===e.id}))})),f=o.find((function(e){return j.some((function(t){return t.from.nodeId===e.id||t.to.nodeId===e.id}))})),g=null===(t=d.lambda)||void 0===t?void 0:t.input;g?(g.path=null===m||void 0===m?void 0:m.properties.path,g.storage_provider="".concat(null===m||void 0===m?void 0:m.type,".").concat(null===m||void 0===m?void 0:m.properties.name),null!==(u=g)&&void 0!==u&&u.prefix&&(g.prefix=g.prefix.replace(" ","").split(",")),null!==(p=g)&&void 0!==p&&p.suffix&&(g.suffix=g.suffix.replace(" ","").split(","))):g={path:null===m||void 0===m?void 0:m.properties.path,storage_provider:"".concat(null===m||void 0===m?void 0:m.type,".").concat(null===m||void 0===m?void 0:m.properties.name)},d.lambda.input=[g];var O,h=null===(r=d.lambda)||void 0===r?void 0:r.output;h?(h.path=null===f||void 0===f?void 0:f.properties.path,h.storage_provider="".concat(null===f||void 0===f?void 0:f.type,".").concat(null===f||void 0===f?void 0:f.properties.name),null!==(O=h)&&void 0!==O&&O.prefix&&(h.prefix=h.prefix.replace(" ","").split(",")),h.suffix&&(h.suffix=h.suffix.replace(" ","").split(","))):h={path:null===f||void 0===f?void 0:f.properties.path,storage_provider:"".concat(null===f||void 0===f?void 0:f.type,".").concat(null===f||void 0===f?void 0:f.properties.name)},d.lambda.output=[h];var v=null===(a=d.batch)||void 0===a?void 0:a.compute_resources;null!==v&&void 0!==v&&v.instance_types&&(v.instance_types=v.instance_types.replace(" ","").split(",")),null!==v&&void 0!==v&&v.subnets&&(v.subnets=v.subnets.replace(" ","").split(",")),null!==v&&void 0!==v&&v.security_group_ids&&(v.security_group_ids=v.security_group_ids.replace(" ","").split(","));var x=null===(i=d.lambda)||void 0===i?void 0:i.environment;null!==x&&void 0!==x&&x.Variables&&(d.lambda.environment={Variables:x.Variables.replace(" ","").split(",").map((function(e){var t=e.split("=");return Object(Ee.a)({},t[0].trim(),t[1].trim())})).reduce((function(e,t){return Object(C.a)(Object(C.a)({},e),t)}))});var y=null===(s=d.batch)||void 0===s?void 0:s.environment;null!==y&&void 0!==y&&y.Variables&&(d.batch.environment={Variables:y.Variables.replace(" ","").split(",").map((function(e){var t=e.split("=");return Object(Ee.a)({},t[0].trim(),t[1].trim())})).reduce((function(e,t){return Object(C.a)(Object(C.a)({},e),t)}))});var P=null===(c=d.lambda)||void 0===c||null===(l=c.container)||void 0===l?void 0:l.environment;return null!==P&&void 0!==P&&P.Variables&&(d.lambda.container.environment={Variables:P.Variables.replace(" ","").split(",").map((function(e){var t=e.split("=");return Object(Ee.a)({},t[0].trim(),t[1].trim())})).reduce((function(e,t){return Object(C.a)(Object(C.a)({},e),t)}))}),0===Object.keys(d.lambda.environment).length&&delete d.lambda.environment,0===Object.keys(d.lambda.container.environment).length&&delete d.lambda.container.environment,0===Object.keys(d.lambda.container).length&&delete d.lambda.container,0===Object.keys(d.batch.environment).length&&delete d.batch.environment,0===Object.keys(d.batch.compute_resources).length&&delete d.batch.compute_resources,!d.batch.compute_resources&&!d.batch.environment&&delete d.batch,d})),i=t.filter((function(e){return"onedata"===e.type})).map((function(e){return e.properties})).reduce((function(e,t){var n=JSON.parse(JSON.stringify(t));return delete n.name,delete n.path,delete n.output,Object(C.a)(Object(C.a)({},e),{},Object(Ee.a)({},t.name,n))}),{}),s=t.filter((function(e){return"s3"===e.type})).map((function(e){return e.properties})).reduce((function(e,t){var n=JSON.parse(JSON.stringify(t));return delete n.name,delete n.path,delete n.output,Object(C.a)(Object(C.a)({},e),{},Object(Ee.a)({},t.name,n))}),{}),c=t.filter((function(e){return"minio"===e.type})).map((function(e){return e.properties})).reduce((function(e,t){var n=JSON.parse(JSON.stringify(t));return delete n.name,delete n.path,delete n.output,Object(C.a)(Object(C.a)({},e),{},Object(Ee.a)({},t.name,n))}),{}),l={functions:{oscar:r.map((function(e){var t=e.cluster_name;return delete e.cluster_name,JSON.parse('{ "'.concat(t,'": ').concat(JSON.stringify(e)," } "))}),{}),aws:a},storage_providers:{}};0!==Object.keys(s).length&&(l.storage_providers.s3=s),0!==Object.keys(i).length&&(l.storage_providers.onedata=i),0!==Object.keys(c).length&&(l.storage_providers.minio=c),l.storage_providers.s3==={}&&delete l.storage_providers.s3,l.storage_providers.onedata==={}&&delete l.storage_providers.onedata,l.storage_providers.minio==={}&&delete l.storage_providers.minio,0===Object.keys(l.functions.oscar).length&&delete l.functions.oscar,0===Object.keys(l.functions.aws).length&&delete l.functions.aws,0===Object.keys(l.storage_providers).length&&delete l.storage_providers;var u=Te.a.dump(l),p=new Blob([u],{type:"text/plain;charset=utf-8"});Object(je.saveAs)(p,"workflow.yaml")}catch(e){return e}}(Object.values(this.state.nodes),Object.values(this.state.links));void 0!==t&&(e=t,console.log(e),fe.a.error({title:"Error found:",content:e.message}))}},{key:"exportState",value:function(){var e=JSON.stringify(this.state),t=new Blob([e],{type:"text/plain;charset=utf-8"});Object(je.saveAs)(t,"state.json")}},{key:"importState",value:function(){var e=this,t=document.createElement("input");t.type="file",t.accept=".json",t.onchange=function(n){console.log(n.target.files[0].name);var o=new FileReader;o.onload=function(){var t=Object(S.a)(Object(I.a)().mark((function t(n){var o,r;return Object(I.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:null!==n&&void 0!==n&&null!==(o=n.target)&&void 0!==o&&o.result&&(r=JSON.parse(n.target.result),console.log(),r.nodes||r.storageProviders?e.setState(r):le.a.open({message:"Not valid",description:"The file selected does not match a proper file structure"}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),o.readAsText(t.files[0])},t.click()}},{key:"editStorageProvider",value:function(e,t){console.log("editing ".concat(e," ").concat(t));var n=this.state.storageProviders.find((function(n){return n.type===e&&n.properties.name===t}));switch(e){case"s3":this.setState(Object(C.a)(Object(C.a)({},this.state),{},{s3DefaultValue:null===n||void 0===n?void 0:n.properties,s3ModalVisible:!0}));break;case"onedata":this.setState(Object(C.a)(Object(C.a)({},this.state),{},{oneDataDefaultValue:null===n||void 0===n?void 0:n.properties,oneDataModalVisible:!0}));break;case"minio":this.setState(Object(C.a)(Object(C.a)({},this.state),{},{minioDefaultValue:null===n||void 0===n?void 0:n.properties,minioModalVisible:!0}))}}},{key:"removeStorageProvider",value:function(e,t){console.log("removing ".concat(e," ").concat(t)),console.log(this.state.storageProviders);var n=this.state.storageProviders.findIndex((function(n){return n.type===e&&n.properties.name===t})),o=Object(_.a)(this.state.storageProviders);o.splice(n,1),this.setState(Object(C.a)(Object(C.a)({},this.state),{},{storageProviders:o}))}},{key:"addOrUpdateStorageProvider",value:function(e,t){var n=this.state.storageProviders.findIndex((function(n){var o;return n.type===e&&t.name===(null===(o=n.properties)||void 0===o?void 0:o.name)}));console.log(n);var o=Object(_.a)(this.state.storageProviders);-1!==n&&o.splice(n,1);var r=[].concat(Object(_.a)(o),[{type:e,ports:{port1:{id:"port1",type:"top",properties:{path:""}},port2:{id:"port2",type:"right",properties:{path:""}},port3:{id:"port3",type:"bottom",properties:{path:""}},port4:{id:"port4",type:"left",properties:{path:""}}},properties:t}]);this.setState(Object(C.a)(Object(C.a)({},this.state),{},{storageProviders:r,s3ModalVisible:!1,oneDataModalVisible:!1,minioModalVisible:!1}))}},{key:"render",value:function(){var e=this,t=this.state,n=Object(E.mapValues)(Object(C.a)(Object(C.a)({},H.actions),{},{onNodeDoubleClick:function(){return console.log(e.state.selected),Object(C.a)(Object(C.a)({},e.state),{},{selected:{}})}}),(function(t){return function(){e.setState(t.apply(void 0,arguments))}}));return Object(L.jsx)("div",{className:"App",children:Object(L.jsxs)(se.a,{className:"layout",children:[Object(L.jsx)(Ke,{defaultValue:this.state.s3DefaultValue,removeStorageProvider:this.removeStorageProvider,visible:this.state.s3ModalVisible,onCancel:function(){return e.setState(Object(C.a)(Object(C.a)({},e.state),{},{s3DefaultValue:void 0,s3ModalVisible:!1}))},onOk:function(t){e.addOrUpdateStorageProvider("s3",t)}}),Object(L.jsx)(Ne,{defaultValue:this.state.oneDataDefaultValue,removeStorageProvider:this.removeStorageProvider,visible:this.state.oneDataModalVisible,onCancel:function(){return e.setState(Object(C.a)(Object(C.a)({},e.state),{},{oneDataDefaultValue:void 0,oneDataModalVisible:!1}))},onOk:function(t){e.addOrUpdateStorageProvider("onedata",t)}}),Object(L.jsx)(Ae,{defaultValue:this.state.minioDefaultValue,removeStorageProvider:this.removeStorageProvider,visible:this.state.minioModalVisible,onCancel:function(){return e.setState(Object(C.a)(Object(C.a)({},e.state),{},{minioDefaultValue:void 0,minioModalVisible:!1}))},onOk:function(t){e.addOrUpdateStorageProvider("minio",t)}}),Object(L.jsx)(Je,{children:Object(L.jsxs)(ce.a,{theme:"dark",mode:"horizontal",children:[Object(L.jsx)(He,{ghost:!0,icon:Object(L.jsx)(ue.a,{}),onClick:function(){return e.exportState()},children:"Download state"}),Object(L.jsx)(He,{ghost:!0,icon:Object(L.jsx)(pe.a,{}),onClick:function(){return e.importState()},children:"Load state"}),Object(L.jsx)(He,{ghost:!0,icon:Object(L.jsx)(de.a,{}),onClick:function(){e.exportToYaml()},children:"Export yaml"}),Object(L.jsxs)(We,{icon:Object(L.jsx)(be.a,{}),title:"Storage providers",children:[Object(L.jsx)(ce.a.Item,{onClick:function(){e.setState(Object(C.a)(Object(C.a)({},e.state),{},{s3ModalVisible:!0}))},children:"New S3"},"storage:s3"),Object(L.jsx)(ce.a.Item,{onClick:function(){e.setState(Object(C.a)(Object(C.a)({},e.state),{},{minioModalVisible:!0}))},children:"New Minio"},"storage:minio"),Object(L.jsx)(ce.a.Item,{onClick:function(){e.setState(Object(C.a)(Object(C.a)({},e.state),{},{oneDataModalVisible:!0}))},children:"New One data"},"storage:onedata")]},"SubMenu")]})}),Object(L.jsxs)(B,{children:[Object(L.jsx)(H.FlowChart,{chart:t,callbacks:n,Components:{NodeInner:Ue,Port:ae}}),Object(L.jsx)(J,{removeStorageProvider:this.removeStorageProvider,editStorageProvider:this.editStorageProvider,storageProviders:this.state.storageProviders})]})]})})}}]),n}(w.a.Component),Qe=n(174),Xe=n(175),Ze=n(176),$e=n(178),et=n(179),tt=n(177),nt=se.a.Footer,ot=R.default.div(Be||(Be=Object(A.a)(["\n  color: white;\n  position: relative;\n  top:-10px;\n"]))),rt=Object(R.default)(nt)(Ge||(Ge=Object(A.a)(["\n  background: #343a40;\n  position: fixed;\n  opacity:0.6;\n  left: 0;\n  bottom: 0;\n  height: 4%;\n  width: 100%;\n"]))),at=R.default.div(qe||(qe=Object(A.a)(["\nposition: relative;\ntop:-25px;\n  img{\n    width: 4%;\n    height: 4%;\n    margin:10px;\n  }\n"]))),it=R.default.div(ze||(ze=Object(A.a)(["\nposition: relative;\ntop:-15px;\n"]))),st={width:"5%",height:"5%",margin:"5px",color:"white"},ct=function(e){Object(K.a)(n,e);var t=Object(N.a)(n);function n(){return Object(V.a)(this,n),t.apply(this,arguments)}return Object(F.a)(n,[{key:"render",value:function(){return Object(L.jsx)(rt,{children:Object(L.jsxs)(ye.a,{children:[Object(L.jsx)(Pe.a,{md:10,children:Object(L.jsxs)(ot,{children:["2020 ",Object(L.jsx)("a",{href:"https://www.grycap.upv.es/",target:"_blank",rel:"noreferrer",children:"GRyCAP"}),Object(L.jsx)("br",{})]})}),Object(L.jsx)(Pe.a,{md:9,children:Object(L.jsxs)(at,{children:[Object(L.jsx)("a",{href:"https://www.indigo-datacloud.eu/",target:"_blank",rel:"noreferrer",children:Object(L.jsx)("img",{src:"https://appsgrycap.i3m.upv.es:31443/im-dashboard/static/images/indigo_logo.png",alt:"indigo"})}),Object(L.jsx)("a",{href:"https://deep-hybrid-datacloud.eu/",target:"_blank",rel:"noreferrer",children:Object(L.jsx)("img",{src:"https://appsgrycap.i3m.upv.es:31443/im-dashboard/static/images/logo_deep.png",alt:"deep"})}),Object(L.jsx)("a",{href:"https://www.eosc-hub.eu/",target:"_blank",rel:"noreferrer",children:Object(L.jsx)("img",{src:"https://appsgrycap.i3m.upv.es:31443/im-dashboard/static/images/eosc-hub_logo.png",alt:"eosc-hub"})}),Object(L.jsx)("a",{href:"https://www.eosc-synergy.eu/",target:"_blank",rel:"noreferrer",children:Object(L.jsx)("img",{src:"https://appsgrycap.i3m.upv.es:31443/im-dashboard/static/images/eosc-synergy_logo.png",alt:"eosc-synergy"})}),Object(L.jsx)("a",{href:"https://ai-sprint-project.eu/",target:"_blank",rel:"noreferrer",children:Object(L.jsx)("img",{src:"https://appsgrycap.i3m.upv.es:31443/im-dashboard/static/images/ai-sprint_logo.png",alt:"ai-sprint"})}),Object(L.jsx)("a",{href:"https://www.egi.eu/projects/egi-ace/",target:"_blank",rel:"noreferrer",children:Object(L.jsx)("img",{src:"https://appsgrycap.i3m.upv.es:31443/im-dashboard/static/images/logo-egi-ace.png",alt:"egi"})})]})}),Object(L.jsx)(Pe.a,{md:5,children:Object(L.jsxs)(it,{children:[Object(L.jsxs)("a",{href:"https://github.com/grycap/",target:"_blank",rel:"noreferrer",title:"Github",children:[" ",Object(L.jsx)(Qe.a,{style:st})," "]}),Object(L.jsxs)("a",{href:"https://hub.docker.com/orgs/grycap",target:"_blank",rel:"noreferrer",title:"DockerHub",children:[" ",Object(L.jsx)(Xe.a,{style:st})," "]}),Object(L.jsxs)("a",{href:"https://www.researchgate.net/lab/GRyCAP-Ignacio-Blanquer",target:"_blank",rel:"noreferrer",title:"ResearchGate",children:[" ",Object(L.jsx)(Ze.a,{style:st})," "]}),Object(L.jsxs)("a",{href:"https://docs.oscar.grycap.net/",target:"_blank",rel:"noreferrer",title:"Documentation",children:[" ",Object(L.jsx)(tt.a,{style:st})]}),Object(L.jsxs)("a",{href:"https://docs.oscar.grycap.net/license/",target:"_blank",rel:"noreferrer",title:"OSCAR Licence",children:[" ",Object(L.jsx)($e.a,{style:st})]}),Object(L.jsxs)("a",{href:"https://github.com/grycap/fdl-composer/blob/main/LICENSE",target:"_blank",rel:"noreferrer",title:"FDL-Composer Licence",children:[" ",Object(L.jsx)(et.a,{style:st})]})]})})]})})}}]),n}(w.a.Component),lt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,365)).then((function(t){var n=t.getCLS,o=t.getFID,r=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),o(e),r(e),a(e),i(e)}))};M.a.render(Object(L.jsx)(Ye,{}),document.getElementById("root")),M.a.render(Object(L.jsx)(ct,{}),document.getElementById("footer")),lt()}},[[345,1,2]]]);
//# sourceMappingURL=main.fd439d03.chunk.js.map