(this["webpackJsonpworkflow-builder"]=this["webpackJsonpworkflow-builder"]||[]).push([[0],{189:function(e,t,n){},191:function(e,t,n){},391:function(e,t,n){"use strict";n.r(t);var o=n(2),a=n(0),r=n.n(a),i=n(22),c=n.n(i),u=(n(189),n(8)),s=n(37),l=n.n(s),p=n(52),d=n(1),b=n(7),j=n(11),f=n(12),O=n(13),v=n(14),g=n(27),h=n(15),x=(n(191),n(96)),m=n(10);function P(){var e=Object(h.a)(["\n  margin: 10px;\n  padding: 10px;\n  line-height: 1.4em;\n  white-space: pre-wrap;\n  font-family: Consolas, 'Andale Mono WT', 'Andale Mono', 'Lucida Console', 'Lucida Sans Typewriter', 'DejaVu Sans Mono',\n    'Bitstream Vera Sans Mono', 'Liberation Mono', 'Nimbus Mono L', Monaco, 'Courier New', Courier, monospace;\n\n  background-color: #eff0f1;\n  overflow: auto;\n"]);return P=function(){return e},e}m.default.pre(P());function y(){var e=Object(h.a)(["\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  overflow: hidden;\n"]);return y=function(){return e},e}m.default.div(y());function k(){var e=Object(h.a)(["\n  margin: 10px 10px 0px;\n  padding: 10px;\n  line-height: 1.4em;\n"]);return k=function(){return e},e}var w=m.default.div(k());function C(){var e=Object(h.a)(["\n  display: flex;\n  flex-direction: row;\n  flex: 1;\n  max-width: 100vw;\n  max-height: 93vh;\n"]);return C=function(){return e},e}function D(){var e=Object(h.a)(["\n  body {\n    margin: 0px;\n    max-width: 100vw;\n    max-height: 100vh;\n    overflow: hidden;\n    box-sizing: border-box;\n    font-family: sans-serif;\n  }\n\n  *, :after, :before {\n    box-sizing: inherit;\n  }\n"]);return D=function(){return e},e}Object(m.createGlobalStyle)(D());var M=m.default.div(C()),_=n(402),S=n(61);function K(){var e=Object(h.a)(["\n  width: 200px;\n  background: white;\n  display: flex;\n  flex-direction: column;\n  flex-shrink: 0;\n  overflow: auto;\n"]);return K=function(){return e},e}var V=m.default.div(K()),I=function(e){var t=e.storageProviders,n=e.removeStorageProvider,a=e.editStorageProvider;return Object(o.jsxs)(V,{children:[Object(o.jsx)(w,{children:"Drag and drop these items onto the canvas."}),null===t||void 0===t?void 0:t.filter((function(e){var t;return null===(t=e.properties)||void 0===t?void 0:t.name})).map((function(e,t){return Object(o.jsx)(_.a,{placement:"top",title:"Delete provider ".concat(e.properties.name),content:Object(o.jsx)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center"},children:Object(o.jsxs)("div",{style:{display:"flex",flexDirection:"column",rowGap:"1rem"},children:[Object(o.jsx)(S.a,{onClick:function(){return a(e.type,e.properties.name)},children:"Edit"}),Object(o.jsx)(S.a,{danger:!0,onClick:function(){return n(e.type,e.properties.name)},children:"Delete"})]})}),children:Object(o.jsx)(H,Object(d.a)(Object(d.a)({},e),{},{onDoubleClick:function(e){e.stopPropagation()}}))},"Popover_".concat(t))})),Object(o.jsx)(H,{type:"oscar-fx",ports:{port1:{id:"port1",type:"top",properties:{path:""}},port2:{id:"port2",type:"right",properties:{path:""}},port3:{id:"port3",type:"bottom",properties:{path:""}},port4:{id:"port4",type:"left",properties:{path:""}}}}),Object(o.jsx)(H,{type:"aws-fx",ports:{port1:{id:"port1",type:"top",properties:{path:""}},port2:{id:"port2",type:"right",properties:{path:""}},port3:{id:"port3",type:"bottom",properties:{path:""}},port4:{id:"port4",type:"left",properties:{path:""}}}})]})},U=n(16),N=n(44);function E(){var e=Object(h.a)(["\n      background: ",";\n    "]);return E=function(){return e},e}function J(){var e=Object(h.a)(["\n      color: ",";\n    "]);return J=function(){return e},e}function B(){var e=Object(h.a)(["\n  margin-bottom: 1rem;\n  border: 0.5px solid grey;\n  padding: 30px;\n  min-height: 100px;\n  border-radius: 50%;\n  font-size: 14px;\n  cursor: move;\n  ","\n  ",";\n"]);return B=function(){return e},e}function F(){var e=Object(h.a)(["\n      background: ",";\n    "]);return F=function(){return e},e}function T(){var e=Object(h.a)(["\n      color: ",";\n    "]);return T=function(){return e},e}function A(){var e=Object(h.a)(["\n  margin-bottom: 1rem;\n  border: 0.5px solid grey;\n  padding: 20px 30px;\n  font-size: 14px;\n  background: black;\n  cursor: move;\n  ","\n  ",";\n"]);return A=function(){return e},e}var R=m.default.div(A(),(function(e){return e.color&&Object(m.css)(T(),e.color)}),(function(e){return e.background&&Object(m.css)(F(),e.background)})),L=m.default.div(B(),(function(e){return e.color&&Object(m.css)(J(),e.color)}),(function(e){return e.background&&Object(m.css)(E(),e.background)})),Y=function(e){switch(e){case"oscar-fx":return{background:"#fff",color:"black"};case"aws-fx":return{background:"#080301",color:"white"};case"s3":return{background:"#ebe4c0",color:"black"};case"onedata":return{background:"#c2d4ad",color:"black"};case"minio":return{background:"#c47878",color:"black"};default:return{background:"#FFF",color:"black"}}},z=function(e){switch(e){case"oscar-fx":return Object(o.jsx)("img",{alt:"oscar logo",src:"https://github.com/grycap/oscar/blob/master/docs/images/oscar3.png?raw=true",width:"96px"});case"aws-fx":return Object(o.jsx)("img",{alt:"aws logo",src:"https://d1.awsstatic.com/Digital%20Marketing/House/PAC/2up/PAC-Q4_House-Ads_Lambda_2up.62dc7e19b7b2e0a2c06821594c31f1ce00a6bdda.png",height:"32px"});case"s3":return Object(o.jsx)("img",{alt:"s3 logo",src:"https://servmask.com/img/products/s3.png",height:"48px"});case"onedata":return Object(o.jsx)("img",{alt:"aws logo",src:"https://www.ebi.ac.uk/about/technology/wp-content/uploads/2019/10/onedata-logo.png",height:"24px"});case"minio":return Object(o.jsx)("img",{alt:"aws logo",src:"https://suarapapua.com/wp-content/plugins/ilab-media-tools-premium/public/img/wizard-icon-minio.png",height:"36px"})}},H=function(e){var t=e.type,n=e.ports,a=e.properties,r=Object(U.a)(e,["type","ports","properties"]),i=Y(t);return["s3","onedata","minio"].includes(t)?Object(o.jsxs)(L,Object(d.a)(Object(d.a)({background:i.background,color:i.color,draggable:!0,onDragStart:function(e){e.dataTransfer.setData(N.REACT_FLOW_CHART,JSON.stringify({type:t,ports:n,properties:a}))}},r),{},{children:[z(t),null===a||void 0===a?void 0:a.name]})):Object(o.jsx)(R,{background:i.background,color:i.color,draggable:!0,onDragStart:function(e){e.dataTransfer.setData(N.REACT_FLOW_CHART,JSON.stringify({type:t,ports:n,properties:a}))},children:z(t)})},q=n(403),G=n(404),W=n(405),Q=function(e){switch(e.port.type){case"right":case"left":return Object(o.jsx)(q.a,{style:{fontSize:"1rem"}});case"top":case"bottom":return Object(o.jsx)(G.a,{style:{fontSize:"1rem"}});default:return Object(o.jsx)(W.a,{style:{fontSize:"1rem"}})}},X={offset:{x:0,y:0},scale:1,nodes:{},links:{},selected:{},hovered:{},modalVisible:!1,storageProviders:[],s3ModalVisible:!1,oneDataModalVisible:!1,minioModalVisible:!1,s3DefaultValue:void 0,oneDataDefaultValue:void 0,minioDefaultValue:void 0},Z=n(395),$=n(400),ee=n(406),te=n(407),ne=n(408),oe=n(409),ae=n(119),re=n(161),ie=n.n(re),ce=n(6),ue=n(398),se=n(392),le=n(397),pe=n(401);function de(){var e=Object(h.a)(["\n  width: 20%;\n  align-content: center;\n"]);return de=function(){return e},e}function be(){var e=Object(h.a)(["\n  display: flex;\n  flex-direction: row;\n"]);return be=function(){return e},e}function je(){var e=Object(h.a)(["\n  padding: 10px;\n  border: 1px solid cornflowerblue;\n  margin-bottom: 0.5rem;\n  width: 80%;\n"]);return je=function(){return e},e}function fe(){var e=Object(h.a)(["\n      background: ",";\n    "]);return fe=function(){return e},e}function Oe(){var e=Object(h.a)(["\n      color: ",";\n    "]);return Oe=function(){return e},e}function ve(){var e=Object(h.a)(["\n  padding: 30px;\n  border-radius: 50%;\n  ","\n  ",";\n"]);return ve=function(){return e},e}function ge(){var e=Object(h.a)(["\n      background: ",";\n    "]);return ge=function(){return e},e}function he(){var e=Object(h.a)(["\n      color: ",";\n    "]);return he=function(){return e},e}function xe(){var e=Object(h.a)(["\n  padding: 30px;\n  ","\n  ",";\n"]);return xe=function(){return e},e}var me=m.default.div(xe(),(function(e){return e.color&&Object(m.css)(he(),e.color)}),(function(e){return e.background&&Object(m.css)(ge(),e.background)})),Pe=m.default.div(ve(),(function(e){return e.color&&Object(m.css)(Oe(),e.color)}),(function(e){return e.background&&Object(m.css)(fe(),e.background)})),ye=m.default.input(je()),ke=m.default.div(be()),we=m.default.div(de()),Ce=function(e){var t,n,a,i,c,u,s,l,p,b,j,f,O,v,g,h,x,m,P,y,k,w,C,D,M,_,S,K,V,I,N,E,J,B,F,T,A,R,L,H,q,G,W,Q,X,Z,$,ee,te,ne,oe,ae,re,ie,de,be,je,fe,Oe,ve,ge=e.node,he=(e.config,Object(U.a)(e,["node","config"])),xe=r.a.useState(!1),Ce=Object(ce.a)(xe,2),De=Ce[0],Me=Ce[1],_e=r.a.useState(ge.properties||{}),Se=Object(ce.a)(_e,2),Ke=Se[0],Ve=Se[1],Ie=Y(ge.type);switch(ge.type){case"s3":case"onedata":case"minio":return Object(o.jsxs)(Pe,Object(d.a)(Object(d.a)({},he),{},{color:Ie.color,background:Ie.background,onDoubleClick:function(e){return Me(!0)},children:[Object(o.jsx)(ue.a,{title:(null===(t=ge.properties)||void 0===t?void 0:t.name)||ge.type,visible:De,onOk:function(){ge.properties=Ke,Me(!1)},onCancel:function(){return Me(!1)},okButtonProps:{disabled:!1},cancelButtonProps:{disabled:!1},children:Object(o.jsxs)(ke,{children:[Object(o.jsx)(we,{children:"Path:"}),Object(o.jsx)(ye,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"darknet-workflow/output",value:Ke.path,onChange:function(e){Ve(Object(d.a)(Object(d.a)({},Ke),{},{path:e.target.value}))}})]})}),Object(o.jsx)("div",{children:z(ge.type)}),Object(o.jsx)("div",{children:"".concat((null===(n=ge.properties)||void 0===n?void 0:n.name)||"")})]}));case"oscar-fx":return Object(o.jsxs)(me,{color:Ie.color,background:Ie.background,onDoubleClick:function(){return Me(!0)},children:[Object(o.jsxs)(ue.a,{title:(null===(a=ge.properties)||void 0===a?void 0:a.name)||ge.type,visible:De,onOk:function(){ge.properties=Ke,Me(!1)},onCancel:function(){return Me(!1)},okButtonProps:{disabled:!1},cancelButtonProps:{disabled:!1},children:[Object(o.jsx)(se.a,{children:"Setup"}),Object(o.jsxs)(ke,{children:[Object(o.jsx)(we,{children:"Name:"}),Object(o.jsx)(ye,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"darknet",value:Ke.name,onChange:function(e){Ve(Object(d.a)(Object(d.a)({},Ke),{},{name:e.target.value}))}})]}),Object(o.jsxs)(ke,{children:[Object(o.jsx)(we,{children:"Memory:"}),Object(o.jsx)(ye,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"1Gi",value:Ke.memory,onChange:function(e){Ve(Object(d.a)(Object(d.a)({},Ke),{},{memory:e.target.value}))}})]}),Object(o.jsxs)(ke,{children:[Object(o.jsx)(we,{children:"Cpu:"}),Object(o.jsx)(ye,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"1.0",value:Ke.cpu,onChange:function(e){Ve(Object(d.a)(Object(d.a)({},Ke),{},{cpu:e.target.value}))}})]}),Object(o.jsxs)(ke,{children:[Object(o.jsx)(we,{children:"Image:"}),Object(o.jsx)(ye,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"grycap/darknet",value:Ke.image,onChange:function(e){Ve(Object(d.a)(Object(d.a)({},Ke),{},{image:e.target.value}))}})]}),Object(o.jsxs)(ke,{children:[Object(o.jsx)(we,{children:"Script:"}),Object(o.jsx)(ye,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"yolo.sh",value:Ke.script,onChange:function(e){Ve(Object(d.a)(Object(d.a)({},Ke),{},{script:e.target.value}))}})]}),Object(o.jsxs)(ke,{children:[Object(o.jsx)(we,{children:"Environment variables"}),Object(o.jsx)(ye,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"KEY1=val1, KEY2=val2...",value:null===(i=Ke.environment)||void 0===i?void 0:i.Variables,onChange:function(e){var t=e.target.value;Ve(Object(d.a)(Object(d.a)({},Ke),{},{environment:Object(d.a)(Object(d.a)({},Ke.environment),{},{Variables:e.target.value})})),!t&&delete Ke.environment}})]}),Object(o.jsx)(se.a,{children:"Input"}),Object(o.jsxs)(ke,{children:[Object(o.jsx)(we,{children:"Suffix"}),Object(o.jsx)(ye,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"png, jpg, xls",value:null===(c=Ke.input)||void 0===c?void 0:c.suffix,onChange:function(e){e.target.value?Ve(Object(d.a)(Object(d.a)({},Ke),{},{input:Object(d.a)(Object(d.a)({},Ke.input),{},{suffix:e.target.value})})):delete Ke.suffix}})]}),Object(o.jsxs)(ke,{children:[Object(o.jsx)(we,{children:"Prefix"}),Object(o.jsx)(ye,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"result-, demo-",value:null===(u=Ke.input)||void 0===u?void 0:u.prefix,onChange:function(e){e.target.value?Ve(Object(d.a)(Object(d.a)({},Ke),{},{input:Object(d.a)(Object(d.a)({},Ke.input),{},{prefix:e.target.value})})):delete Ke.prefix}})]}),Object(o.jsx)(se.a,{children:"Output"}),Object(o.jsxs)(ke,{children:[Object(o.jsx)(we,{children:"Suffix"}),Object(o.jsx)(ye,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"png, jpg, xls",value:null===(s=Ke.output)||void 0===s?void 0:s.suffix,onChange:function(e){e.target.value?Ve(Object(d.a)(Object(d.a)({},Ke),{},{output:Object(d.a)(Object(d.a)({},Ke.output),{},{suffix:e.target.value})})):delete Ke.suffix}})]}),Object(o.jsxs)(ke,{children:[Object(o.jsx)(we,{children:"Prefix"}),Object(o.jsx)(ye,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"result-, demo-",value:null===(l=Ke.output)||void 0===l?void 0:l.prefix,onChange:function(e){e.target.value?Ve(Object(d.a)(Object(d.a)({},Ke),{},{output:Object(d.a)(Object(d.a)({},Ke.output),{},{prefix:e.target.value})})):delete Ke.prefix}})]})]}),Object(o.jsx)("div",{children:z(ge.type)}),Object(o.jsx)("div",{children:"".concat((null===(p=ge.properties)||void 0===p?void 0:p.name)||"")})]});case"aws-fx":return Object(o.jsxs)(me,{color:Ie.color,background:Ie.background,onDoubleClick:function(){return Me(!0)},children:[Object(o.jsx)(ue.a,{title:(null===(b=ge.properties)||void 0===b?void 0:b.name)||ge.type,visible:De,onOk:function(){ge.properties=Ke,Me(!1)},onCancel:function(){return Me(!1)},okButtonProps:{disabled:!1},cancelButtonProps:{disabled:!1},children:Object(o.jsxs)(le.a,{defaultActiveKey:"1",children:[Object(o.jsxs)(le.a.TabPane,{tab:"Lambda",children:[Object(o.jsx)(se.a,{children:"Setup"}),Object(o.jsxs)(ke,{children:[Object(o.jsx)(we,{children:"Name:"}),Object(o.jsx)(ye,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"darknet",value:null===(j=Ke.lambda)||void 0===j?void 0:j.name,onChange:function(e){Ve(Object(d.a)(Object(d.a)({},Ke),{},{lambda:Object(d.a)(Object(d.a)({},Ke.lambda),{},{name:e.target.value})}))}})]}),Object(o.jsxs)(ke,{children:[Object(o.jsx)(we,{children:"Region:"}),Object(o.jsx)(ye,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"us-east-1",value:null===(f=Ke.lambda)||void 0===f?void 0:f.region,onChange:function(e){Ve(Object(d.a)(Object(d.a)({},Ke),{},{lambda:Object(d.a)(Object(d.a)({},Ke.lambda),{},{region:e.target.value})}))}})]}),Object(o.jsxs)(ke,{children:[Object(o.jsx)(we,{children:"Boto profile:"}),Object(o.jsx)(ye,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"default",value:null===(O=Ke.lambda)||void 0===O?void 0:O.boto_profile,onChange:function(e){Ve(Object(d.a)(Object(d.a)({},Ke),{},{lambda:Object(d.a)(Object(d.a)({},Ke.lambda),{},{boto_profile:e.target.value})}))}})]}),Object(o.jsxs)(ke,{children:[Object(o.jsx)(we,{children:"Memory:"}),Object(o.jsx)(ye,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"1024",value:null===(v=Ke.lambda)||void 0===v?void 0:v.memory,onChange:function(e){Ve(Object(d.a)(Object(d.a)({},Ke),{},{lambda:Object(d.a)(Object(d.a)({},Ke.lambda),{},{memory:e.target.value})}))}})]}),Object(o.jsxs)(ke,{children:[Object(o.jsx)(we,{children:"Cpu:"}),Object(o.jsx)(ye,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"1.0",value:null===(g=Ke.lambda)||void 0===g?void 0:g.cpu,onChange:function(e){Ve(Object(d.a)(Object(d.a)({},Ke),{},{lambda:Object(d.a)(Object(d.a)({},Ke.lambda),{},{cpu:e.target.value})}))}})]}),Object(o.jsxs)(ke,{children:[Object(o.jsx)(we,{children:"Init script:"}),Object(o.jsx)(ye,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"yolo.sh",value:null===(h=Ke.lambda)||void 0===h?void 0:h.init_script,onChange:function(e){Ve(Object(d.a)(Object(d.a)({},Ke),{},{lambda:Object(d.a)(Object(d.a)({},Ke.lambda),{},{init_script:e.target.value})}))}})]}),Object(o.jsxs)(ke,{children:[Object(o.jsx)(we,{children:"Timeout:"}),Object(o.jsx)(ye,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"300",value:null===(x=Ke.lambda)||void 0===x?void 0:x.timeout,onChange:function(e){Ve(Object(d.a)(Object(d.a)({},Ke),{},{lambda:Object(d.a)(Object(d.a)({},Ke.lambda),{},{timeout:e.target.value})}))}})]}),Object(o.jsxs)(ke,{children:[Object(o.jsx)(we,{children:"Log level:"}),Object(o.jsx)(ye,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"INFO | DEBUG | ERROR | WARNING",value:null===(m=Ke.lambda)||void 0===m?void 0:m.log_level,onChange:function(e){Ve(Object(d.a)(Object(d.a)({},Ke),{},{lambda:Object(d.a)(Object(d.a)({},Ke.lambda),{},{log_level:e.target.value})}))}})]}),Object(o.jsxs)(ke,{children:[Object(o.jsx)(we,{children:"Execution mode:"}),Object(o.jsx)(ye,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"lambda | lambda-batch | batch",value:null===(P=Ke.lambda)||void 0===P?void 0:P.execution_mode,onChange:function(e){Ve(Object(d.a)(Object(d.a)({},Ke),{},{lambda:Object(d.a)(Object(d.a)({},Ke.lambda),{},{execution_mode:e.target.value})}))}})]}),Object(o.jsxs)(ke,{children:[Object(o.jsx)(we,{children:"Environment variables"}),Object(o.jsx)(ye,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"KEY1=val1, KEY2=val2...",value:null===(y=Ke.lambda)||void 0===y||null===(k=y.environment)||void 0===k?void 0:k.Variables,onChange:function(e){var t,n=e.target.value;Ve(Object(d.a)(Object(d.a)({},Ke),{},{lambda:Object(d.a)(Object(d.a)({},Ke.lambda),{},{environment:Object(d.a)(Object(d.a)({},null===(t=Ke.lambda)||void 0===t?void 0:t.environment),{},{Variables:e.target.value})})})),n&&delete Ke.lambda.environment}})]}),Object(o.jsx)(se.a,{children:"Container"}),Object(o.jsxs)(ke,{children:[Object(o.jsx)(we,{children:"Image:"}),Object(o.jsx)(ye,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"grycap/darknet",value:null===(w=Ke.lambda)||void 0===w||null===(C=w.container)||void 0===C?void 0:C.image,onChange:function(e){var t;Ve(Object(d.a)(Object(d.a)({},Ke),{},{lambda:Object(d.a)(Object(d.a)({},Ke.lambda),{},{container:Object(d.a)(Object(d.a)({},null===(t=Ke.lambda)||void 0===t?void 0:t.container),{},{image:e.target.value})})}))}})]}),Object(o.jsxs)(ke,{children:[Object(o.jsx)(we,{children:"Timeout threshold"}),Object(o.jsx)(ye,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"grycap/darknet",value:null===(D=Ke.lambda)||void 0===D||null===(M=D.container)||void 0===M?void 0:M.timeout_threshold,onChange:function(e){var t;Ve(Object(d.a)(Object(d.a)({},Ke),{},{lambda:Object(d.a)(Object(d.a)({},Ke.lambda),{},{container:Object(d.a)(Object(d.a)({},null===(t=Ke.lambda)||void 0===t?void 0:t.container),{},{timeout_threshold:e.target.value})})}))}})]}),Object(o.jsxs)(ke,{children:[Object(o.jsx)(we,{children:"Environment variables"}),Object(o.jsx)(ye,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"KEY1=val1, KEY2=val2...",value:null===(_=Ke.lambda)||void 0===_||null===(S=_.container)||void 0===S||null===(K=S.environment)||void 0===K?void 0:K.Variables,onChange:function(e){var t,n,o=e.target.value;Ve(Object(d.a)(Object(d.a)({},Ke),{},{lambda:Object(d.a)(Object(d.a)({},Ke.lambda),{},{container:Object(d.a)(Object(d.a)({},null===(t=Ke.lambda)||void 0===t?void 0:t.container),{},{environment:Object(d.a)(Object(d.a)({},null===(n=Ke.lambda)||void 0===n?void 0:n.container.environment),{},{Variables:e.target.value})})})})),!o&&delete Ke.lambda.container.environment}})]}),Object(o.jsx)(se.a,{children:"Input"}),Object(o.jsxs)(ke,{children:[Object(o.jsx)(we,{children:"Suffix"}),Object(o.jsx)(ye,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"png, jpg, xls",value:null===(V=Ke.lambda)||void 0===V||null===(I=V.input)||void 0===I?void 0:I.suffix,onChange:function(e){var t;e.target.value?Ve(Object(d.a)(Object(d.a)({},Ke),{},{lambda:Object(d.a)(Object(d.a)({},Ke.lambda),{},{input:Object(d.a)(Object(d.a)({},null===(t=Ke.lambda)||void 0===t?void 0:t.input),{},{suffix:e.target.value})})})):delete Ke.lambda.input.suffix}})]}),Object(o.jsxs)(ke,{children:[Object(o.jsx)(we,{children:"Prefix"}),Object(o.jsx)(ye,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"result-, demo-",value:null===(N=Ke.lambda)||void 0===N||null===(E=N.input)||void 0===E?void 0:E.prefix,onChange:function(e){var t;e.target.value?Ve(Object(d.a)(Object(d.a)({},Ke),{},{lambda:Object(d.a)(Object(d.a)({},Ke.lambda),{},{input:Object(d.a)(Object(d.a)({},null===(t=Ke.lambda)||void 0===t?void 0:t.input),{},{prefix:e.target.value})})})):delete Ke.lambda.input.prefix}})]}),Object(o.jsx)(se.a,{children:"Output"}),Object(o.jsxs)(ke,{children:[Object(o.jsx)(we,{children:"Suffix"}),Object(o.jsx)(ye,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"png, jpg, xls",value:null===(J=Ke.lambda)||void 0===J||null===(B=J.output)||void 0===B?void 0:B.suffix,onChange:function(e){var t;e.target.value?Ve(Object(d.a)(Object(d.a)({},Ke),{},{lambda:Object(d.a)(Object(d.a)({},Ke.lambda),{},{output:Object(d.a)(Object(d.a)({},null===(t=Ke.lambda)||void 0===t?void 0:t.input),{},{suffix:e.target.value})})})):delete Ke.lambda.output.suffix}})]}),Object(o.jsxs)(ke,{children:[Object(o.jsx)(we,{children:"Prefix"}),Object(o.jsx)(ye,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"result-, demo-",value:null===(F=Ke.lambda)||void 0===F||null===(T=F.output)||void 0===T?void 0:T.prefix,onChange:function(e){var t;e.target.value?Ve(Object(d.a)(Object(d.a)({},Ke),{},{lambda:Object(d.a)(Object(d.a)({},Ke.lambda),{},{output:Object(d.a)(Object(d.a)({},null===(t=Ke.lambda)||void 0===t?void 0:t.input),{},{prefix:e.target.value})})})):delete Ke.prefix}})]})]},"1"),Object(o.jsxs)(le.a.TabPane,{tab:"Batch",children:[Object(o.jsx)(se.a,{children:"Setup"}),Object(o.jsxs)(ke,{children:[Object(o.jsx)(we,{children:"Region:"}),Object(o.jsx)(ye,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"us-east-1",value:null===(A=Ke.batch)||void 0===A?void 0:A.region,onChange:function(e){Ve(Object(d.a)(Object(d.a)({},Ke),{},{batch:Object(d.a)(Object(d.a)({},Ke.batch),{},{region:e.target.value})}))}})]}),Object(o.jsxs)(ke,{children:[Object(o.jsx)(we,{children:"Boto profile:"}),Object(o.jsx)(ye,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"default",value:null===(R=Ke.batch)||void 0===R?void 0:R.boto_profile,onChange:function(e){Ve(Object(d.a)(Object(d.a)({},Ke),{},{batch:Object(d.a)(Object(d.a)({},Ke.batch),{},{boto_profile:e.target.value})}))}})]}),Object(o.jsxs)(ke,{children:[Object(o.jsx)(we,{children:"Memory:"}),Object(o.jsx)(ye,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"1024",value:null===(L=Ke.batch)||void 0===L?void 0:L.memory,onChange:function(e){Ve(Object(d.a)(Object(d.a)({},Ke),{},{batch:Object(d.a)(Object(d.a)({},Ke.batch),{},{memory:e.target.value})}))}})]}),Object(o.jsxs)(ke,{children:[Object(o.jsx)(we,{children:"vCpu:"}),Object(o.jsx)(ye,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"1.0",value:Ke.vcpus,onChange:function(e){Ve(Object(d.a)(Object(d.a)({},Ke),{},{batch:Object(d.a)(Object(d.a)({},Ke.batch),{},{cpu:e.target.value})}))}})]}),Object(o.jsxs)(ke,{children:[Object(o.jsx)(we,{children:"Enable gpu:"}),Object(o.jsx)(pe.a,{onClick:function(e){return e.stopPropagation()},value:Ke.enable_gpu,onChange:function(e){Ve(Object(d.a)(Object(d.a)({},Ke),{},{batch:Object(d.a)(Object(d.a)({},Ke.batch),{},{enable_gpu:e.target.checked})}))}})]}),Object(o.jsxs)(ke,{children:[Object(o.jsx)(we,{children:"Service role:"}),Object(o.jsx)(ye,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"aren:...",value:Ke.service_role,onChange:function(e){Ve(Object(d.a)(Object(d.a)({},Ke),{},{batch:Object(d.a)(Object(d.a)({},Ke.batch),{},{service_role:e.target.value})}))}})]}),Object(o.jsxs)(ke,{children:[Object(o.jsx)(we,{children:"Environment variables"}),Object(o.jsx)(ye,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"KEY1=val1, KEY2=val2...",value:null===(H=Ke.batch)||void 0===H||null===(q=H.environment)||void 0===q?void 0:q.Variables,onChange:function(e){var t,n=e.target.value;Ve(Object(d.a)(Object(d.a)({},Ke),{},{batch:Object(d.a)(Object(d.a)({},Ke.batch),{},{environment:Object(d.a)(Object(d.a)({},null===(t=Ke.batch)||void 0===t?void 0:t.environment),{},{Variables:e.target.value})})})),n&&delete Ke.batch.environment}})]}),Object(o.jsx)(se.a,{children:"Compute resources"}),Object(o.jsxs)(ke,{children:[Object(o.jsx)(we,{children:"Desired vCpus"}),Object(o.jsx)(ye,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"0",value:null===(G=Ke.batch)||void 0===G||null===(W=G.compute_resources)||void 0===W?void 0:W.desired_v_cpus,onChange:function(e){var t;Ve(Object(d.a)(Object(d.a)({},Ke),{},{batch:Object(d.a)(Object(d.a)({},Ke.batch),{},{compute_resources:Object(d.a)(Object(d.a)({},null===(t=Ke.batch)||void 0===t?void 0:t.compute_resources),{},{desired_v_cpus:e.target.value})})}))}})]}),Object(o.jsxs)(ke,{children:[Object(o.jsx)(we,{children:"Min vCpus"}),Object(o.jsx)(ye,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"0",value:null===(Q=Ke.batch)||void 0===Q||null===(X=Q.compute_resources)||void 0===X?void 0:X.min_v_cpus,onChange:function(e){var t;Ve(Object(d.a)(Object(d.a)({},Ke),{},{batch:Object(d.a)(Object(d.a)({},Ke.batch),{},{compute_resources:Object(d.a)(Object(d.a)({},null===(t=Ke.batch)||void 0===t?void 0:t.compute_resources),{},{min_v_cpus:e.target.value})})}))}})]}),Object(o.jsxs)(ke,{children:[Object(o.jsx)(we,{children:"Max vCpus"}),Object(o.jsx)(ye,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"2",value:null===(Z=Ke.batch)||void 0===Z||null===($=Z.compute_resources)||void 0===$?void 0:$.max_v_cpus,onChange:function(e){var t;Ve(Object(d.a)(Object(d.a)({},Ke),{},{batch:Object(d.a)(Object(d.a)({},Ke.batch),{},{compute_resources:Object(d.a)(Object(d.a)({},null===(t=Ke.batch)||void 0===t?void 0:t.compute_resources),{},{max_v_cpus:e.target.value})})}))}})]}),Object(o.jsxs)(ke,{children:[Object(o.jsx)(we,{children:"Max vCpus"}),Object(o.jsx)(ye,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"2",value:null===(ee=Ke.batch)||void 0===ee||null===(te=ee.compute_resources)||void 0===te?void 0:te.max_v_cpus,onChange:function(e){var t;Ve(Object(d.a)(Object(d.a)({},Ke),{},{batch:Object(d.a)(Object(d.a)({},Ke.batch),{},{compute_resources:Object(d.a)(Object(d.a)({},null===(t=Ke.batch)||void 0===t?void 0:t.compute_resources),{},{max_v_cpus:e.target.value})})}))}})]}),Object(o.jsxs)(ke,{children:[Object(o.jsx)(we,{children:"Instance role"}),Object(o.jsx)(ye,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"arn:...",value:null===(ne=Ke.batch)||void 0===ne||null===(oe=ne.compute_resources)||void 0===oe?void 0:oe.instance_role,onChange:function(e){var t;Ve(Object(d.a)(Object(d.a)({},Ke),{},{batch:Object(d.a)(Object(d.a)({},Ke.batch),{},{compute_resources:Object(d.a)(Object(d.a)({},null===(t=Ke.batch)||void 0===t?void 0:t.compute_resources),{},{instance_role:e.target.value})})}))}})]}),Object(o.jsxs)(ke,{children:[Object(o.jsx)(we,{children:"Security group ids"}),Object(o.jsx)(ye,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"sg-12345678, sg-12345679...",value:null===(ae=Ke.batch)||void 0===ae||null===(re=ae.security_group_ids)||void 0===re?void 0:re.security_group_ids,onChange:function(e){var t;Ve(Object(d.a)(Object(d.a)({},Ke),{},{batch:Object(d.a)(Object(d.a)({},Ke.batch),{},{compute_resources:Object(d.a)(Object(d.a)({},null===(t=Ke.batch)||void 0===t?void 0:t.compute_resources),{},{security_group_ids:e.target.value})})}))}})]}),Object(o.jsxs)(ke,{children:[Object(o.jsx)(we,{children:"Subnets"}),Object(o.jsx)(ye,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"subnet-12345, subnet-67891...",value:null===(ie=Ke.batch)||void 0===ie||null===(de=ie.subnets)||void 0===de?void 0:de.subnets,onChange:function(e){var t;Ve(Object(d.a)(Object(d.a)({},Ke),{},{batch:Object(d.a)(Object(d.a)({},Ke.batch),{},{compute_resources:Object(d.a)(Object(d.a)({},null===(t=Ke.batch)||void 0===t?void 0:t.compute_resources),{},{subnets:e.target.value})})}))}})]}),Object(o.jsxs)(ke,{children:[Object(o.jsx)(we,{children:"Instance types"}),Object(o.jsx)(ye,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"m3.medium, m3.large...",value:null===(be=Ke.batch)||void 0===be||null===(je=be.subnets)||void 0===je?void 0:je.instance_types,onChange:function(e){var t;Ve(Object(d.a)(Object(d.a)({},Ke),{},{batch:Object(d.a)(Object(d.a)({},Ke.batch),{},{compute_resources:Object(d.a)(Object(d.a)({},null===(t=Ke.batch)||void 0===t?void 0:t.compute_resources),{},{instance_types:e.target.value})})}))}})]})]},"2")]})}),Object(o.jsx)("div",{children:z(ge.type)}),Object(o.jsx)("div",{children:"".concat((null===(fe=ge.properties)||void 0===fe?void 0:fe.lambda.name)||"")})]});default:return Object(o.jsxs)(me,{color:Ie.color,background:Ie.background,onDoubleClick:function(){Me(!0)},children:[Object(o.jsx)(ue.a,{title:(null===(Oe=ge.properties)||void 0===Oe?void 0:Oe.name)||ge.type,visible:De,onOk:function(){ge.properties=Ke,Me(!1)},onCancel:function(){return Me(!1)},okButtonProps:{disabled:!1},cancelButtonProps:{disabled:!1}}),Object(o.jsx)("div",{children:z(ge.type)}),Object(o.jsx)("div",{children:"".concat((null===(ve=ge.properties)||void 0===ve?void 0:ve.name)||"")})]})}},De=function(e){var t=e.visible,n=e.onOk,i=e.onCancel,c=e.defaultValue,u={name:"",access_key:"",secret_key:"",region:""},s=r.a.useState(u),l=Object(ce.a)(s,2),p=l[0],b=l[1];return Object(a.useEffect)((function(){c&&b(c)}),[c,t]),Object(o.jsxs)(ue.a,{title:"S3 Storage Provider ".concat(p.name),visible:t,onCancel:function(){i(),b(u)},onOk:function(){n(JSON.parse(JSON.stringify(p))),b(u)},children:[Object(o.jsxs)(ke,{children:[Object(o.jsx)(we,{children:"Name:"}),Object(o.jsx)(ye,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"my-s3",value:p.name,onChange:function(e){b(Object(d.a)(Object(d.a)({},p),{},{name:e.target.value}))}})]}),Object(o.jsxs)(ke,{children:[Object(o.jsx)(we,{children:"Access Key:"}),Object(o.jsx)(ye,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"xxxxxxxxxxxxxxxx",value:p.access_key,onChange:function(e){b(Object(d.a)(Object(d.a)({},p),{},{access_key:e.target.value}))}})]}),Object(o.jsxs)(ke,{children:[Object(o.jsx)(we,{children:"Secret Key:"}),Object(o.jsx)(ye,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"xxxxxxxxxxxxxxxx",value:p.secret_key,onChange:function(e){b(Object(d.a)(Object(d.a)({},p),{},{secret_key:e.target.value}))}})]}),Object(o.jsxs)(ke,{children:[Object(o.jsx)(we,{children:"Region:"}),Object(o.jsx)(ye,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"us-east-1",value:p.region,onChange:function(e){b(Object(d.a)(Object(d.a)({},p),{},{region:e.target.value}))}})]})]})},Me=function(e){var t=e.visible,n=e.onOk,i=e.onCancel,c=e.defaultValue,u={name:"",oneprovider_host:"",token:"",space:""},s=r.a.useState(u),l=Object(ce.a)(s,2),p=l[0],b=l[1];return Object(a.useEffect)((function(){c&&b(c)}),[c,t]),Object(o.jsxs)(ue.a,{title:"OneData Storage Provider ".concat(p.name),visible:t,onCancel:function(){i(),b(u)},onOk:function(){n(JSON.parse(JSON.stringify(p))),b(u)},children:[Object(o.jsxs)(ke,{children:[Object(o.jsx)(we,{children:"Name:"}),Object(o.jsx)(ye,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"my-onedata",value:p.name,onChange:function(e){b(Object(d.a)(Object(d.a)({},p),{},{name:e.target.value}))}})]}),Object(o.jsxs)(ke,{children:[Object(o.jsx)(we,{children:"One Provider Host:"}),Object(o.jsx)(ye,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"plg-cyfronet-01.datahub.egi.eu",value:p.oneprovider_host,onChange:function(e){b(Object(d.a)(Object(d.a)({},p),{},{oneprovider_host:e.target.value}))}})]}),Object(o.jsxs)(ke,{children:[Object(o.jsx)(we,{children:"Token:"}),Object(o.jsx)(ye,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"xxxxxxxxxxxxxxxx",value:p.token,onChange:function(e){b(Object(d.a)(Object(d.a)({},p),{},{token:e.target.value}))}})]}),Object(o.jsxs)(ke,{children:[Object(o.jsx)(we,{children:"Space:"}),Object(o.jsx)(ye,{onClick:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},placeholder:"my-space",value:p.space,onChange:function(e){b(Object(d.a)(Object(d.a)({},p),{},{space:e.target.value}))}})]})]})},_e=n(396),Se=n(399),Ke=n(393),Ve=n(394),Ie=function(e){var t=e.visible,n=e.onOk,r=e.onCancel,i=e.defaultValue,c=_e.a.useForm(),u=Object(ce.a)(c,1)[0],s=Object(a.useState)(!1),l=Object(ce.a)(s,2),p=l[0],b=l[1];Object(a.useEffect)((function(){i&&u.setFieldsValue(i)}),[i,t,u]),Object(a.useEffect)((function(){i&&b(i.verify)}),[i]);return Object(o.jsx)(ue.a,{title:"OneData Storage Provider ".concat((null===i||void 0===i?void 0:i.name)||""),visible:t,onCancel:function(){r(),u.resetFields(),b(!1)},onOk:function(){u.validateFields().then((function(e){var t=Object(d.a)(Object(d.a)({},e),{},{verify:p});console.log(t),n(t),u.resetFields(),b(!1)})).catch((function(e){return console.log("Error",e)}))},children:Object(o.jsxs)(_e.a,{form:u,initialValues:i,name:"Form minio modal",children:[Object(o.jsx)(_e.a.Item,{name:"name",label:"Name",rules:[{required:!0,message:"Please input the name of the storage provider"}],children:Object(o.jsx)(Se.a,{})}),Object(o.jsx)(_e.a.Item,{name:"endpoint",label:"Endpoint",rules:[{required:!0,message:"Please input the endpoint of the storage provider"}],children:Object(o.jsx)(Se.a,{})}),Object(o.jsxs)(Ke.a,{style:{marginBottom:"1rem"},children:[Object(o.jsx)(Ve.a,{span:3,children:"Verify:"}),Object(o.jsx)(Ve.a,{span:1,children:Object(o.jsx)(pe.a,{value:p,onChange:function(e){b(e.target.checked)}})})]}),Object(o.jsx)(_e.a.Item,{name:"region",label:"Region",rules:[{required:!0,message:"Please input the region of the storage provider"}],children:Object(o.jsx)(Se.a,{})}),Object(o.jsx)(_e.a.Item,{name:"access_key",label:"Access Key",rules:[{required:!0,message:"Please input the access key of the storage provider"}],children:Object(o.jsx)(Se.a,{})}),Object(o.jsx)(_e.a.Item,{name:"secret_key",label:"Secret Key",rules:[{required:!0,message:"Please input the secret key of the storage provider"}],children:Object(o.jsx)(Se.a,{})})]})})};function Ue(){var e=Object(h.a)(["\n  margin-right: 1rem;\n"]);return Ue=function(){return e},e}var Ne=Z.a.Header,Ee=$.a.SubMenu,Je=Object(m.default)(S.a)(Ue()),Be=function(e){Object(v.a)(n,e);var t=Object(g.a)(n);function n(e){var o;return Object(j.a)(this,n),(o=t.call(this,e)).state=Object(x.cloneDeep)(X),o.removeStorageProvider=o.removeStorageProvider.bind(Object(O.a)(o)),o.editStorageProvider=o.editStorageProvider.bind(Object(O.a)(o)),o}return Object(f.a)(n,[{key:"exportToYaml",value:function(){var e=Object.values(this.state.nodes),t=Object.values(this.state.links),n=e.filter((function(e){return"s3"===e.type||"onedata"===e.type||"minio"===e.type})),o=e.filter((function(e){return"oscar-fx"===e.type})).map((function(e){var o=t.filter((function(t){return t.to.nodeId===e.id&&("port1"===t.to.portId||"port4"===t.to.portId)||t.from.nodeId===e.id&&("port1"===t.from.portId||"port4"===t.from.portId)})),a=t.filter((function(t){return t.to.nodeId===e.id&&("port2"===t.to.portId||"port3"===t.to.portId)||t.from.nodeId===e.id&&("port2"===t.from.portId||"port3"===t.from.portId)})),r=n.find((function(e){return o.some((function(t){return t.from.nodeId===e.id||t.to.nodeId===e.id}))}));console.log("Input node",r);var i=n.find((function(e){return a.some((function(t){return t.from.nodeId===e.id||t.to.nodeId===e.id}))}));console.log("Output node",i);var c=JSON.parse(JSON.stringify(e.properties)),u=c.input;u&&(u.storage_provider="".concat(null===r||void 0===r?void 0:r.type,".").concat(null===r||void 0===r?void 0:r.properties.name),u.path=null===r||void 0===r?void 0:r.properties.path,u.prefix&&(u.prefix=u.prefix.replace(" ","").split(",")),(null===u||void 0===u?void 0:u.suffix)&&(u.suffix=u.suffix.replace(" ","").split(",")),c.input=[u]);var s=c.output;s&&(s.storage_provider="".concat(null===i||void 0===i?void 0:i.type,".").concat(null===i||void 0===i?void 0:i.properties.name),s.path=null===i||void 0===i?void 0:i.properties.path,s.prefix&&(s.prefix=s.prefix.replace(" ","").split(",")),s.suffix&&(s.suffix=s.suffix.replace(" ","").split(",")),c.output=[s]);var l=c.environment;return l&&(c.environment={Variables:l.Variables.replace(" ","").split(",").map((function(e){var t=e.split("=");return Object(b.a)({},t[0].trim(),t[1].trim())})).reduce((function(e,t){return Object(d.a)(Object(d.a)({},e),t)}))}),c})),a=e.filter((function(e){return"aws-fx"===e.type})).map((function(e){var o,a,r,i,c,u,s,l=JSON.parse(JSON.stringify(e.properties)),p=t.filter((function(t){return t.to.nodeId===e.id&&("port1"===t.to.portId||"port4"===t.to.portId)||t.from.nodeId===e.id&&("port1"===t.from.portId||"port4"===t.from.portId)})),j=t.filter((function(t){return t.to.nodeId===e.id&&("port2"===t.to.portId||"port3"===t.to.portId)||t.from.nodeId===e.id&&("port2"===t.from.portId||"port3"===t.from.portId)})),f=n.find((function(e){return p.some((function(t){return t.from.nodeId===e.id||t.to.nodeId===e.id}))})),O=n.find((function(e){return j.some((function(t){return t.from.nodeId===e.id||t.to.nodeId===e.id}))})),v=null===(o=l.lambda)||void 0===o?void 0:o.input;v&&(v.storage_provider="".concat(null===f||void 0===f?void 0:f.type,".").concat(null===f||void 0===f?void 0:f.properties.name),(null===v||void 0===v?void 0:v.prefix)&&(v.prefix=v.prefix.replace(" ","").split(",")),(null===v||void 0===v?void 0:v.suffix)&&(v.suffix=v.suffix.replace(" ","").split(",")),l.lambda.input=v);var g=null===(a=l.lambda)||void 0===a?void 0:a.output;g&&(g.storage_provider="".concat(null===O||void 0===O?void 0:O.type,".").concat(null===O||void 0===O?void 0:O.properties.name),(null===g||void 0===g?void 0:g.prefix)&&(g.prefix=g.prefix.replace(" ","").split(",")),g.suffix&&(g.suffix=g.suffix.replace(" ","").split(",")),l.lambda.output=g);var h=null===(r=l.batch)||void 0===r?void 0:r.compute_resources;(null===h||void 0===h?void 0:h.instance_types)&&(h.instance_types=h.instance_types.replace(" ","").split(",")),(null===h||void 0===h?void 0:h.subnets)&&(h.subnets=h.subnets.replace(" ","").split(",")),(null===h||void 0===h?void 0:h.security_group_ids)&&(h.security_group_ids=h.security_group_ids.replace(" ","").split(","));var x=null===(i=l.lambda)||void 0===i?void 0:i.environment;x&&(l.lambda.environment={Variables:x.Variables.replace(" ","").split(",").map((function(e){var t=e.split("=");return Object(b.a)({},t[0].trim(),t[1].trim())})).reduce((function(e,t){return Object(d.a)(Object(d.a)({},e),t)}))}),(null===(c=l.batch)||void 0===c?void 0:c.environment)&&(l.batch.environment={Variables:x.Variables.replace(" ","").split(",").map((function(e){var t=e.split("=");return Object(b.a)({},t[0].trim(),t[1].trim())})).reduce((function(e,t){return Object(d.a)(Object(d.a)({},e),t)}))});var m=null===(u=l.lambda)||void 0===u||null===(s=u.container)||void 0===s?void 0:s.environment;return m&&(l.lambda.container.environment={Variables:m.Variables.replace(" ","").split(",").map((function(e){var t=e.split("=");return Object(b.a)({},t[0].trim(),t[1].trim())})).reduce((function(e,t){return Object(d.a)(Object(d.a)({},e),t)}))}),l})),r=e.filter((function(e){return"onedata"===e.type})).map((function(e){return e.properties})).reduce((function(e,t){var n=JSON.parse(JSON.stringify(t));return delete n.path,Object(d.a)(Object(d.a)({},e),{},Object(b.a)({},t.name,n))}),{}),i=e.filter((function(e){return"s3"===e.type})).map((function(e){return e.properties})).reduce((function(e,t){var n=JSON.parse(JSON.stringify(t));return delete n.name,delete n.path,Object(d.a)(Object(d.a)({},e),{},Object(b.a)({},t.name,n))}),{}),c=e.filter((function(e){return"minio"===e.type})).map((function(e){return e.properties})).reduce((function(e,t){var n=JSON.parse(JSON.stringify(t));return delete n.name,delete n.path,Object(d.a)(Object(d.a)({},e),{},Object(b.a)({},t.name,n))}),{}),u=ie.a.dump({functions:{oscar:o.map((function(e){return JSON.parse('{ "'.concat(e.name,'": ').concat(JSON.stringify(e)," }"))})),aws:a},storage_providers:{s3:i,onedata:r,minio:c}}),s=new Blob([u],{type:"text/plain;charset=utf-8"});Object(ae.saveAs)(s,"workflow.yaml")}},{key:"exportState",value:function(){var e=JSON.stringify(this.state),t=new Blob([e],{type:"text/plain;charset=utf-8"});Object(ae.saveAs)(t,"state.json")}},{key:"importState",value:function(){var e=this,t=document.createElement("input");t.type="file",t.onchange=function(n){var o=new FileReader;o.onload=function(){var t=Object(p.a)(l.a.mark((function t(n){var o;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(null===n||void 0===n||null===(o=n.target)||void 0===o?void 0:o.result)&&e.setState(JSON.parse(n.target.result));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),o.readAsText(t.files[0])},t.click()}},{key:"editStorageProvider",value:function(e,t){console.log("editing ".concat(e," ").concat(t));var n=this.state.storageProviders.find((function(n){return n.type===e&&n.properties.name===t}));switch(e){case"s3":this.setState(Object(d.a)(Object(d.a)({},this.state),{},{s3DefaultValue:null===n||void 0===n?void 0:n.properties,s3ModalVisible:!0}));break;case"onedata":this.setState(Object(d.a)(Object(d.a)({},this.state),{},{oneDataDefaultValue:null===n||void 0===n?void 0:n.properties,oneDataModalVisible:!0}));break;case"minio":this.setState(Object(d.a)(Object(d.a)({},this.state),{},{minioDefaultValue:null===n||void 0===n?void 0:n.properties,minioModalVisible:!0}))}}},{key:"removeStorageProvider",value:function(e,t){console.log("removing ".concat(e," ").concat(t)),console.log(this.state.storageProviders);var n=this.state.storageProviders.findIndex((function(n){return n.type===e&&n.properties.name===t})),o=Object(u.a)(this.state.storageProviders);o.splice(n,1),this.setState(Object(d.a)(Object(d.a)({},this.state),{},{storageProviders:o}))}},{key:"addOrUpdateStorageProvider",value:function(e,t){var n=this.state.storageProviders.findIndex((function(n){var o;return n.type===e&&t.name===(null===(o=n.properties)||void 0===o?void 0:o.name)}));console.log(n);var o=Object(u.a)(this.state.storageProviders);-1!==n&&o.splice(n,1);var a=[].concat(Object(u.a)(o),[{type:e,ports:{port1:{id:"port1",type:"top",properties:{path:""}},port2:{id:"port2",type:"right",properties:{path:""}},port3:{id:"port3",type:"bottom",properties:{path:""}},port4:{id:"port4",type:"left",properties:{path:""}}},properties:t}]);this.setState(Object(d.a)(Object(d.a)({},this.state),{},{storageProviders:a,s3ModalVisible:!1,oneDataModalVisible:!1,minioModalVisible:!1}))}},{key:"render",value:function(){var e=this,t=this.state,n=Object(x.mapValues)(Object(d.a)(Object(d.a)({},N.actions),{},{onNodeDoubleClick:function(){return Object(d.a)(Object(d.a)({},e.state),{},{selected:{}})}}),(function(t){return function(){e.setState(t.apply(void 0,arguments))}}));return Object(o.jsx)("div",{className:"App",children:Object(o.jsxs)(Z.a,{className:"layout",children:[Object(o.jsx)(De,{defaultValue:this.state.s3DefaultValue,visible:this.state.s3ModalVisible,onCancel:function(){return e.setState(Object(d.a)(Object(d.a)({},e.state),{},{s3DefaultValue:void 0,s3ModalVisible:!1}))},onOk:function(t){e.addOrUpdateStorageProvider("s3",t)}}),Object(o.jsx)(Me,{defaultValue:this.state.oneDataDefaultValue,visible:this.state.oneDataModalVisible,onCancel:function(){return e.setState(Object(d.a)(Object(d.a)({},e.state),{},{oneDataDefaultValue:void 0,oneDataModalVisible:!1}))},onOk:function(t){e.addOrUpdateStorageProvider("onedata",t)}}),Object(o.jsx)(Ie,{defaultValue:this.state.minioDefaultValue,visible:this.state.minioModalVisible,onCancel:function(){return e.setState(Object(d.a)(Object(d.a)({},e.state),{},{minioDefaultValue:void 0,minioModalVisible:!1}))},onOk:function(t){e.addOrUpdateStorageProvider("minio",t)}}),Object(o.jsx)(Ne,{children:Object(o.jsxs)($.a,{theme:"dark",mode:"horizontal",children:[Object(o.jsx)(Je,{ghost:!0,icon:Object(o.jsx)(ee.a,{}),onClick:function(){return e.exportState()},children:"Download state"}),Object(o.jsx)(Je,{ghost:!0,icon:Object(o.jsx)(te.a,{}),onClick:function(){return e.importState()},children:"Load state"}),Object(o.jsx)(Je,{ghost:!0,icon:Object(o.jsx)(ne.a,{}),onClick:function(){e.exportToYaml()},children:"Export yaml"}),Object(o.jsxs)(Ee,{icon:Object(o.jsx)(oe.a,{}),title:"Storage providers",children:[Object(o.jsx)($.a.Item,{onClick:function(){e.setState(Object(d.a)(Object(d.a)({},e.state),{},{s3ModalVisible:!0}))},children:"S3"},"storage:s3"),Object(o.jsx)($.a.Item,{onClick:function(){e.setState(Object(d.a)(Object(d.a)({},e.state),{},{minioModalVisible:!0}))},children:"Minio"},"storage:minio"),Object(o.jsx)($.a.Item,{onClick:function(){e.setState(Object(d.a)(Object(d.a)({},e.state),{},{oneDataModalVisible:!0}))},children:"One data"},"storage:onedata")]},"SubMenu")]})}),Object(o.jsxs)(M,{children:[Object(o.jsx)(N.FlowChart,{chart:t,callbacks:n,Components:{NodeInner:Ce,Port:Q}}),Object(o.jsx)(I,{removeStorageProvider:this.removeStorageProvider,editStorageProvider:this.editStorageProvider,storageProviders:this.state.storageProviders})]})]})})}}]),n}(r.a.Component),Fe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,410)).then((function(t){var n=t.getCLS,o=t.getFID,a=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),o(e),a(e),r(e),i(e)}))};c.a.render(Object(o.jsx)(Be,{}),document.getElementById("root")),Fe()}},[[391,1,2]]]);
//# sourceMappingURL=main.184fabc9.chunk.js.map